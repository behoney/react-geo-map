import{r as Vn,s as _m,g as pm,c as ym,R as vm}from"./client.DV5x3l3a.js";var Pd={exports:{}},Lo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=Vn,wm=Symbol.for("react.element"),Cm=Symbol.for("react.fragment"),xm=Object.prototype.hasOwnProperty,Rm=Em.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Im={key:!0,ref:!0,__self:!0,__source:!0};function Md(i,e,t){var n,o={},l=null,a=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)xm.call(e,n)&&!Im.hasOwnProperty(n)&&(o[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:wm,type:i,key:l,ref:a,props:o,_owner:Rm.current}}Lo.Fragment=Cm;Lo.jsx=Md;Lo.jsxs=Md;Pd.exports=Lo;var c1=Pd.exports;class Pn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const $i={PROPERTYCHANGE:"propertychange"};class Fo{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Tm(i,e,t){let n,o;t=t||qr;let l=0,a=i.length,h=!1;for(;l<a;)n=l+(a-l>>1),o=+t(i[n],e),o<0?l=n+1:(a=n,h=!o);return h?l:~l}function qr(i,e){return i>e?1:i<e?-1:0}function qa(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let o=1;o<n;++o){const l=i[o];if(l===e)return o;if(l<e)return t(e,i[o-1],l)>0?o-1:o}return n-1}if(t>0){for(let o=1;o<n;++o)if(i[o]<e)return o-1;return n-1}if(t<0){for(let o=1;o<n;++o)if(i[o]<=e)return o;return n-1}for(let o=1;o<n;++o){if(i[o]==e)return o;if(i[o]<e)return i[o-1]-e<e-i[o]?o-1:o}return n-1}function d1(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function mn(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let o=0;o<n;o++)i[i.length]=t[o]}function Oo(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function Sm(i,e,t){const n=e||qr;return i.every(function(o,l){if(l===0)return!0;const a=n(i[l-1],o);return!(a>0||a===0)})}function Gr(){return!0}function No(){return!1}function er(){}function Ad(i){let e,t,n;return function(){const o=Array.prototype.slice.call(arguments);return(!t||this!==n||!Oo(o,t))&&(n=this,t=o,e=i.apply(this,arguments)),e}}function Pm(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function br(i){for(const e in i)delete i[e]}function tr(i){let e;for(e in i)return!1;return!e}class Do extends Fo{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),o=n[e]||(n[e]=[]);o.includes(t)||o.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,o=this.listeners_&&this.listeners_[n];if(!o)return;const l=t?new Pn(e):e;l.target||(l.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,h[n]=0),++a[n];let f;for(let _=0,m=o.length;_<m;++_)if("handleEvent"in o[_]?f=o[_].handleEvent(l):f=o[_].call(this,l),f===!1||l.propagationStopped){f=!1;break}if(--a[n]===0){let _=h[n];for(delete h[n];_--;)this.removeEventListener(n,er);delete a[n]}return f}disposeInternal(){this.listeners_&&br(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const o=n.indexOf(t);o!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[o]=er,++this.pendingRemovals_[e]):(n.splice(o,1),n.length===0&&delete this.listeners_[e]))}}const H={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ne(i,e,t,n,o){if(o){const a=t;t=function(){i.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==i&&(t=t.bind(n));const l={target:i,type:e,listener:t};return i.addEventListener(e,t),l}function _o(i,e,t,n){return ne(i,e,t,n,!0)}function ce(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),br(i))}class Qr extends Do{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(H.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,o=new Array(n);for(let l=0;l<n;++l)o[l]=ne(this,e[l],t);return o}return ne(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const o=e.length;n=new Array(o);for(let l=0;l<o;++l)n[l]=_o(this,e[l],t)}else n=_o(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)Mm(n);else if(Array.isArray(e))for(let o=0,l=e.length;o<l;++o)this.removeEventListener(e[o],t);else this.removeEventListener(e,t)}}Qr.prototype.on;Qr.prototype.once;Qr.prototype.un;function Mm(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)ce(i[e]);else ce(i)}function B(){throw new Error("Unimplemented abstract method.")}let Am=0;function Ce(i){return i.ol_uid||(i.ol_uid=String(++Am))}class Lc extends Pn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class bt extends Qr{constructor(e){super(),this.on,this.once,this.un,Ce(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Lc(n,e,t)),n=$i.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Lc(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const o=this.values_||(this.values_={});if(n)o[e]=t;else{const l=o[e];o[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],tr(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const he={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function ae(i,e){if(!i)throw new Error(e)}function Fe(i,e,t){return Math.min(Math.max(i,e),t)}function Lm(i,e,t,n,o,l){const a=o-t,h=l-n;if(a!==0||h!==0){const f=((i-t)*a+(e-n)*h)/(a*a+h*h);f>1?(t=o,n=l):f>0&&(t+=a*f,n+=h*f)}return di(i,e,t,n)}function di(i,e,t,n){const o=t-i,l=n-e;return o*o+l*l}function Fm(i){const e=i.length;for(let n=0;n<e;n++){let o=n,l=Math.abs(i[n][n]);for(let h=n+1;h<e;h++){const f=Math.abs(i[h][n]);f>l&&(l=f,o=h)}if(l===0)return null;const a=i[o];i[o]=i[n],i[n]=a;for(let h=n+1;h<e;h++){const f=-i[h][n]/i[n][n];for(let _=n;_<e+1;_++)n==_?i[h][_]=0:i[h][_]+=f*i[n][_]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let o=n-1;o>=0;o--)i[o][e]-=i[o][n]*t[n]}return t}function fo(i){return i*Math.PI/180}function Qi(i,e){const t=i%e;return t*e<0?t+e:t}function ba(i,e,t){return i+t*(e-i)}function Ld(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function to(i,e){return Math.floor(Ld(i,e))}function no(i,e){return Math.ceil(Ld(i,e))}class Fd extends bt{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[he.OPACITY]=e.opacity!==void 0?e.opacity:1,ae(typeof t[he.OPACITY]=="number","Layer opacity must be a number"),t[he.VISIBLE]=e.visible!==void 0?e.visible:!0,t[he.Z_INDEX]=e.zIndex,t[he.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[he.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[he.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[he.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Fe(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return B()}getLayerStatesArray(e){return B()}getExtent(){return this.get(he.EXTENT)}getMaxResolution(){return this.get(he.MAX_RESOLUTION)}getMinResolution(){return this.get(he.MIN_RESOLUTION)}getMinZoom(){return this.get(he.MIN_ZOOM)}getMaxZoom(){return this.get(he.MAX_ZOOM)}getOpacity(){return this.get(he.OPACITY)}getSourceState(){return B()}getVisible(){return this.get(he.VISIBLE)}getZIndex(){return this.get(he.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(he.EXTENT,e)}setMaxResolution(e){this.set(he.MAX_RESOLUTION,e)}setMinResolution(e){this.set(he.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(he.MAX_ZOOM,e)}setMinZoom(e){this.set(he.MIN_ZOOM,e)}setOpacity(e){ae(typeof e=="number","Layer opacity must be a number"),this.set(he.OPACITY,e)}setVisible(e){this.set(he.VISIBLE,e)}setZIndex(e){this.set(he.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const dn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},kt={ANIMATING:0,INTERACTING:1},Zt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Om=42,Qa=256,Ja={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Od{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ja[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Jr=6378137,bi=Math.PI*Jr,Nm=[-bi,-bi,bi,bi],Dm=[-180,-85,180,85],io=Jr*Math.log(Math.tan(Math.PI/2));class Gi extends Od{constructor(e){super({code:e,units:"m",extent:Nm,global:!0,worldExtent:Dm,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Jr)}})}}const Fc=[new Gi("EPSG:3857"),new Gi("EPSG:102100"),new Gi("EPSG:102113"),new Gi("EPSG:900913"),new Gi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Gi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function km(i,e,t,n){const o=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(o));for(let l=0;l<o;l+=n){e[l]=bi*i[l]/180;let a=Jr*Math.log(Math.tan(Math.PI*(+i[l+1]+90)/360));a>io?a=io:a<-io&&(a=-io),e[l+1]=a}return e}function zm(i,e,t,n){const o=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(o));for(let l=0;l<o;l+=n)e[l]=180*i[l]/bi,e[l+1]=360*Math.atan(Math.exp(i[l+1]/Jr))/Math.PI-90;return e}const Gm=6378137,Oc=[-180,-90,180,90],Xm=Math.PI*Gm/180;class ai extends Od{constructor(e,t){super({code:e,units:"degrees",extent:Oc,axisOrientation:t,global:!0,metersPerUnit:Xm,worldExtent:Oc})}}const Nc=[new ai("CRS:84"),new ai("EPSG:4326","neu"),new ai("urn:ogc:def:crs:OGC:1.3:CRS84"),new ai("urn:ogc:def:crs:OGC:2:84"),new ai("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ai("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ai("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Na={};function Um(i){return Na[i]||Na[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function jm(i,e){Na[i]=e}let Ji={};function po(i,e,t){const n=i.getCode(),o=e.getCode();n in Ji||(Ji[n]={}),Ji[n][o]=t}function Wm(i,e){let t;return i in Ji&&e in Ji[i]&&(t=Ji[i][e]),t}const Ve={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Dc(i){const e=qn();for(let t=0,n=i.length;t<n;++t)go(e,i[t]);return e}function f1(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function Ym(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function _i(i,e,t){let n,o;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?o=i[1]-t:i[3]<t?o=t-i[3]:o=0,n*n+o*o}function $a(i,e){return tu(i,e[0],e[1])}function eu(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function tu(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function kc(i,e){const t=i[0],n=i[1],o=i[2],l=i[3],a=e[0],h=e[1];let f=Ve.UNKNOWN;return a<t?f=f|Ve.LEFT:a>o&&(f=f|Ve.RIGHT),h<n?f=f|Ve.BELOW:h>l&&(f=f|Ve.ABOVE),f===Ve.UNKNOWN&&(f=Ve.INTERSECTING),f}function qn(){return[1/0,1/0,-1/0,-1/0]}function sr(i,e,t,n,o){return o?(o[0]=i,o[1]=e,o[2]=t,o[3]=n,o):[i,e,t,n]}function $r(i){return sr(1/0,1/0,-1/0,-1/0,i)}function Nd(i,e){const t=i[0],n=i[1];return sr(t,n,t,n,e)}function nu(i,e,t,n,o){const l=$r(o);return kd(l,i,e,t,n)}function Xr(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function Dd(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function go(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function kd(i,e,t,n,o){for(;t<n;t+=o)Km(i,e[t],e[t+1]);return i}function Km(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function zd(i,e){let t;return t=e(ko(i)),t||(t=e(zo(i)),t)||(t=e(Go(i)),t)||(t=e(pi(i)),t)?t:!1}function Ur(i){let e=0;return Xo(i)||(e=pe(i)*at(i)),e}function ko(i){return[i[0],i[1]]}function zo(i){return[i[2],i[1]]}function Zn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function Vm(i,e){let t;if(e==="bottom-left")t=ko(i);else if(e==="bottom-right")t=zo(i);else if(e==="top-left")t=pi(i);else if(e==="top-right")t=Go(i);else throw new Error("Invalid corner");return t}function Da(i,e,t,n,o){const[l,a,h,f,_,m,p,v]=Zm(i,e,t,n);return sr(Math.min(l,h,_,p),Math.min(a,f,m,v),Math.max(l,h,_,p),Math.max(a,f,m,v),o)}function Zm(i,e,t,n){const o=e*n[0]/2,l=e*n[1]/2,a=Math.cos(t),h=Math.sin(t),f=o*a,_=o*h,m=l*a,p=l*h,v=i[0],w=i[1];return[v-f+p,w-_-m,v-f-p,w-_+m,v+f-p,w+_+m,v+f+p,w+_-m,v-f+p,w-_-m]}function at(i){return i[3]-i[1]}function Ht(i,e,t){const n=t||qn();return es(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):$r(n),n}function pi(i){return[i[0],i[3]]}function Go(i){return[i[2],i[3]]}function pe(i){return i[2]-i[0]}function es(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Xo(i){return i[2]<i[0]||i[3]<i[1]}function Bm(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function Hm(i,e,t){let n=!1;const o=kc(i,e),l=kc(i,t);if(o===Ve.INTERSECTING||l===Ve.INTERSECTING)n=!0;else{const a=i[0],h=i[1],f=i[2],_=i[3],m=e[0],p=e[1],v=t[0],w=t[1],E=(w-p)/(v-m);let R,P;l&Ve.ABOVE&&!(o&Ve.ABOVE)&&(R=v-(w-_)/E,n=R>=a&&R<=f),!n&&l&Ve.RIGHT&&!(o&Ve.RIGHT)&&(P=w-(v-f)*E,n=P>=h&&P<=_),!n&&l&Ve.BELOW&&!(o&Ve.BELOW)&&(R=v-(w-h)/E,n=R>=a&&R<=f),!n&&l&Ve.LEFT&&!(o&Ve.LEFT)&&(P=w-(v-a)*E,n=P>=h&&P<=_)}return n}function qm(i,e){const t=e.getExtent(),n=Zn(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const o=pe(t),a=Math.floor((n[0]-t[0])/o)*o;i[0]-=a,i[2]-=a}return i}function iu(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];qm(i,e);const o=pe(n);if(pe(i)>o&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+o,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-o,i[3]]]}return[i]}function bm(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function yo(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function ru(i,e){const t=Math.cos(e),n=Math.sin(e),o=i[0]*t-i[1]*n,l=i[1]*t+i[0]*n;return i[0]=o,i[1]=l,i}function Qm(i,e){return i[0]*=e,i[1]*=e,i}function Jm(i,e){if(e.canWrapX()){const t=pe(e.getExtent()),n=$m(i,e,t);n&&(i[0]-=n*t)}return i}function $m(i,e,t){const n=e.getExtent();let o=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||pe(n),o=Math.floor((i[0]-n[0])/t)),o}const e_=63710088e-1;function zc(i,e,t){t=t||e_;const n=fo(i[1]),o=fo(e[1]),l=(o-n)/2,a=fo(e[0]-i[0])/2,h=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(o);return 2*t*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Gd(...i){console.warn(...i)}let ka=!0;function t_(i){ka=!1}function su(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Xd(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function n_(i){jm(i.getCode(),i),po(i,i,su)}function i_(i){i.forEach(n_)}function Oe(i){return typeof i=="string"?Um(i):i||null}function Gc(i,e,t,n){i=Oe(i);let o;const l=i.getPointResolutionFunc();if(l)o=l(e,t);else{const a=i.getUnits();if(a=="degrees"&&!n||n=="degrees")o=e;else{const h=lu(i,Oe("EPSG:4326"));if(h===Xd&&a!=="degrees")o=e*i.getMetersPerUnit();else{let _=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];_=h(_,_,2);const m=zc(_.slice(0,2),_.slice(2,4)),p=zc(_.slice(4,6),_.slice(6,8));o=(m+p)/2}const f=i.getMetersPerUnit();f!==void 0&&(o/=f)}}return o}function Xc(i){i_(i),i.forEach(function(e){i.forEach(function(t){e!==t&&po(e,t,su)})})}function r_(i,e,t,n){i.forEach(function(o){e.forEach(function(l){po(o,l,t),po(l,o,n)})})}function ou(i,e){return i?typeof i=="string"?Oe(i):i:Oe(e)}function mo(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||lu(i,e)===su)&&t}function lu(i,e){const t=i.getCode(),n=e.getCode();let o=Wm(t,n);return o||(o=Xd),o}function jr(i,e){const t=Oe(i),n=Oe(e);return lu(t,n)}function s_(i,e,t){return jr(e,t)(i,void 0,i.length)}function za(i,e){return i}function xn(i,e){return ka&&!yo(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(ka=!1,Gd("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function o_(i,e){return i}function hi(i,e){return i}function l_(){Xc(Fc),Xc(Nc),r_(Nc,Fc,km,zm)}l_();function Uc(i,e,t){return function(n,o,l,a,h){if(!n)return;if(!o&&!e)return n;const f=e?0:l[0]*o,_=e?0:l[1]*o,m=h?h[0]:0,p=h?h[1]:0;let v=i[0]+f/2+m,w=i[2]-f/2+m,E=i[1]+_/2+p,R=i[3]-_/2+p;v>w&&(v=(w+v)/2,w=v),E>R&&(E=(R+E)/2,R=E);let P=Fe(n[0],v,w),L=Fe(n[1],E,R);if(a&&t&&o){const A=30*o;P+=-A*Math.log(1+Math.max(0,v-n[0])/A)+A*Math.log(1+Math.max(0,n[0]-w)/A),L+=-A*Math.log(1+Math.max(0,E-n[1])/A)+A*Math.log(1+Math.max(0,n[1]-R)/A)}return[P,L]}}function a_(i){return i}function au(i,e,t,n){const o=pe(e)/t[0],l=at(e)/t[1];return n?Math.min(i,Math.max(o,l)):Math.min(i,Math.min(o,l))}function uu(i,e,t){let n=Math.min(i,e);const o=50;return n*=Math.log(1+o*Math.max(0,i/e-1))/o+1,t&&(n=Math.max(n,t),n/=Math.log(1+o*Math.max(0,t/i-1))/o+1),Fe(n,t/2,e*2)}function u_(i,e,t,n){return e=e!==void 0?e:!0,function(o,l,a,h){if(o!==void 0){const f=i[0],_=i[i.length-1],m=t?au(f,t,a,n):f;if(h)return e?uu(o,m,_):Fe(o,_,m);const p=Math.min(m,o),v=Math.floor(qa(i,p,l));return i[v]>m&&v<i.length-1?i[v+1]:i[v]}}}function h_(i,e,t,n,o,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,h,f,_){if(a!==void 0){const m=o?au(e,o,f,l):e;if(_)return n?uu(a,m,t):Fe(a,t,m);const p=1e-9,v=Math.ceil(Math.log(e/m)/Math.log(i)-p),w=-h*(.5-p)+.5,E=Math.min(m,a),R=Math.floor(Math.log(e/E)/Math.log(i)+w),P=Math.max(v,R),L=e/Math.pow(i,P);return Fe(L,t,m)}}}function jc(i,e,t,n,o){return t=t!==void 0?t:!0,function(l,a,h,f){if(l!==void 0){const _=n?au(i,n,h,o):i;return!t||!f?Fe(l,e,_):uu(l,_,e)}}}function hu(i){if(i!==void 0)return 0}function Wc(i){if(i!==void 0)return i}function c_(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function d_(i){const e=fo(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function Ud(i){return Math.pow(i,3)}function or(i){return 1-Ud(1-i)}function f_(i){return 3*i*i-2*i*i*i}function g_(i){return i}new Array(6);function fi(){return[1,0,0,1,0,0]}function g1(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function zt(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function nr(i,e,t,n,o,l,a,h){const f=Math.sin(l),_=Math.cos(l);return i[0]=n*_,i[1]=o*f,i[2]=-n*f,i[3]=o*_,i[4]=a*n*_-h*n*f+e,i[5]=a*o*f+h*o*_+t,i}function jd(i,e){const t=m_(e);ae(t!==0,"Transformation matrix cannot be inverted");const n=e[0],o=e[1],l=e[2],a=e[3],h=e[4],f=e[5];return i[0]=a/t,i[1]=-o/t,i[2]=-l/t,i[3]=n/t,i[4]=(l*f-a*h)/t,i[5]=-(n*f-o*h)/t,i}function m_(i){return i[0]*i[3]-i[1]*i[2]}const Yc=[1e6,1e6,1e6,1e6,2,2];function __(i){return"matrix("+i.map((t,n)=>Math.round(t*Yc[n])/Yc[n]).join(", ")+")"}function cu(i,e,t,n,o,l,a){l=l||[],a=a||2;let h=0;for(let f=e;f<t;f+=n){const _=i[f],m=i[f+1];l[h++]=o[0]*_+o[2]*m+o[4],l[h++]=o[1]*_+o[3]*m+o[5];for(let p=2;p<a;p++)l[h++]=i[f+p]}return l&&l.length!=h&&(l.length=h),l}function p_(i,e,t,n,o,l,a){a=a||[];const h=Math.cos(o),f=Math.sin(o),_=l[0],m=l[1];let p=0;for(let v=e;v<t;v+=n){const w=i[v]-_,E=i[v+1]-m;a[p++]=_+w*h-E*f,a[p++]=m+w*f+E*h;for(let R=v+2;R<v+n;++R)a[p++]=i[R]}return a&&a.length!=p&&(a.length=p),a}function y_(i,e,t,n,o,l,a,h){h=h||[];const f=a[0],_=a[1];let m=0;for(let p=e;p<t;p+=n){const v=i[p]-f,w=i[p+1]-_;h[m++]=f+o*v,h[m++]=_+l*w;for(let E=p+2;E<p+n;++E)h[m++]=i[E]}return h&&h.length!=m&&(h.length=m),h}function v_(i,e,t,n,o,l,a){a=a||[];let h=0;for(let f=e;f<t;f+=n){a[h++]=i[f]+o,a[h++]=i[f+1]+l;for(let _=f+2;_<f+n;++_)a[h++]=i[_]}return a&&a.length!=h&&(a.length=h),a}const Kc=fi();class Wd extends bt{constructor(){super(),this.extent_=qn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ad((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return B()}closestPointXY(e,t,n,o){return B()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return B()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&$r(t),this.extentRevision_=this.getRevision()}return Bm(this.extent_,e)}rotate(e,t){B()}scale(e,t,n){B()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return B()}getType(){return B()}applyTransform(e){B()}intersectsExtent(e){return B()}translate(e,t){B()}transform(e,t){const n=Oe(e),o=n.getUnits()=="tile-pixels"?function(l,a,h){const f=n.getExtent(),_=n.getWorldExtent(),m=at(_)/at(f);return nr(Kc,_[0],_[3],m,-m,0,0,0),cu(l,0,l.length,h,Kc,a),jr(n,t)(l,a,h)}:jr(n,t);return this.applyTransform(o),this}}class yi extends Wd{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return B()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Vc(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){B()}setLayout(e,t,n){let o;if(e)o=Vc(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}o=t.length,e=vi(o)}this.layout=e,this.stride=o}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const o=this.getStride();p_(n,0,n.length,o,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Zn(this.getExtent()));const o=this.getFlatCoordinates();if(o){const l=this.getStride();y_(o,0,o.length,l,e,t,n,o),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const o=this.getStride();v_(n,0,n.length,o,e,t,n),this.changed()}}}function vi(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Vc(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function m1(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const o=i.getStride();return cu(n,0,n.length,o,e,t)}function Zc(i,e,t,n,o,l,a){const h=i[e],f=i[e+1],_=i[t]-h,m=i[t+1]-f;let p;if(_===0&&m===0)p=e;else{const v=((o-h)*_+(l-f)*m)/(_*_+m*m);if(v>1)p=t;else if(v>0){for(let w=0;w<n;++w)a[w]=ba(i[e+w],i[t+w],v);a.length=n;return}else p=e}for(let v=0;v<n;++v)a[v]=i[p+v];a.length=n}function du(i,e,t,n,o){let l=i[e],a=i[e+1];for(e+=n;e<t;e+=n){const h=i[e],f=i[e+1],_=di(l,a,h,f);_>o&&(o=_),l=h,a=f}return o}function fu(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l){const h=t[l];o=du(i,e,h,n,o),e=h}return o}function E_(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l){const h=t[l];o=fu(i,e,h,n,o),e=h[h.length-1]}return o}function gu(i,e,t,n,o,l,a,h,f,_,m){if(e==t)return _;let p,v;if(o===0){if(v=di(a,h,i[e],i[e+1]),v<_){for(p=0;p<n;++p)f[p]=i[e+p];return f.length=n,v}return _}m=m||[NaN,NaN];let w=e+n;for(;w<t;)if(Zc(i,w-n,w,n,a,h,m),v=di(a,h,m[0],m[1]),v<_){for(_=v,p=0;p<n;++p)f[p]=m[p];f.length=n,w+=n}else w+=n*Math.max((Math.sqrt(v)-Math.sqrt(_))/o|0,1);if(l&&(Zc(i,t-n,e,n,a,h,m),v=di(a,h,m[0],m[1]),v<_)){for(_=v,p=0;p<n;++p)f[p]=m[p];f.length=n}return _}function mu(i,e,t,n,o,l,a,h,f,_,m){m=m||[NaN,NaN];for(let p=0,v=t.length;p<v;++p){const w=t[p];_=gu(i,e,w,n,o,l,a,h,f,_,m),e=w}return _}function w_(i,e,t,n,o,l,a,h,f,_,m){m=m||[NaN,NaN];for(let p=0,v=t.length;p<v;++p){const w=t[p];_=mu(i,e,w,n,o,l,a,h,f,_,m),e=w[w.length-1]}return _}function C_(i,e,t,n){for(let o=0,l=t.length;o<l;++o)i[e++]=t[o];return e}function Uo(i,e,t,n){for(let o=0,l=t.length;o<l;++o){const a=t[o];for(let h=0;h<n;++h)i[e++]=a[h]}return e}function ts(i,e,t,n,o){o=o||[];let l=0;for(let a=0,h=t.length;a<h;++a){const f=Uo(i,e,t[a],n);o[l++]=f,e=f}return o.length=l,o}function Yd(i,e,t,n,o){o=o||[];let l=0;for(let a=0,h=t.length;a<h;++a){const f=ts(i,e,t[a],n,o[l]);f.length===0&&(f[0]=e),o[l++]=f,e=f[f.length-1]}return o.length=l,o}function jo(i,e,t,n,o,l,a){const h=(t-e)/n;if(h<3){for(;e<t;e+=n)l[a++]=i[e],l[a++]=i[e+1];return a}const f=new Array(h);f[0]=1,f[h-1]=1;const _=[e,t-n];let m=0;for(;_.length>0;){const p=_.pop(),v=_.pop();let w=0;const E=i[v],R=i[v+1],P=i[p],L=i[p+1];for(let A=v+n;A<p;A+=n){const D=i[A],N=i[A+1],F=Lm(D,N,E,R,P,L);F>w&&(m=A,w=F)}w>o&&(f[(m-e)/n]=1,v+n<m&&_.push(v,m),m+n<p&&_.push(m,p))}for(let p=0;p<h;++p)f[p]&&(l[a++]=i[e+p*n],l[a++]=i[e+p*n+1]);return a}function Kd(i,e,t,n,o,l,a,h){for(let f=0,_=t.length;f<_;++f){const m=t[f];a=jo(i,e,m,n,o,l,a),h.push(a),e=m}return a}function Xi(i,e){return e*Math.round(i/e)}function x_(i,e,t,n,o,l,a){if(e==t)return a;let h=Xi(i[e],o),f=Xi(i[e+1],o);e+=n,l[a++]=h,l[a++]=f;let _,m;do if(_=Xi(i[e],o),m=Xi(i[e+1],o),e+=n,e==t)return l[a++]=_,l[a++]=m,a;while(_==h&&m==f);for(;e<t;){const p=Xi(i[e],o),v=Xi(i[e+1],o);if(e+=n,p==_&&v==m)continue;const w=_-h,E=m-f,R=p-h,P=v-f;if(w*P==E*R&&(w<0&&R<w||w==R||w>0&&R>w)&&(E<0&&P<E||E==P||E>0&&P>E)){_=p,m=v;continue}l[a++]=_,l[a++]=m,h=_,f=m,_=p,m=v}return l[a++]=_,l[a++]=m,a}function _u(i,e,t,n,o,l,a,h){for(let f=0,_=t.length;f<_;++f){const m=t[f];a=x_(i,e,m,n,o,l,a),h.push(a),e=m}return a}function R_(i,e,t,n,o,l,a,h){for(let f=0,_=t.length;f<_;++f){const m=t[f],p=[];a=_u(i,e,m,n,o,l,a,p),h.push(p),e=m[m.length-1]}return a}function Wo(i,e,t,n,o){o=o!==void 0?o:[];let l=0;for(let a=e;a<t;a+=n)o[l++]=i.slice(a,a+n);return o.length=l,o}function pu(i,e,t,n,o){o=o!==void 0?o:[];let l=0;for(let a=0,h=t.length;a<h;++a){const f=t[a];o[l++]=Wo(i,e,f,n,o[l]),e=f}return o.length=l,o}function I_(i,e,t,n,o){o=o!==void 0?o:[];let l=0;for(let a=0,h=t.length;a<h;++a){const f=t[a];o[l++]=f.length===1&&f[0]===e?[]:pu(i,e,f,n,o[l]),e=f[f.length-1]}return o.length=l,o}function Vd(i,e,t,n){let o=0;const l=i[t-n],a=i[t-n+1];let h=0,f=0;for(;e<t;e+=n){const _=i[e]-l,m=i[e+1]-a;o+=f*_-h*m,h=_,f=m}return o/2}function Zd(i,e,t,n){let o=0;for(let l=0,a=t.length;l<a;++l){const h=t[l];o+=Vd(i,e,h,n),e=h}return o}function T_(i,e,t,n){let o=0;for(let l=0,a=t.length;l<a;++l){const h=t[l];o+=Zd(i,e,h,n),e=h[h.length-1]}return o}class Wr extends yi{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Wr(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,o){return o<_i(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,o))}getArea(){return Vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=jo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Wr(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Uo(this.flatCoordinates,0,e,this.stride),this.changed()}}class ir extends yi{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ir(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,o){const l=this.flatCoordinates,a=di(e,t,l[0],l[1]);if(a<o){const h=this.stride;for(let f=0;f<h;++f)n[f]=l[f];return n.length=h,a}return o}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Nd(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return tu(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=C_(this.flatCoordinates,0,e,this.stride),this.changed()}}function S_(i,e,t,n,o){return!zd(o,function(a){return!ci(i,e,t,n,a[0],a[1])})}function ci(i,e,t,n,o,l){let a=0,h=i[t-n],f=i[t-n+1];for(;e<t;e+=n){const _=i[e],m=i[e+1];f<=l?m>l&&(_-h)*(l-f)-(o-h)*(m-f)>0&&a++:m<=l&&(_-h)*(l-f)-(o-h)*(m-f)<0&&a--,h=_,f=m}return a!==0}function yu(i,e,t,n,o,l){if(t.length===0||!ci(i,e,t[0],n,o,l))return!1;for(let a=1,h=t.length;a<h;++a)if(ci(i,t[a-1],t[a],n,o,l))return!1;return!0}function P_(i,e,t,n,o,l){if(t.length===0)return!1;for(let a=0,h=t.length;a<h;++a){const f=t[a];if(yu(i,e,f,n,o,l))return!0;e=f[f.length-1]}return!1}function vu(i,e,t,n,o,l,a){let h,f,_,m,p,v,w;const E=o[l+1],R=[];for(let A=0,D=t.length;A<D;++A){const N=t[A];for(m=i[N-n],v=i[N-n+1],h=e;h<N;h+=n)p=i[h],w=i[h+1],(E<=v&&w<=E||v<=E&&E<=w)&&(_=(E-v)/(w-v)*(p-m)+m,R.push(_)),m=p,v=w}let P=NaN,L=-1/0;for(R.sort(qr),m=R[0],h=1,f=R.length;h<f;++h){p=R[h];const A=Math.abs(p-m);A>L&&(_=(m+p)/2,yu(i,e,t,n,_,E)&&(P=_,L=A)),m=p}return isNaN(P)&&(P=o[l]),a?(a.push(P,E,L),a):[P,E,L]}function Bd(i,e,t,n,o){let l=[];for(let a=0,h=t.length;a<h;++a){const f=t[a];l=vu(i,e,f,n,o,2*a,l),e=f[f.length-1]}return l}function Hd(i,e,t,n,o){let l;for(e+=n;e<t;e+=n)if(l=o(i.slice(e-n,e),i.slice(e,e+n)),l)return l;return!1}function Yo(i,e,t,n,o){const l=kd(qn(),i,e,t,n);return es(o,l)?eu(o,l)||l[0]>=o[0]&&l[2]<=o[2]||l[1]>=o[1]&&l[3]<=o[3]?!0:Hd(i,e,t,n,function(a,h){return Hm(o,a,h)}):!1}function M_(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l){if(Yo(i,e,t[l],n,o))return!0;e=t[l]}return!1}function qd(i,e,t,n,o){return!!(Yo(i,e,t,n,o)||ci(i,e,t,n,o[0],o[1])||ci(i,e,t,n,o[0],o[3])||ci(i,e,t,n,o[2],o[1])||ci(i,e,t,n,o[2],o[3]))}function bd(i,e,t,n,o){if(!qd(i,e,t[0],n,o))return!1;if(t.length===1)return!0;for(let l=1,a=t.length;l<a;++l)if(S_(i,t[l-1],t[l],n,o)&&!Yo(i,t[l-1],t[l],n,o))return!1;return!0}function A_(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l){const h=t[l];if(bd(i,e,h,n,o))return!0;e=h[h.length-1]}return!1}function L_(i,e,t,n){for(;e<t-n;){for(let o=0;o<n;++o){const l=i[e+o];i[e+o]=i[t-n+o],i[t-n+o]=l}e+=n,t-=n}}function Eu(i,e,t,n){let o=0,l=i[t-n],a=i[t-n+1];for(;e<t;e+=n){const h=i[e],f=i[e+1];o+=(h-l)*(f+a),l=h,a=f}return o===0?void 0:o>0}function wu(i,e,t,n,o){o=o!==void 0?o:!1;for(let l=0,a=t.length;l<a;++l){const h=t[l],f=Eu(i,e,h,n);if(l===0){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;e=h}return!0}function Qd(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l){const h=t[l];if(!wu(i,e,h,n,o))return!1;h.length&&(e=h[h.length-1])}return!0}function vo(i,e,t,n,o){o=o!==void 0?o:!1;for(let l=0,a=t.length;l<a;++l){const h=t[l],f=Eu(i,e,h,n);(l===0?o&&f||!o&&!f:o&&!f||!o&&f)&&L_(i,e,h,n),e=h}return e}function Ga(i,e,t,n,o){for(let l=0,a=t.length;l<a;++l)e=vo(i,e,t[l],n,o);return e}function F_(i,e){const t=[];let n=0,o=0,l;for(let a=0,h=e.length;a<h;++a){const f=e[a],_=Eu(i,n,f,2);if(l===void 0&&(l=_),_===l)t.push(e.slice(o,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[o])}o=a+1,n=f}return t}class Bn extends yi{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?mn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Bn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,o){return o<_i(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,o))}containsXY(e,t){return yu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Zd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),vo(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,pu(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Zn(this.getExtent());this.flatInteriorPoint_=vu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ir(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Wr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,o=[];let l=0;for(let a=0,h=n.length;a<h;++a){const f=n[a],_=new Wr(t.slice(l,f),e);o.push(_),l=f}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;wu(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=vo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=_u(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Bn(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return bd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ts(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Bc(i){if(Xo(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],o=i[3],l=[e,t,e,o,n,o,n,t,e,t];return new Bn(l,"XY",[l.length])}const pa=0;class cn extends bt{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ou(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&t_(),e.center&&(e.center=xn(e.center,this.projection_)),e.extent&&(e.extent=hi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const h in Zt)delete t[h];this.setProperties(t,!0);const n=N_(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const o=O_(e),l=n.constraint,a=D_(e);this.constraints_={center:o,resolution:l,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const o=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),a=l/2*(o[3]-t[3]+t[1]-o[1]),h=l/2*(o[0]-t[0]+t[2]-o[2]);this.setCenterInternal([n[0]+a,n[1]-h])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let o=arguments[n];o.center&&(o=Object.assign({},o),o.center=xn(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=xn(o.anchor,this.getProjection())),t[n]=o}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let o=0;for(;o<t&&!this.isDef();++o){const m=arguments[o];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(o===t){n&&ro(n,!0);return}let l=Date.now(),a=this.targetCenter_.slice(),h=this.targetResolution_,f=this.targetRotation_;const _=[];for(;o<t;++o){const m=arguments[o],p={start:l,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||f_,callback:n};if(m.center&&(p.sourceCenter=a,p.targetCenter=m.center.slice(),a=p.targetCenter),m.zoom!==void 0?(p.sourceResolution=h,p.targetResolution=this.getResolutionForZoom(m.zoom),h=p.targetResolution):m.resolution&&(p.sourceResolution=h,p.targetResolution=m.resolution,h=p.targetResolution),m.rotation!==void 0){p.sourceRotation=f;const v=Qi(m.rotation-f+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=f+v,f=p.targetRotation}k_(p)?p.complete=!0:l+=p.duration,_.push(p)}this.animations_.push(_),this.setHint(kt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[kt.ANIMATING]>0}getInteracting(){return this.hints_[kt.INTERACTING]>0}cancelAnimations(){this.setHint(kt.ANIMATING,-this.hints_[kt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const o=this.animations_[t];if(o[0].callback&&ro(o[0].callback,!1),!e)for(let l=0,a=o.length;l<a;++l){const h=o[l];if(!h.complete){e=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const o=this.animations_[n];let l=!0;for(let a=0,h=o.length;a<h;++a){const f=o[a];if(f.complete)continue;const _=e-f.start;let m=f.duration>0?_/f.duration:1;m>=1?(f.complete=!0,m=1):l=!1;const p=f.easing(m);if(f.sourceCenter){const v=f.sourceCenter[0],w=f.sourceCenter[1],E=f.targetCenter[0],R=f.targetCenter[1];this.nextCenter_=f.targetCenter;const P=v+p*(E-v),L=w+p*(R-w);this.targetCenter_=[P,L]}if(f.sourceResolution&&f.targetResolution){const v=p===1?f.targetResolution:f.sourceResolution+p*(f.targetResolution-f.sourceResolution);if(f.anchor){const w=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(v,0,w,!0);this.targetCenter_=this.calculateCenterZoom(E,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const v=p===1?Qi(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+p*(f.targetRotation-f.sourceRotation);if(f.anchor){const w=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(w,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(l){this.animations_[n]=null,this.setHint(kt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=o[0].callback;a&&ro(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const o=this.getCenterInternal();return o!==void 0&&(n=[o[0]-t[0],o[1]-t[1]],ru(n,e-this.getRotation()),bm(n,t)),n}calculateCenterZoom(e,t){let n;const o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){const a=t[0]-e*(t[0]-o[0])/l,h=t[1]-e*(t[1]-o[1])/l;n=[a,h]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],o=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(o*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&za(e,this.getProjection())}getCenterInternal(){return this.get(Zt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return o_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ae(t,"The view center is not defined");const n=this.getResolution();ae(n!==void 0,"The view resolution is not defined");const o=this.getRotation();return ae(o!==void 0,"The view rotation is not defined"),Da(t,n,o,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Zt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(hi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=pe(e)/t[0],o=at(e)/t[1];return Math.max(n,o)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*o)}}getRotation(){return this.get(Zt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(n/o)/t;return function(a){return Math.log(n/a)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let o=this.getCenterInternal();const l=this.padding_;if(l){const a=this.getViewportSizeMinusPadding_();o=ya(o,this.getViewportSize_(),[a[0]/2+l[3],a[1]/2+l[0]],t,n)}return{center:o.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,o;if(this.resolutions_){const l=qa(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=n/this.resolutions_[l+1]}else n=this.maxResolution_,o=this.zoomFactor_;return t+Math.log(n/e)/Math.log(o)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Fe(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Fe(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(ae(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ae(!Xo(e),"Cannot fit empty extent provided as `geometry`");const o=hi(e,this.getProjection());n=Bc(o)}else if(e.getType()==="Circle"){const o=hi(e.getExtent(),this.getProjection());n=Bc(o),n.rotate(this.getRotation(),Zn(o))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),o=Math.sin(-t),l=e.getFlatCoordinates(),a=e.getStride();let h=1/0,f=1/0,_=-1/0,m=-1/0;for(let p=0,v=l.length;p<v;p+=a){const w=l[p]*n-l[p+1]*o,E=l[p]*o+l[p+1]*n;h=Math.min(h,w),f=Math.min(f,E),_=Math.max(_,w),m=Math.max(m,E)}return[h,f,_,m]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const o=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const h=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(h,[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);f=isNaN(f)?a:Math.max(f,a),f=this.getConstrainedResolution(f,l?0:1);const _=this.getRotation(),m=Math.sin(_),p=Math.cos(_),v=Zn(h);v[0]+=(o[1]-o[3])/2*f,v[1]+=(o[0]-o[2])/2*f;const w=v[0]*p-v[1]*m,E=v[1]*p+v[0]*m,R=this.getConstrainedCenter([w,E],f),P=t.callback?t.callback:er;t.duration!==void 0?this.animateInternal({resolution:f,center:R,duration:t.duration,easing:t.easing},P):(this.targetResolution_=f,this.targetCenter_=R,this.applyTargetState_(!1,!0),ro(P,!0))}centerOn(e,t,n){this.centerOnInternal(xn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(ya(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,o){let l;const a=this.padding_;if(a&&e){const h=this.getViewportSizeMinusPadding_(-n),f=ya(e,o,[h[0]/2+a[3],h[1]/2+a[0]],t,n);l=[e[0]-f[0],e[1]-f[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=za(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&xn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,o,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=xn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(o,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&xn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,o=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,0,l,n),h=this.constraints_.center(this.targetCenter_,a,l,n,this.calculateCenterShift(this.targetCenter_,a,o,l));this.get(Zt.ROTATION)!==o&&this.set(Zt.ROTATION,o),this.get(Zt.RESOLUTION)!==a&&(this.set(Zt.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Zt.CENTER)||!yo(this.get(Zt.CENTER),h))&&this.set(Zt.CENTER,h),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const o=t||0,l=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(l),h=this.constraints_.resolution(this.targetResolution_,o,a),f=this.constraints_.center(this.targetCenter_,h,a,!1,this.calculateCenterShift(this.targetCenter_,h,l,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=l,this.targetCenter_=f,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==l||!this.getCenterInternal()||!yo(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:f,resolution:h,duration:e,easing:or,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(kt.INTERACTING,1)}endInteraction(e,t,n){n=n&&xn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(kt.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function ro(i,e){setTimeout(function(){i(e)},0)}function O_(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Uc(i.extent,i.constrainOnlyCenter,t)}const e=ou(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Uc(t,!1,!1)}return a_}function N_(i){let e,t,n,a=i.minZoom!==void 0?i.minZoom:pa,h=i.maxZoom!==void 0?i.maxZoom:28;const f=i.zoomFactor!==void 0?i.zoomFactor:2,_=i.multiWorld!==void 0?i.multiWorld:!1,m=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,p=i.showFullExtent!==void 0?i.showFullExtent:!1,v=ou(i.projection,"EPSG:3857"),w=v.getExtent();let E=i.constrainOnlyCenter,R=i.extent;if(!_&&!R&&v.isGlobal()&&(E=!1,R=w),i.resolutions!==void 0){const P=i.resolutions;t=P[a],n=P[h]!==void 0?P[h]:P[P.length-1],i.constrainResolution?e=u_(P,m,!E&&R,p):e=jc(t,n,m,!E&&R,p)}else{const L=(w?Math.max(pe(w),at(w)):360*Ja.degrees/v.getMetersPerUnit())/Qa/Math.pow(2,pa),A=L/Math.pow(2,28-pa);t=i.maxResolution,t!==void 0?a=0:t=L/Math.pow(f,a),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(f,h):n=L/Math.pow(f,h):n=A),h=a+Math.floor(Math.log(t/n)/Math.log(f)),n=t/Math.pow(f,h-a),i.constrainResolution?e=h_(f,t,n,m,!E&&R,p):e=jc(t,n,m,!E&&R,p)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:f}}function D_(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?d_():t===!1?Wc:typeof t=="number"?c_(t):Wc}return hu}function k_(i){return!(i.sourceCenter&&i.targetCenter&&!yo(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function ya(i,e,t,n,o){const l=Math.cos(-o);let a=Math.sin(-o),h=i[0]*l-i[1]*a,f=i[1]*l+i[0]*a;h+=(e[0]/2-t[0])*n,f+=(t[1]-e[1]/2)*n,a=-a;const _=h*l-f*a,m=f*l+h*a;return[_,m]}class Ko extends Fd{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(he.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(he.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ce(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ne(e,H.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof cn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let o;t.layerStatesArray?o=t.layerStatesArray.find(a=>a.layer===this):o=this.getLayerState();const l=this.getExtent();return Cu(o,t.viewState)&&(!l||es(l,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const n=e instanceof cn?e.getViewStateAndExtent():e;let o=t(n);return Array.isArray(o)||(o=[o]),o}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(he.MAP,e)}getMapInternal(){return this.get(he.MAP)}setMap(e){this.mapPrecomposeKey_&&(ce(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ce(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ne(e,dn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=ne(this,H.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);ae(!t.some(o=>o.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(he.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Cu(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}function Jd(i,e,t=0,n=i.length-1,o=z_){for(;n>t;){if(n-t>600){const f=n-t+1,_=e-t+1,m=Math.log(f),p=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*p*(f-p)/f)*(_-f/2<0?-1:1),w=Math.max(t,Math.floor(e-_*p/f+v)),E=Math.min(n,Math.floor(e+(f-_)*p/f+v));Jd(i,e,w,E,o)}const l=i[e];let a=t,h=n;for(Pr(i,t,e),o(i[n],l)>0&&Pr(i,t,n);a<h;){for(Pr(i,a,h),a++,h--;o(i[a],l)<0;)a++;for(;o(i[h],l)>0;)h--}o(i[t],l)===0?Pr(i,t,h):(h++,Pr(i,h,n)),h<=e&&(t=h+1),e<=h&&(n=h-1)}}function Pr(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function z_(i,e){return i<e?-1:i>e?1:0}let $d=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!oo(e,t))return n;const o=this.toBBox,l=[];for(;t;){for(let a=0;a<t.children.length;a++){const h=t.children[a],f=t.leaf?o(h):h;oo(e,f)&&(t.leaf?n.push(h):Ea(e,f)?this._all(h,n):l.push(h))}t=l.pop()}return n}collides(e){let t=this.data;if(!oo(e,t))return!1;const n=[];for(;t;){for(let o=0;o<t.children.length;o++){const l=t.children[o],a=t.leaf?this.toBBox(l):l;if(oo(e,a)){if(t.leaf||Ea(e,a))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Zi([]),this}remove(e,t){if(!e)return this;let n=this.data;const o=this.toBBox(e),l=[],a=[];let h,f,_;for(;n||l.length;){if(n||(n=l.pop(),f=l[l.length-1],h=a.pop(),_=!0),n.leaf){const m=G_(e,n.children,t);if(m!==-1)return n.children.splice(m,1),l.push(n),this._condense(l),this}!_&&!n.leaf&&Ea(n,o)?(l.push(n),a.push(h),h=0,f=n,n=n.children[0]):f?(h++,n=f.children[h],_=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,o){const l=n-t+1;let a=this._maxEntries,h;if(l<=a)return h=Zi(e.slice(t,n+1)),Ui(h,this.toBBox),h;o||(o=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,o-1))),h=Zi([]),h.leaf=!1,h.height=o;const f=Math.ceil(l/a),_=f*Math.ceil(Math.sqrt(a));Hc(e,t,n,_,this.compareMinX);for(let m=t;m<=n;m+=_){const p=Math.min(m+_-1,n);Hc(e,m,p,f,this.compareMinY);for(let v=m;v<=p;v+=f){const w=Math.min(v+f-1,p);h.children.push(this._build(e,v,w,o-1))}}return Ui(h,this.toBBox),h}_chooseSubtree(e,t,n,o){for(;o.push(t),!(t.leaf||o.length-1===n);){let l=1/0,a=1/0,h;for(let f=0;f<t.children.length;f++){const _=t.children[f],m=va(_),p=j_(e,_)-m;p<a?(a=p,l=m<l?m:l,h=_):p===a&&m<l&&(l=m,h=_)}t=h||t.children[0]}return t}_insert(e,t,n){const o=n?e:this.toBBox(e),l=[],a=this._chooseSubtree(o,this.data,t,l);for(a.children.push(e),Or(a,o);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(o,l,t)}_split(e,t){const n=e[t],o=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,o);const a=this._chooseSplitIndex(n,l,o),h=Zi(n.children.splice(a,n.children.length-a));h.height=n.height,h.leaf=n.leaf,Ui(n,this.toBBox),Ui(h,this.toBBox),t?e[t-1].children.push(h):this._splitRoot(n,h)}_splitRoot(e,t){this.data=Zi([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ui(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let o,l=1/0,a=1/0;for(let h=t;h<=n-t;h++){const f=Fr(e,0,h,this.toBBox),_=Fr(e,h,n,this.toBBox),m=W_(f,_),p=va(f)+va(_);m<l?(l=m,o=h,a=p<a?p:a):m===l&&p<a&&(a=p,o=h)}return o||n-t}_chooseSplitAxis(e,t,n){const o=e.leaf?this.compareMinX:X_,l=e.leaf?this.compareMinY:U_,a=this._allDistMargin(e,t,n,o),h=this._allDistMargin(e,t,n,l);a<h&&e.children.sort(o)}_allDistMargin(e,t,n,o){e.children.sort(o);const l=this.toBBox,a=Fr(e,0,t,l),h=Fr(e,n-t,n,l);let f=so(a)+so(h);for(let _=t;_<n-t;_++){const m=e.children[_];Or(a,e.leaf?l(m):m),f+=so(a)}for(let _=n-t-1;_>=t;_--){const m=e.children[_];Or(h,e.leaf?l(m):m),f+=so(h)}return f}_adjustParentBBoxes(e,t,n){for(let o=n;o>=0;o--)Or(t[o],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Ui(e[t],this.toBBox)}};function G_(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function Ui(i,e){Fr(i,0,i.children.length,e,i)}function Fr(i,e,t,n,o){o||(o=Zi(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let l=e;l<t;l++){const a=i.children[l];Or(o,i.leaf?n(a):a)}return o}function Or(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function X_(i,e){return i.minX-e.minX}function U_(i,e){return i.minY-e.minY}function va(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function so(i){return i.maxX-i.minX+(i.maxY-i.minY)}function j_(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function W_(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),o=Math.min(i.maxX,e.maxX),l=Math.min(i.maxY,e.maxY);return Math.max(0,o-t)*Math.max(0,l-n)}function Ea(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function oo(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Zi(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hc(i,e,t,n,o){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;Jd(i,a,e,t,o),l.push(e,a,a,t)}}const ie={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function qc(i){return i[0]>0&&i[1]>0}function Y_(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Ct(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class Vo{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ct(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vo({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return B()}getImage(e){return B()}getHitDetectionImage(){return B()}getPixelRatio(e){return 1}getImageState(){return B()}getImageSize(){return B()}getOrigin(){return B()}getSize(){return B()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ct(e)}listenImageChange(e){B()}load(){B()}unlistenImageChange(e){B()}ready(){return Promise.resolve()}}const Yr={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Ze={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Ze.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Ze.max=Ze.whitepoint[2].D65;Ze.rgb=function(i,e){e=e||Ze.whitepoint[2].E;var t=i[0]/e[0],n=i[1]/e[1],o=i[2]/e[2],l,a,h;return l=t*3.240969941904521+n*-1.537383177570093+o*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+o*.041555057407175,h=t*.055630079696993+n*-.20397695888897+o*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h=h*12.92,l=Math.min(Math.max(0,l),1),a=Math.min(Math.max(0,a),1),h=Math.min(Math.max(0,h),1),[l*255,a*255,h*255]};Yr.xyz=function(i,e){var t=i[0]/255,n=i[1]/255,o=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var l=t*.41239079926595+n*.35758433938387+o*.18048078840183,a=t*.21263900587151+n*.71516867876775+o*.072192315360733,h=t*.019330818715591+n*.11919477979462+o*.95053215224966;return e=e||Ze.whitepoint[2].E,[l*e[0],a*e[1],h*e[2]]};const xu={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var n,o,l,a,h,f,_,m,p,v,w,E,R;if(l=i[0],a=i[1],h=i[2],l===0)return[0,0,0];var P=.0011070564598794539;return e=e||"D65",t=t||2,p=Ze.whitepoint[t][e][0],v=Ze.whitepoint[t][e][1],w=Ze.whitepoint[t][e][2],E=4*p/(p+15*v+3*w),R=9*v/(p+15*v+3*w),n=a/(13*l)+E||0,o=h/(13*l)+R||0,_=l>8?v*Math.pow((l+16)/116,3):v*l*P,f=_*9*n/(4*o)||0,m=_*(12-3*n-20*o)/(4*o)||0,[f,_,m]}};Ze.luv=function(i,e,t){var n,o,l,a,h,f,_,m,p,v,w,E,R,P=.008856451679035631,L=903.2962962962961;e=e||"D65",t=t||2,p=Ze.whitepoint[t][e][0],v=Ze.whitepoint[t][e][1],w=Ze.whitepoint[t][e][2],E=4*p/(p+15*v+3*w),R=9*v/(p+15*v+3*w),f=i[0],_=i[1],m=i[2],n=4*f/(f+15*_+3*m)||0,o=9*_/(f+15*_+3*m)||0;var A=_/v;return l=A<=P?L*A:116*Math.pow(A,1/3)-16,a=13*l*(n-E),h=13*l*(o-R),[l,a,h]};var ef={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],n=i[2],o,l,a;return a=n/360*2*Math.PI,o=t*Math.cos(a),l=t*Math.sin(a),[e,o,l]},xyz:function(i){return xu.xyz(ef.luv(i))}};xu.lchuv=function(i){var e=i[0],t=i[1],n=i[2],o=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),a=l*360/2/Math.PI;return a<0&&(a+=360),[e,o,a]};Ze.lchuv=function(i){return xu.lchuv(Ze.luv(i))};const bc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Qc={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function K_(i){var e,t=[],n=1,o;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),bc[i])t=bc[i].slice(),o="rgb";else if(i==="transparent")n=0,o="rgb",t=[0,0,0];else if(i[0]==="#"){var l=i.slice(1),a=l.length,h=a<=4;n=1,h?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],a===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],a===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var f=e[1];o=f.replace(/a$/,"");var _=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),o==="color"&&(o=t.shift()),t=t.map(function(m,p){if(m[m.length-1]==="%")return m=parseFloat(m)/100,p===3?m:o==="rgb"?m*255:o[0]==="h"||o[0]==="l"&&!p?m*100:o==="lab"?m*125:o==="lch"?p<2?m*150:m*360:o[0]==="o"&&!p?m:o==="oklab"?m*.4:o==="oklch"?p<2?m*.4:m*360:m;if(o[p]==="h"||p===2&&o[o.length-1]==="h"){if(Qc[m]!==void 0)return Qc[m];if(m.endsWith("deg"))return parseFloat(m);if(m.endsWith("turn"))return parseFloat(m)*360;if(m.endsWith("grad"))return parseFloat(m)*360/400;if(m.endsWith("rad"))return parseFloat(m)*180/Math.PI}return m==="none"?0:parseFloat(m)}),n=t.length>_?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(m){return parseFloat(m)}),o=i.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:o,values:t,alpha:n}}const wa={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,n=i[2]/100,o,l,a,h,f,_=0;if(t===0)return f=n*255,[f,f,f];for(l=n<.5?n*(1+t):n+t-n*t,o=2*n-l,h=[0,0,0];_<3;)a=e+1/3*-(_-1),a<0?a++:a>1&&a--,f=6*a<1?o+(l-o)*6*a:2*a<1?l:3*a<2?o+(l-o)*(2/3-a)*6:o,h[_++]=f*255;return h}};Yr.hsl=function(i){var e=i[0]/255,t=i[1]/255,n=i[2]/255,o=Math.min(e,t,n),l=Math.max(e,t,n),a=l-o,h,f,_;return l===o?h=0:e===l?h=(t-n)/a:t===l?h=2+(n-e)/a:n===l&&(h=4+(e-t)/a),h=Math.min(h*60,360),h<0&&(h+=360),_=(o+l)/2,l===o?f=0:_<=.5?f=a/(l+o):f=a/(2-l-o),[h,f*100,_*100]};function V_(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=K_(i);if(!t.space)return[];const n=t.space[0]==="h"?wa.min:Yr.min,o=t.space[0]==="h"?wa.max:Yr.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),o[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),o[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),o[2]),t.space[0]==="h"&&(e=wa.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Ru=[NaN,NaN,NaN,0];function Z_(i){return typeof i=="string"?i:Tu(i)}const B_=1024,Mr={};let Ca=0;function H_(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function Jc(i){const e=Ze.lchuv(Yr.xyz(i));return e[3]=i[3],e}function q_(i){const e=Ze.rgb(ef.xyz(i));return e[3]=i[3],e}function Iu(i){if(i==="none")return Ru;if(Mr.hasOwnProperty(i))return Mr[i];if(Ca>=B_){let t=0;for(const n in Mr)t++&3||(delete Mr[n],--Ca)}const e=V_(i);if(e.length!==4)throw new Error('failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+i+'" as color');return tf(e),Mr[i]=e,++Ca,e}function Kr(i){return Array.isArray(i)?i:Iu(i)}function tf(i){return i[0]=Fe(i[0]+.5|0,0,255),i[1]=Fe(i[1]+.5|0,0,255),i[2]=Fe(i[2]+.5|0,0,255),i[3]=Fe(i[3],0,1),i}function Tu(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const o=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+o+")"}const Hn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",b_=Hn.includes("firefox"),Q_=Hn.includes("safari")&&!Hn.includes("chrom");Q_&&(Hn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Hn));const J_=Hn.includes("webkit")&&!Hn.includes("edge"),nf=Hn.includes("macintosh"),rf=typeof devicePixelRatio<"u"?devicePixelRatio:1,sf=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,of=typeof Image<"u"&&Image.prototype.decode,lf=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function He(i,e,t,n){let o;return t&&t.length?o=t.shift():sf?o=new OffscreenCanvas(i||300,e||300):o=document.createElement("canvas"),i&&(o.width=i),e&&(o.height=e),o.getContext("2d",n)}let xa;function Eo(){return xa||(xa=He(1,1)),xa}function Vr(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function $_(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function ep(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function $c(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function af(i){for(;i.lastChild;)i.lastChild.remove()}function tp(i,e){const t=i.childNodes;for(let n=0;;++n){const o=t[n],l=e[n];if(!o&&!l)break;if(o!==l){if(!o){i.appendChild(l);continue}if(!l){i.removeChild(o),--n;continue}i.insertBefore(l,o)}}}function np(i,e,t){const n=i;let o=!0,l=!1,a=!1;const h=[_o(n,H.LOAD,function(){a=!0,l||e()})];return n.src&&of?(l=!0,n.decode().then(function(){o&&e()}).catch(function(f){o&&(a?e():t())})):h.push(_o(n,H.ERROR,t)),function(){o=!1,h.forEach(ce)}}function ip(i,e){return new Promise((t,n)=>{function o(){a(),t(i)}function l(){a(),n(new Error("Image load error"))}function a(){i.removeEventListener("load",o),i.removeEventListener("error",l)}i.addEventListener("load",o),i.addEventListener("error",l)})}function rp(i,e){return e&&(i.src=e),i.src&&of?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(o=>i.complete&&i.width?t(i):n(o))):ip(i)}class sp{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const o=Ra(e,t,n);return o in this.cache_?this.cache_[o]:null}getPattern(e,t,n){const o=Ra(e,t,n);return o in this.patternCache_?this.patternCache_[o]:null}set(e,t,n,o,l){const a=Ra(e,t,n),h=a in this.cache_;this.cache_[a]=o,l&&(o.getImageState()===ie.IDLE&&o.load(),o.getImageState()===ie.LOADING?o.ready().then(()=>{this.patternCache_[a]=Eo().createPattern(o.getImage(1),"repeat")}):this.patternCache_[a]=Eo().createPattern(o.getImage(1),"repeat")),h||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Ra(i,e,t){const n=t?Kr(t):"null";return e+":"+i+":"+n}const fn=new sp;let Ar=null;class op extends Do{constructor(e,t,n,o,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=o===void 0?ie.IDLE:o,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ie.LOADED){Ar||(Ar=He(1,1,void 0,{willReadFrequently:!0})),Ar.drawImage(this.image_,0,0);try{Ar.getImageData(0,0,1,1),this.tainted_=!1}catch{Ar=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(H.CHANGE)}handleImageError_(){this.imageState_=ie.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ie.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=He(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ie.IDLE){this.image_||this.initializeImage_(),this.imageState_=ie.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&rp(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ie.LOADED)return;const t=this.image_,n=He(Math.ceil(t.width*e),Math.ceil(t.height*e)),o=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Z_(this.color_),n.fillRect(0,0,o.width/e,o.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=o}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ie.LOADED||this.imageState_===ie.ERROR)e();else{const t=()=>{(this.imageState_===ie.LOADED||this.imageState_===ie.ERROR)&&(this.removeEventListener(H.CHANGE,t),e())};this.addEventListener(H.CHANGE,t)}})),this.ready_}}function Su(i,e,t,n,o,l){let a=e===void 0?void 0:fn.get(e,t,o);return a||(a=new op(i,i&&"src"in i?i.src||void 0:e,t,n,o),fn.set(e,t,o,a,l)),l&&a&&!fn.getPattern(e,t,o)&&fn.set(e,t,o,a,l),a}function ed(i){return i?Array.isArray(i)?Tu(i):typeof i=="object"&&"src"in i?lp(i):i:null}function lp(i){if(!i.offset||!i.size)return fn.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=fn.getPattern(e,void 0,i.color);if(t)return t;const n=fn.get(i.src,"anonymous",null);if(n.getImageState()!==ie.LOADED)return null;const o=He(i.size[0],i.size[1]);return o.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),Su(o.canvas,e,void 0,ie.LOADED,i.color,!0),fn.getPattern(e,void 0,i.color)}const lo="ol-hidden",ap="ol-selectable",Zo="ol-unselectable",Pu="ol-control",td="ol-collapsed",up=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),nd=["style","variant","weight","size","lineHeight","family"],uf=function(i){const e=i.match(up);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,o=nd.length;n<o;++n){const l=e[n+1];l!==void 0&&(t[nd[n]]=l)}return t.families=t.family.split(/,\s?/),t},p1="10px sans-serif",id="#000",rd="round",y1=[],v1=0,sd="round",hp=10,cp="#000",E1="center",w1="middle",C1=[0,0,0,0],dp=1,Rn=new bt;let Bi=null,Xa;const Ua={},x1=function(){const e="32px ",t=["monospace","serif"],n=t.length,o="wmytzilWMYTZIL@#/&?$%10";let l,a;function h(_,m,p){let v=!0;for(let w=0;w<n;++w){const E=t[w];if(a=wo(_+" "+m+" "+e+E,o),p!=E){const R=wo(_+" "+m+" "+e+p+","+E,o);v=v&&R!=a}}return!!v}function f(){let _=!0;const m=Rn.getKeys();for(let p=0,v=m.length;p<v;++p){const w=m[p];if(Rn.get(w)<100){const[E,R,P]=w.split(`
`);h(E,R,P)?(br(Ua),Bi=null,Xa=void 0,Rn.set(w,100)):(Rn.set(w,Rn.get(w)+1,!0),_=!1)}}_&&(clearInterval(l),l=void 0)}return function(_){const m=uf(_);if(!m)return;const p=m.families;for(let v=0,w=p.length;v<w;++v){const E=p[v],R=m.style+`
`+m.weight+`
`+E;Rn.get(R)===void 0&&(Rn.set(R,100,!0),h(m.style,m.weight,E)||(Rn.set(R,0,!0),l===void 0&&(l=setInterval(f,32))))}}}(),fp=function(){let i;return function(e){let t=Ua[e];if(t==null){if(sf){const n=uf(e),o=hf(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Ua[e]=t}return t}}();function hf(i,e){return Bi||(Bi=He(1,1)),i!=Xa&&(Bi.font=i,Xa=Bi.font),Bi.measureText(e)}function wo(i,e){return hf(i,e).width}function R1(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((o,l)=>Math.max(o,wo(i,l)),0);return t[e]=n,n}function I1(i,e){const t=[],n=[],o=[];let l=0,a=0,h=0,f=0;for(let _=0,m=e.length;_<=m;_+=2){const p=e[_];if(p===`
`||_===m){l=Math.max(l,a),o.push(a),a=0,h+=f,f=0;continue}const v=e[_+1]||i.font,w=wo(v,p);t.push(w),a+=w;const E=fp(v);n.push(E),f=Math.max(f,E)}return{width:l,height:h,widths:t,heights:n,lineWidths:o}}function T1(i,e,t,n,o,l,a,h,f,_,m){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=p=>p.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(f,_),i.scale(m[0],m[1]),gp(n,i)):m[0]<0||m[1]<0?(i.translate(f,_),i.scale(m[0],m[1]),i.drawImage(n,o,l,a,h,0,0,a,h)):i.drawImage(n,o,l,a,h,f,_,a*m[0],h*m[1]),i.restore()}function gp(i,e){const t=i.contextInstructions;for(let n=0,o=t.length;n<o;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class Bo extends Vo{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ie.LOADING:ie.LOADED,this.imageState_===ie.LOADING&&this.ready().then(()=>this.imageState_=ie.LOADED),this.render()}clone(){const e=this.getScale(),t=new Bo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,o=He(n.size*e,n.size*e);this.draw_(n,o,e),t=o.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let o=this.radius,l=this.radius2_===void 0?o:this.radius2_;if(o<l){const K=o;o=l,l=K}const a=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/a,f=l*Math.sin(h),_=Math.sqrt(l*l-f*f),m=o-_,p=Math.sqrt(f*f+m*m),v=p/f;if(e==="miter"&&v<=n)return v*t;const w=t/2/v,E=t/2*(m/p),P=Math.sqrt((o+w)*(o+w)+E*E)-o;if(this.radius2_===void 0||e==="bevel")return P*2;const L=o*Math.sin(h),A=Math.sqrt(o*o-L*L),D=l-A,F=Math.sqrt(L*L+D*D)/L;if(F<=n){const K=F*t/2-l-o;return 2*Math.max(P,K)}return P*2}createRenderOptions(){let e=rd,t=sd,n=0,o=null,l=0,a,h=0;this.stroke_&&(a=ed(this.stroke_.getColor()??cp),h=this.stroke_.getWidth()??dp,o=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??sd,e=this.stroke_.getLineCap()??rd,n=this.stroke_.getMiterLimit()??hp);const f=this.calculateLineJoinSize_(t,h,n),_=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*_+f);return{strokeStyle:a,strokeWidth:h,size:m,lineCap:e,lineDash:o,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let o=this.fill_.getColor();o===null&&(o=id),t.fillStyle=ed(o),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),o=0;typeof n=="string"&&(n=Kr(n)),n===null?o=1:Array.isArray(n)&&(o=n.length===4?n[3]:1),o===0&&(t=He(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const o=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let h=0;h<t;h++){const f=l+h*a,_=h%2===0?n:o;e.lineTo(_*Math.cos(f),_*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=id,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Ho extends Bo{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Ho({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ns{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ns({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Su(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ie.IDLE&&t.load(),t.getImageState()===ie.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class qo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new qo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class gi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=od,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new gi({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=od,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function mp(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(ae(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let Ia=null;function cf(i,e){if(!Ia){const t=new ns({color:"rgba(255,255,255,0.4)"}),n=new qo({color:"#3399CC",width:1.25});Ia=[new gi({image:new Ho({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Ia}function od(i){return i.getGeometry()}function ld(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class Mu extends Vo{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,o=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:o,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let h=e.src;ae(!(h!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(h===void 0||h.length===0)&&a&&(h=a.src||Ce(a)),ae(h!==void 0&&h.length>0,"A defined and non-empty `src` or `image` must be provided"),ae(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=ie.IDLE:a!==void 0&&("complete"in a?a.complete?f=a.src?ie.LOADED:ie.IDLE:f=ie.LOADING:f=ie.LOADED),this.color_=e.color!==void 0?Kr(e.color):null,this.iconImage_=Su(a,h,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let _,m;if(e.size)[_,m]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)_=p.width,m=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const w=this.iconImage_.getSize();this.setScale(ld(w[0],w[1],e.width,e.height))};this.listenImageChange(v);return}}_!==void 0&&this.setScale(ld(_,m,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Mu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=o[0]),this.anchorYUnits_=="fraction"&&(e[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+o[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ie.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ie.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(H.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(H.CHANGE,e)}ready(){return this.iconImage_.ready()}}const _p="#333";class Au{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Ct(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ns({color:_p}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Au({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ct(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let Ei=0;const lt=1<<Ei++,te=1<<Ei++,vt=1<<Ei++,Bt=1<<Ei++,mi=1<<Ei++,Nr=1<<Ei++,ao=Math.pow(2,Ei)-1,Lu={[lt]:"boolean",[te]:"number",[vt]:"string",[Bt]:"color",[mi]:"number[]",[Nr]:"size"},pp=Object.keys(Lu).map(Number).sort(qr);function yp(i){return i in Lu}function Dr(i){const e=[];for(const t of pp)kr(i,t)&&e.push(Lu[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function kr(i,e){return(i&e)===e}function Un(i,e){return i===e}class ze{constructor(e,t){if(!yp(e))throw new Error(`literal expressions must have a specific type, got ${Dr(e)}`);this.type=e,this.value=t}}class vp{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function df(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Be(i,e,t){switch(typeof i){case"boolean":{if(Un(e,vt))return new ze(vt,i?"true":"false");if(!kr(e,lt))throw new Error(`got a boolean, but expected ${Dr(e)}`);return new ze(lt,i)}case"number":{if(Un(e,Nr))return new ze(Nr,Ct(i));if(Un(e,lt))return new ze(lt,!!i);if(Un(e,vt))return new ze(vt,i.toString());if(!kr(e,te))throw new Error(`got a number, but expected ${Dr(e)}`);return new ze(te,i)}case"string":{if(Un(e,Bt))return new ze(Bt,Iu(i));if(Un(e,lt))return new ze(lt,!!i);if(!kr(e,vt))throw new Error(`got a string, but expected ${Dr(e)}`);return new ze(vt,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return Ap(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(Un(e,Nr)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new ze(Nr,i)}if(Un(e,Bt)){if(i.length===3)return new ze(Bt,[...i,1]);if(i.length===4)return new ze(Bt,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!kr(e,mi))throw new Error(`got an array of numbers, but expected ${Dr(e)}`);return new ze(mi,i)}const M={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Ep={[M.Get]:Z(J(1,1/0),ad),[M.Var]:Z(J(1,1),wp),[M.Has]:Z(J(1,1/0),ad),[M.Id]:Z(Cp,ji),[M.Concat]:Z(J(2,1/0),ue(vt)),[M.GeometryType]:Z(xp,ji),[M.LineMetric]:Z(ji),[M.Resolution]:Z(ji),[M.Zoom]:Z(ji),[M.Time]:Z(ji),[M.Any]:Z(J(2,1/0),ue(lt)),[M.All]:Z(J(2,1/0),ue(lt)),[M.Not]:Z(J(1,1),ue(lt)),[M.Equal]:Z(J(2,2),ue(ao)),[M.NotEqual]:Z(J(2,2),ue(ao)),[M.GreaterThan]:Z(J(2,2),ue(te)),[M.GreaterThanOrEqualTo]:Z(J(2,2),ue(te)),[M.LessThan]:Z(J(2,2),ue(te)),[M.LessThanOrEqualTo]:Z(J(2,2),ue(te)),[M.Multiply]:Z(J(2,1/0),ud),[M.Coalesce]:Z(J(2,1/0),ud),[M.Divide]:Z(J(2,2),ue(te)),[M.Add]:Z(J(2,1/0),ue(te)),[M.Subtract]:Z(J(2,2),ue(te)),[M.Clamp]:Z(J(3,3),ue(te)),[M.Mod]:Z(J(2,2),ue(te)),[M.Pow]:Z(J(2,2),ue(te)),[M.Abs]:Z(J(1,1),ue(te)),[M.Floor]:Z(J(1,1),ue(te)),[M.Ceil]:Z(J(1,1),ue(te)),[M.Round]:Z(J(1,1),ue(te)),[M.Sin]:Z(J(1,1),ue(te)),[M.Cos]:Z(J(1,1),ue(te)),[M.Atan]:Z(J(1,2),ue(te)),[M.Sqrt]:Z(J(1,1),ue(te)),[M.Match]:Z(J(4,1/0),hd,Ip),[M.Between]:Z(J(3,3),ue(te)),[M.Interpolate]:Z(J(6,1/0),hd,Tp),[M.Case]:Z(J(3,1/0),Rp,Sp),[M.In]:Z(J(2,2),Pp),[M.Number]:Z(J(1,1/0),ue(ao)),[M.String]:Z(J(1,1/0),ue(ao)),[M.Array]:Z(J(1,1/0),ue(te)),[M.Color]:Z(J(1,4),ue(te)),[M.Band]:Z(J(1,3),ue(te)),[M.Palette]:Z(J(2,2),Mp),[M.ToString]:Z(J(1,1),ue(lt|te|vt|Bt))};function ad(i,e,t){const n=i.length-1,o=new Array(n);for(let l=0;l<n;++l){const a=i[l+1];switch(typeof a){case"number":{o[l]=new ze(te,a);break}case"string":{o[l]=new ze(vt,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}l===0&&t.properties.add(String(a))}return o}function wp(i,e,t){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new ze(vt,n)]}function Cp(i,e,t){t.featureId=!0}function xp(i,e,t){t.geometryType=!0}function ji(i,e,t){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function J(i,e){return function(t,n,o){const l=t[0],a=t.length-1;if(i===e){if(a!==i){const h=i===1?"":"s";throw new Error(`expected ${i} argument${h} for ${l}, got ${a}`)}}else if(a<i||a>e){const h=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${h} arguments for ${l}, got ${a}`)}}}function ud(i,e,t){const n=i.length-1,o=new Array(n);for(let l=0;l<n;++l){const a=Be(i[l+1],e,t);o[l]=a}return o}function ue(i){return function(e,t,n){const o=e.length-1,l=new Array(o);for(let a=0;a<o;++a){const h=Be(e[a+1],i,n);l[a]=h}return l}}function Rp(i,e,t){const n=i[0],o=i.length-1;if(o%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${o} instead`)}function hd(i,e,t){const n=i[0],o=i.length-1;if(o%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${o} instead`)}function Ip(i,e,t){const n=i.length-1,o=vt|te|lt,l=Be(i[1],o,t),a=Be(i[i.length-1],e,t),h=new Array(n-2);for(let f=0;f<n-2;f+=2){try{const _=Be(i[f+2],l.type,t);h[f]=_}catch(_){throw new Error(`failed to parse argument ${f+1} of match expression: ${_.message}`)}try{const _=Be(i[f+3],a.type,t);h[f+1]=_}catch(_){throw new Error(`failed to parse argument ${f+2} of match expression: ${_.message}`)}}return[l,...h,a]}function Tp(i,e,t){const n=i[1];let o;switch(n[0]){case"linear":o=1;break;case"exponential":const f=n[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);o=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new ze(te,o);let a;try{a=Be(i[2],te,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const h=new Array(i.length-3);for(let f=0;f<h.length;f+=2){try{const _=Be(i[f+3],te,t);h[f]=_}catch(_){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${_.message}`)}try{const _=Be(i[f+4],e,t);h[f+1]=_}catch(_){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${_.message}`)}}return[l,a,...h]}function Sp(i,e,t){const n=Be(i[i.length-1],e,t),o=new Array(i.length-1);for(let l=0;l<o.length-1;l+=2){try{const a=Be(i[l+1],lt,t);o[l]=a}catch(a){throw new Error(`failed to parse argument ${l} of case expression: ${a.message}`)}try{const a=Be(i[l+2],n.type,t);o[l+1]=a}catch(a){throw new Error(`failed to parse argument ${l+1} of case expression: ${a.message}`)}}return o[o.length-1]=n,o}function Pp(i,e,t){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let o;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],o=vt}else o=te;const l=new Array(n.length);for(let h=0;h<l.length;h++)try{const f=Be(n[h],o,t);l[h]=f}catch(f){throw new Error(`failed to parse haystack item ${h} for "in" expression: ${f.message}`)}return[Be(i[1],o,t),...l]}function Mp(i,e,t){let n;try{n=Be(i[1],te,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const o=i[2];if(!Array.isArray(o))throw new Error("the second argument of palette must be an array");const l=new Array(o.length);for(let a=0;a<l.length;a++){let h;try{h=Be(o[a],Bt,t)}catch(f){throw new Error(`failed to parse color at index ${a} in palette expression: ${f.message}`)}if(!(h instanceof ze))throw new Error(`the palette color at index ${a} must be a literal value`);l[a]=h}return[n,...l]}function Z(...i){return function(e,t,n){const o=e[0];let l;for(let a=0;a<i.length;a++){const h=i[a](e,t,n);if(a==i.length-1){if(!h)throw new Error("expected last argument validator to return the parsed args");l=h}}return new vp(t,o,...l)}}function Ap(i,e,t){const n=i[0],o=Ep[n];if(!o)throw new Error(`unknown operator: ${n}`);return o(i,e,t)}function ff(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return ff(i.getGeometries()[0]);default:return""}}function gf(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Mn(i,e,t){const n=Be(i,e,t);return qt(n)}function qt(i,e){if(i instanceof ze){if(i.type===Bt&&typeof i.value=="string"){const n=Iu(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case M.Number:case M.String:case M.Coalesce:return Lp(i);case M.Get:case M.Var:case M.Has:return Fp(i);case M.Id:return n=>n.featureId;case M.GeometryType:return n=>n.geometryType;case M.Concat:{const n=i.args.map(o=>qt(o));return o=>"".concat(...n.map(l=>l(o).toString()))}case M.Resolution:return n=>n.resolution;case M.Any:case M.All:case M.Between:case M.In:case M.Not:return Np(i);case M.Equal:case M.NotEqual:case M.LessThan:case M.LessThanOrEqualTo:case M.GreaterThan:case M.GreaterThanOrEqualTo:return Op(i);case M.Multiply:case M.Divide:case M.Add:case M.Subtract:case M.Clamp:case M.Mod:case M.Pow:case M.Abs:case M.Floor:case M.Ceil:case M.Round:case M.Sin:case M.Cos:case M.Atan:case M.Sqrt:return Dp(i);case M.Case:return kp(i);case M.Match:return zp(i);case M.Interpolate:return Gp(i);case M.ToString:return Xp(i);default:throw new Error(`Unsupported operator ${t}`)}}function Lp(i,e){const t=i.operator,n=i.args.length,o=new Array(n);for(let l=0;l<n;++l)o[l]=qt(i.args[l]);switch(t){case M.Coalesce:return l=>{for(let a=0;a<n;++a){const h=o[a](l);if(typeof h<"u"&&h!==null)return h}throw new Error("Expected one of the values to be non-null")};case M.Number:case M.String:return l=>{for(let a=0;a<n;++a){const h=o[a](l);if(typeof h===t)return h}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Fp(i,e){const n=i.args[0].value;switch(i.operator){case M.Get:return o=>{const l=i.args;let a=o.properties[n];for(let h=1,f=l.length;h<f;++h){const m=l[h].value;a=a[m]}return a};case M.Var:return o=>o.variables[n];case M.Has:return o=>{const l=i.args;if(!(n in o.properties))return!1;let a=o.properties[n];for(let h=1,f=l.length;h<f;++h){const m=l[h].value;if(!a||!Object.hasOwn(a,m))return!1;a=a[m]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Op(i,e){const t=i.operator,n=qt(i.args[0]),o=qt(i.args[1]);switch(t){case M.Equal:return l=>n(l)===o(l);case M.NotEqual:return l=>n(l)!==o(l);case M.LessThan:return l=>n(l)<o(l);case M.LessThanOrEqualTo:return l=>n(l)<=o(l);case M.GreaterThan:return l=>n(l)>o(l);case M.GreaterThanOrEqualTo:return l=>n(l)>=o(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Np(i,e){const t=i.operator,n=i.args.length,o=new Array(n);for(let l=0;l<n;++l)o[l]=qt(i.args[l]);switch(t){case M.Any:return l=>{for(let a=0;a<n;++a)if(o[a](l))return!0;return!1};case M.All:return l=>{for(let a=0;a<n;++a)if(!o[a](l))return!1;return!0};case M.Between:return l=>{const a=o[0](l),h=o[1](l),f=o[2](l);return a>=h&&a<=f};case M.In:return l=>{const a=o[0](l);for(let h=1;h<n;++h)if(a===o[h](l))return!0;return!1};case M.Not:return l=>!o[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function Dp(i,e){const t=i.operator,n=i.args.length,o=new Array(n);for(let l=0;l<n;++l)o[l]=qt(i.args[l]);switch(t){case M.Multiply:return l=>{let a=1;for(let h=0;h<n;++h)a*=o[h](l);return a};case M.Divide:return l=>o[0](l)/o[1](l);case M.Add:return l=>{let a=0;for(let h=0;h<n;++h)a+=o[h](l);return a};case M.Subtract:return l=>o[0](l)-o[1](l);case M.Clamp:return l=>{const a=o[0](l),h=o[1](l);if(a<h)return h;const f=o[2](l);return a>f?f:a};case M.Mod:return l=>o[0](l)%o[1](l);case M.Pow:return l=>Math.pow(o[0](l),o[1](l));case M.Abs:return l=>Math.abs(o[0](l));case M.Floor:return l=>Math.floor(o[0](l));case M.Ceil:return l=>Math.ceil(o[0](l));case M.Round:return l=>Math.round(o[0](l));case M.Sin:return l=>Math.sin(o[0](l));case M.Cos:return l=>Math.cos(o[0](l));case M.Atan:return n===2?l=>Math.atan2(o[0](l),o[1](l)):l=>Math.atan(o[0](l));case M.Sqrt:return l=>Math.sqrt(o[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function kp(i,e){const t=i.args.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=qt(i.args[o]);return o=>{for(let l=0;l<t-1;l+=2)if(n[l](o))return n[l+1](o);return n[t-1](o)}}function zp(i,e){const t=i.args.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=qt(i.args[o]);return o=>{const l=n[0](o);for(let a=1;a<t;a+=2)if(l===n[a](o))return n[a+1](o);return n[t-1](o)}}function Gp(i,e){const t=i.args.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=qt(i.args[o]);return o=>{const l=n[0](o),a=n[1](o);let h,f;for(let _=2;_<t;_+=2){const m=n[_](o);let p=n[_+1](o);const v=Array.isArray(p);if(v&&(p=H_(p)),m>=a)return _===2?p:v?Up(l,a,h,f,m,p):zr(l,a,h,f,m,p);h=m,f=p}return f}}function Xp(i,e){const t=i.operator,n=i.args.length,o=new Array(n);for(let l=0;l<n;++l)o[l]=qt(i.args[l]);switch(t){case M.ToString:return l=>{const a=o[0](l);return i.args[0].type===Bt?Tu(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function zr(i,e,t,n,o,l){const a=o-t;if(a===0)return n;const h=e-t,f=i===1?h/a:(Math.pow(i,h)-1)/(Math.pow(i,a)-1);return n+f*(l-n)}function Up(i,e,t,n,o,l){if(o-t===0)return n;const h=Jc(n),f=Jc(l);let _=f[2]-h[2];_>180?_-=360:_<-180&&(_+=360);const m=[zr(i,e,t,h[0],o,f[0]),zr(i,e,t,h[1],o,f[1]),h[2]+zr(i,e,t,0,o,_),zr(i,e,t,n[3],o,l[3])];return tf(q_(m))}function jp(i){return!0}function Wp(i){const e=df(),t=Yp(i,e),n=gf();return function(o,l){if(n.properties=o.getPropertiesInternal(),n.resolution=l,e.featureId){const a=o.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=ff(o.getGeometry())),t(n)}}function cd(i){const e=df(),t=i.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=ja(i[a],e);const o=gf(),l=new Array(t);return function(a,h){if(o.properties=a.getPropertiesInternal(),o.resolution=h,e.featureId){const _=a.getId();_!==void 0?o.featureId=_:o.featureId=null}let f=0;for(let _=0;_<t;++_){const m=n[_](o);m&&(l[f]=m,f+=1)}return l.length=f,l}}function Yp(i,e){const t=i.length,n=new Array(t);for(let o=0;o<t;++o){const l=i[o],a="filter"in l?Mn(l.filter,lt,e):jp;let h;if(Array.isArray(l.style)){const f=l.style.length;h=new Array(f);for(let _=0;_<f;++_)h[_]=ja(l.style[_],e)}else h=[ja(l.style,e)];n[o]={filter:a,styles:h}}return function(o){const l=[];let a=!1;for(let h=0;h<t;++h){const f=n[h].filter;if(f(o)&&!(i[h].else&&a)){a=!0;for(const _ of n[h].styles){const m=_(o);m&&l.push(m)}}}return l}}function ja(i,e){const t=Zr(i,"",e),n=Br(i,"",e),o=Kp(i,e),l=Vp(i,e),a=wt(i,"z-index",e);if(!t&&!n&&!o&&!l&&!tr(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const h=new gi;return function(f){let _=!0;if(t){const m=t(f);m&&(_=!1),h.setFill(m)}if(n){const m=n(f);m&&(_=!1),h.setStroke(m)}if(o){const m=o(f);m&&(_=!1),h.setText(m)}if(l){const m=l(f);m&&(_=!1),h.setImage(m)}return a&&h.setZIndex(a(f)),_?null:h}}function Zr(i,e,t){let n;if(e+"fill-pattern-src"in i)n=qp(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return l=>null;n=Fu(i,e+"fill-color",t)}if(!n)return null;const o=new ns;return function(l){const a=n(l);return a===Ru?null:(o.setColor(a),o)}}function Br(i,e,t){const n=wt(i,e+"stroke-width",t),o=Fu(i,e+"stroke-color",t);if(!n&&!o)return null;const l=Tn(i,e+"stroke-line-cap",t),a=Tn(i,e+"stroke-line-join",t),h=mf(i,e+"stroke-line-dash",t),f=wt(i,e+"stroke-line-dash-offset",t),_=wt(i,e+"stroke-miter-limit",t),m=new qo;return function(p){if(o){const v=o(p);if(v===Ru)return null;m.setColor(v)}if(n&&m.setWidth(n(p)),l){const v=l(p);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(v)}if(a){const v=a(p);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(v)}return h&&m.setLineDash(h(p)),f&&m.setLineDashOffset(f(p)),_&&m.setMiterLimit(_(p)),m}}function Kp(i,e){const t="text-",n=Tn(i,t+"value",e);if(!n)return null;const o=Zr(i,t,e),l=Zr(i,t+"background-",e),a=Br(i,t,e),h=Br(i,t+"background-",e),f=Tn(i,t+"font",e),_=wt(i,t+"max-angle",e),m=wt(i,t+"offset-x",e),p=wt(i,t+"offset-y",e),v=Hr(i,t+"overflow",e),w=Tn(i,t+"placement",e),E=wt(i,t+"repeat",e),R=bo(i,t+"scale",e),P=Hr(i,t+"rotate-with-view",e),L=wt(i,t+"rotation",e),A=Tn(i,t+"align",e),D=Tn(i,t+"justify",e),N=Tn(i,t+"baseline",e),F=mf(i,t+"padding",e),K=Qo(i,t+"declutter-mode"),X=new Au({declutterMode:K});return function(k){if(X.setText(n(k)),o&&X.setFill(o(k)),l&&X.setBackgroundFill(l(k)),a&&X.setStroke(a(k)),h&&X.setBackgroundStroke(h(k)),f&&X.setFont(f(k)),_&&X.setMaxAngle(_(k)),m&&X.setOffsetX(m(k)),p&&X.setOffsetY(p(k)),v&&X.setOverflow(v(k)),w){const Y=w(k);if(Y!=="point"&&Y!=="line")throw new Error("Expected point or line for text-placement");X.setPlacement(Y)}if(E&&X.setRepeat(E(k)),R&&X.setScale(R(k)),P&&X.setRotateWithView(P(k)),L&&X.setRotation(L(k)),A){const Y=A(k);if(Y!=="left"&&Y!=="center"&&Y!=="right"&&Y!=="end"&&Y!=="start")throw new Error("Expected left, right, center, start, or end for text-align");X.setTextAlign(Y)}if(D){const Y=D(k);if(Y!=="left"&&Y!=="right"&&Y!=="center")throw new Error("Expected left, right, or center for text-justify");X.setJustify(Y)}if(N){const Y=N(k);if(Y!=="bottom"&&Y!=="top"&&Y!=="middle"&&Y!=="alphabetic"&&Y!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");X.setTextBaseline(Y)}return F&&X.setPadding(F(k)),X}}function Vp(i,e){return"icon-src"in i?Zp(i,e):"shape-points"in i?Bp(i,e):"circle-radius"in i?Hp(i,e):null}function Zp(i,e){const t="icon-",n=t+"src",o=_f(i[n],n),l=Co(i,t+"anchor",e),a=bo(i,t+"scale",e),h=wt(i,t+"opacity",e),f=Co(i,t+"displacement",e),_=wt(i,t+"rotation",e),m=Hr(i,t+"rotate-with-view",e),p=fd(i,t+"anchor-origin"),v=gd(i,t+"anchor-x-units"),w=gd(i,t+"anchor-y-units"),E=$p(i,t+"color"),R=Qp(i,t+"cross-origin"),P=Jp(i,t+"offset"),L=fd(i,t+"offset-origin"),A=xo(i,t+"width"),D=xo(i,t+"height"),N=bp(i,t+"size"),F=Qo(i,t+"declutter-mode"),K=new Mu({src:o,anchorOrigin:p,anchorXUnits:v,anchorYUnits:w,color:E,crossOrigin:R,offset:P,offsetOrigin:L,height:D,width:A,size:N,declutterMode:F});return function(X){return h&&K.setOpacity(h(X)),f&&K.setDisplacement(f(X)),_&&K.setRotation(_(X)),m&&K.setRotateWithView(m(X)),a&&K.setScale(a(X)),l&&K.setAnchor(l(X)),K}}function Bp(i,e){const t="shape-",n=t+"points",o=t+"radius",l=Wa(i[n],n),a=Wa(i[o],o),h=Zr(i,t,e),f=Br(i,t,e),_=bo(i,t+"scale",e),m=Co(i,t+"displacement",e),p=wt(i,t+"rotation",e),v=Hr(i,t+"rotate-with-view",e),w=xo(i,t+"radius2"),E=xo(i,t+"angle"),R=Qo(i,t+"declutter-mode"),P=new Bo({points:l,radius:a,radius2:w,angle:E,declutterMode:R});return function(L){return h&&P.setFill(h(L)),f&&P.setStroke(f(L)),m&&P.setDisplacement(m(L)),p&&P.setRotation(p(L)),v&&P.setRotateWithView(v(L)),_&&P.setScale(_(L)),P}}function Hp(i,e){const t="circle-",n=Zr(i,t,e),o=Br(i,t,e),l=wt(i,t+"radius",e),a=bo(i,t+"scale",e),h=Co(i,t+"displacement",e),f=wt(i,t+"rotation",e),_=Hr(i,t+"rotate-with-view",e),m=Qo(i,t+"declutter-mode"),p=new Ho({radius:5,declutterMode:m});return function(v){return l&&p.setRadius(l(v)),n&&p.setFill(n(v)),o&&p.setStroke(o(v)),h&&p.setDisplacement(h(v)),f&&p.setRotation(f(v)),_&&p.setRotateWithView(_(v)),a&&p.setScale(a(v)),p}}function wt(i,e,t){if(!(e in i))return;const n=Mn(i[e],te,t);return function(o){return Wa(n(o),e)}}function Tn(i,e,t){if(!(e in i))return null;const n=Mn(i[e],vt,t);return function(o){return _f(n(o),e)}}function qp(i,e,t){const n=Tn(i,e+"pattern-src",t),o=dd(i,e+"pattern-offset",t),l=dd(i,e+"pattern-size",t),a=Fu(i,e+"color",t);return function(h){return{src:n(h),offset:o&&o(h),size:l&&l(h),color:a&&a(h)}}}function Hr(i,e,t){if(!(e in i))return null;const n=Mn(i[e],lt,t);return function(o){const l=n(o);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Fu(i,e,t){if(!(e in i))return null;const n=Mn(i[e],Bt,t);return function(o){return pf(n(o),e)}}function mf(i,e,t){if(!(e in i))return null;const n=Mn(i[e],mi,t);return function(o){return is(n(o),e)}}function Co(i,e,t){if(!(e in i))return null;const n=Mn(i[e],mi,t);return function(o){const l=is(n(o),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function dd(i,e,t){if(!(e in i))return null;const n=Mn(i[e],mi,t);return function(o){return yf(n(o),e)}}function bo(i,e,t){if(!(e in i))return null;const n=Mn(i[e],mi|te,t);return function(o){return e0(n(o),e)}}function xo(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function bp(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Ct(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Qp(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function fd(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function gd(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Jp(i,e){const t=i[e];if(t!==void 0)return is(t,e)}function Qo(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function $p(i,e){const t=i[e];if(t!==void 0)return pf(t,e)}function is(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function _f(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function Wa(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function pf(i,e){if(typeof i=="string")return i;const t=is(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function yf(i,e){const t=is(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function e0(i,e){return typeof i=="number"?i:yf(i,e)}const md={RENDER_ORDER:"renderOrder"};class t0 extends Ko{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(md.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new $d(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(md.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?cf:e;const t=n0(e);this.styleFunction_=e===null?void 0:mp(t),this.changed()}}function n0(i){if(i===void 0)return cf;if(!i)return null;if(typeof i=="function"||i instanceof gi)return i;if(!Array.isArray(i))return cd([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof gi){const o=new Array(e);for(let l=0;l<e;++l){const a=i[l];if(!(a instanceof gi))throw new Error("Expected a list of style instances");o[l]=a}return o}if("style"in t){const o=new Array(e);for(let l=0;l<e;++l){const a=i[l];if(!("style"in a))throw new Error("Expected a list of rules with a style property");o[l]=a}return Wp(o)}return cd(i)}const i0=5;class r0 extends Qr{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=i0}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return B()}getData(e){return null}prepareFrame(e){return B()}renderFrame(e,t){return B()}forEachFeatureAtCoordinate(e,t,n,o,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ie.LOADED||t.getState()===ie.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ie.LOADED&&t!=ie.ERROR&&e.addEventListener(H.CHANGE,this.boundHandleImageChange_),t==ie.IDLE&&(e.load(),t=e.getState()),t==ie.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class vf extends Pn{constructor(e,t,n,o){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=o}}class s0{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Eo(),{get:(e,t)=>{if(typeof Eo()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,o=t.length;n<o;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const a=t[++n];if(typeof e[l]=="function")e[l](...a);else{if(typeof a=="function"){e[l]=a(e);continue}e[l]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const S1=[];let Hi=null;function o0(){Hi=He(1,1,void 0,{willReadFrequently:!0})}class l0 extends r0{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=fi(),this.pixelTransform=fi(),this.inversePixelTransform=fi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Hi||o0(),Hi.clearRect(0,0,1,1);let o;try{Hi.drawImage(e,t,n,1,1,0,0,1,1),o=Hi.getImageData(0,0,1,1).data}catch{return Hi=null,null}return o}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const o=this.getLayer().getClassName();let l,a;if(e&&e.className===o&&(!n||e&&e.style.backgroundColor&&Oo(Kr(e.style.backgroundColor),Kr(n)))){const h=e.firstElementChild;h instanceof HTMLCanvasElement&&(a=h.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=o;let h=l.style;h.position="absolute",h.width="100%",h.height="100%",a=He();const f=a.canvas;l.appendChild(f),h=f.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=l,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const o=pi(n),l=Go(n),a=zo(n),h=ko(n);zt(t.coordinateToPixelTransform,o),zt(t.coordinateToPixelTransform,l),zt(t.coordinateToPixelTransform,a),zt(t.coordinateToPixelTransform,h);const f=this.inversePixelTransform;zt(f,o),zt(f,l),zt(f,a),zt(f,h),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(h[0]),Math.round(h[1])),e.clip()}prepareContainer(e,t){const n=e.extent,o=e.viewState.resolution,l=e.viewState.rotation,a=e.pixelRatio,h=Math.round(pe(n)/o*a),f=Math.round(at(n)/o*a);nr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-h/2,-f/2),jd(this.inversePixelTransform,this.pixelTransform);const _=__(this.pixelTransform);if(this.useContainer(t,_,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=h||m.height!=f?(m.width=h,m.height=f):this.context.clearRect(0,0,h,f),_!==m.style.transform&&(m.style.transform=_)}}dispatchRenderEvent_(e,t,n){const o=this.getLayer();if(o.hasListener(e)){const l=new vf(e,this.inversePixelTransform,n,t);o.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(dn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(dn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new s0),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(dn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(dn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,o,l,a,h){const f=l/2,_=a/2,m=o/t,p=-m,v=-e[0]+h,w=-e[1];return nr(this.tempTransform,f,_,m,p,-n,v,w)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function a0(i,e,t,n){let o=i[e],l=i[e+1],a=0;for(let h=e+n;h<t;h+=n){const f=i[h],_=i[h+1];a+=Math.sqrt((f-o)*(f-o)+(_-l)*(_-l)),o=f,l=_}return a}const rs="data-source",Ou="popup",Et={ADD:"add",REMOVE:"remove"},_d={LENGTH:"length"};class uo extends Pn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class gn extends bt{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,o=t.length;n<o;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(_d.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new uo(Et.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,o=t.length;n<o;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new uo(Et.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const o=this.array_[e];this.array_[e]=t,this.dispatchEvent(new uo(Et.REMOVE,o,e)),this.dispatchEvent(new uo(Et.ADD,t,e))}updateLength_(){this.set(_d.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}class Jo extends bt{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Jo(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ce(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ne(e,H.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?u0(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function u0(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(ae(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}function Ro(i,e,t,n,o,l,a){let h,f;const _=(t-e)/n;if(_===1)h=e;else if(_===2)h=e,f=o;else if(_!==0){let m=i[e],p=i[e+1],v=0;const w=[0];for(let P=e+n;P<t;P+=n){const L=i[P],A=i[P+1];v+=Math.sqrt((L-m)*(L-m)+(A-p)*(A-p)),w.push(v),m=L,p=A}const E=o*v,R=Tm(w,E);R<0?(f=(E-w[-R-2])/(w[-R-1]-w[-R-2]),h=e+(-R-2)*n):h=e+R*n}a=a>1?a:2,l=l||new Array(a);for(let m=0;m<a;++m)l[m]=h===void 0?NaN:f===void 0?i[h+m]:ba(i[h+m],i[h+n+m],f);return l}function Ya(i,e,t,n,o,l){if(t==e)return null;let a;if(o<i[e+n-1])return l?(a=i.slice(e,e+n),a[n-1]=o,a):null;if(i[t-1]<o)return l?(a=i.slice(t-n,t),a[n-1]=o,a):null;if(o==i[e+n-1])return i.slice(e,e+n);let h=e/n,f=t/n;for(;h<f;){const v=h+f>>1;o<i[(v+1)*n-1]?f=v:h=v+1}const _=i[h*n-1];if(o==_)return i.slice((h-1)*n,(h-1)*n+n);const m=i[(h+1)*n-1],p=(o-_)/(m-_);a=[];for(let v=0;v<n-1;++v)a.push(ba(i[(h-1)*n+v],i[h*n+v],p));return a.push(o),a}function h0(i,e,t,n,o,l,a){if(a)return Ya(i,e,t[t.length-1],n,o,l);let h;if(o<i[n-1])return l?(h=i.slice(0,n),h[n-1]=o,h):null;if(i[i.length-1]<o)return l?(h=i.slice(i.length-n),h[n-1]=o,h):null;for(let f=0,_=t.length;f<_;++f){const m=t[f];if(e!=m){if(o<i[e+n-1])return null;if(o<=i[m-1])return Ya(i,e,m,n,o,!1);e=m}}return null}class rr extends yi{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){mn(this.flatCoordinates,e),this.changed()}clone(){const e=new rr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,o){return o<_i(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,o))}forEachSegment(e){return Hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Ya(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return a0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=jo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new rr(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Yo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Uo(this.flatCoordinates,0,e,this.stride),this.changed()}}class pd{constructor(e){this.rbush_=new $d(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Ce(t)]=n}load(e,t){const n=new Array(t.length);for(let o=0,l=t.length;o<l;o++){const a=e[o],h=t[o],f={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:h};n[o]=f,this.items_[Ce(h)]=f}this.rbush_.load(n)}remove(e){const t=Ce(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Ce(t)],o=[n.minX,n.minY,n.maxX,n.maxY];Xr(o,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(o){return o.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let o=0,l=e.length;o<l;o++)if(n=t(e[o]),n)return n;return n}isEmpty(){return tr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return sr(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Io extends Wd{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ce),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(ne(e[t],H.CHANGE,this.changed,this))}clone(){const e=new Io(Ta(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,o){if(o<_i(this.getExtent(),e,t))return o;const l=this.geometries_;for(let a=0,h=l.length;a<h;++a)o=l[a].closestPointXY(e,t,n,o);return o}containsXY(e,t){const n=this.geometries_;for(let o=0,l=n.length;o<l;++o)if(n[o].containsXY(e,t))return!0;return!1}computeExtent(e){$r(e);const t=this.geometries_;for(let n=0,o=t.length;n<o;++n)Dd(e,t[n].getExtent());return e}getGeometries(){return Ta(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,o=t.length;n<o;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let o=!1;for(let l=0,a=n.length;l<a;++l){const h=n[l],f=h.getSimplifiedGeometry(e);t.push(f),f!==h&&(o=!0)}return o?new Io(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,o=t.length;n<o;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let o=0,l=n.length;o<l;++o)n[o].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Zn(this.getExtent()));const o=this.geometries_;for(let l=0,a=o.length;l<a;++l)o[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Ta(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,o=t.length;n<o;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let o=0,l=n.length;o<l;++o)n[o].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ta(i){return i.map(e=>e.clone())}class To extends yi{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const o=e,l=[],a=[];for(let f=0,_=o.length;f<_;++f){const m=o[f];mn(l,m.getFlatCoordinates()),a.push(l.length)}const h=o.length===0?this.getLayout():o[0].getLayout();this.setFlatCoordinates(h,l),this.ends_=a}}appendLineString(e){mn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new To(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,o){return o<_i(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,o))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,h0(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return pu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new rr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,o=[];let l=0;for(let a=0,h=t.length;a<h;++a){const f=t[a],_=new rr(e.slice(l,f),n);o.push(_),l=f}return o}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const o=this.ends_,l=this.stride;for(let a=0,h=o.length;a<h;++a){const f=o[a],_=Ro(t,n,f,l,.5);mn(e,_),n=f}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Kd(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new To(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return M_(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ts(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class $o extends yi{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){mn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new $o(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,o){if(o<_i(this.getExtent(),e,t))return o;const l=this.flatCoordinates,a=this.stride;for(let h=0,f=l.length;h<f;h+=a){const _=di(e,t,l[h],l[h+1]);if(_<o){o=_;for(let m=0;m<a;++m)n[m]=l[h+m];n.length=a}}return o}getCoordinates(){return Wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new ir(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,o=[];for(let l=0,a=e.length;l<a;l+=n){const h=new ir(e.slice(l,l+n),t);o.push(h)}return o}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let o=0,l=t.length;o<l;o+=n){const a=t[o],h=t[o+1];if(tu(e,a,h))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Uo(this.flatCoordinates,0,e,this.stride),this.changed()}}function Ef(i,e,t,n){const o=[];let l=qn();for(let a=0,h=t.length;a<h;++a){const f=t[a];l=nu(i,e,f[0],n),o.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=f[f.length-1]}return o}class So extends yi{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const o=e,l=[],a=[];for(let h=0,f=o.length;h<f;++h){const _=o[h],m=l.length,p=_.getEnds();for(let v=0,w=p.length;v<w;++v)p[v]+=m;mn(l,_.getFlatCoordinates()),a.push(p)}t=o.length===0?this.getLayout():o[0].getLayout(),e=l,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;mn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let o=0,l=t.length;o<l;++o)t[o]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let o=0;o<e;++o)t[o]=this.endss_[o].slice();const n=new So(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,o){return o<_i(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(E_(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),w_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,o))}containsXY(e,t){return P_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return T_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ga(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,I_(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Ef(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Bd(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new $o(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Qd(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ga(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=R_(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new So(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),o=n[n.length-1];if(t!==0)for(let l=0,a=n.length;l<a;++l)n[l]-=t;return new Bn(this.flatCoordinates.slice(t,o),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,o=[];let l=0;for(let a=0,h=n.length;a<h;++a){const f=n[a].slice(),_=f[f.length-1];if(l!==0)for(let p=0,v=f.length;p<v;++p)f[p]-=l;const m=new Bn(t.slice(l,_),e,f);o.push(m),l=_}return o}getType(){return"MultiPolygon"}intersectsExtent(e){return A_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Yd(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const o=n[n.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()}}const yd=fi();class It{constructor(e,t,n,o,l,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Nd(this.flatCoordinates_):nu(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Zn(this.getExtent());this.flatInteriorPoints_=vu(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=F_(this.flatCoordinates_,this.ends_),t=Ef(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Bd(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ro(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let o=0,l=n.length;o<l;++o){const a=n[o],h=Ro(e,t,a,2,.5);mn(this.flatMidpoints_,h),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Oe(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const o=at(n)/at(t);nr(yd,n[0],n[3],o,-o,0,0,0),cu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,yd,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new It(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Ad((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let o;switch(this.type_){case"LineString":n.length=jo(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),o=[n.length];break;case"MultiLineString":o=[],n.length=Kd(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,o);break;case"Polygon":o=[],n.length=_u(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,o);break}return o&&(this.simplifiedGeometry_=new It(this.type_,n,o,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}It.prototype.getFlatCoordinates=It.prototype.getOrientedFlatCoordinates;class wf extends bt{constructor(e){super(),this.projection=Oe(e.projection),this.attributions_=vd(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,o){t.viewResolver=n,t.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=vd(e),this.changed()}setState(e){this.state_=e,this.changed()}}function vd(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}const Dt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function c0(i,e){return[[-1/0,-1/0,1/0,1/0]]}let d0=!1;function f0(i,e,t,n,o,l,a){const h=new XMLHttpRequest;h.open("GET",typeof i=="function"?i(t,n,o):i,!0),e.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=d0,h.onload=function(f){if(!h.status||h.status>=200&&h.status<300){const _=e.getType();try{let m;_=="text"||_=="json"?m=h.responseText:_=="xml"?m=h.responseXML||h.responseText:_=="arraybuffer"&&(m=h.response),m?l(e.readFeatures(m,{extent:t,featureProjection:o}),e.readProjection(m)):a()}catch{a()}}else a()},h.onerror=a,h.send()}function Ed(i,e){return function(t,n,o,l,a){const h=this;f0(i,e,t,n,o,function(f,_){h.addFeatures(f),l!==void 0&&l(f)},a||er)}}class jn extends Pn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class g0 extends wf{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=er,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ae(this.format_,"`format` must be set when `url` is set"),this.loader_=Ed(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:c0;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new pd:null,this.loadedExtentsRtree_=new pd,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,o;Array.isArray(e.features)?o=e.features:e.features&&(n=e.features,o=n.getArray()),!t&&n===void 0&&(n=new gn(o)),o!==void 0&&this.addFeaturesInternal(o),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ce(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new jn(Dt.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof It||(this.featureChangeKeys_[e]=[ne(t,H.CHANGE,this.handleFeatureChange_,this),ne(t,$i.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const o=String(t.getId());if(!(o in this.idIndex_))this.idIndex_[o]=t;else if(t instanceof It){const l=this.idIndex_[o];l instanceof It?Array.isArray(l)?l.push(t):this.idIndex_[o]=[l,t]:n=!1}else n=!1}return n&&(ae(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],o=[];for(let l=0,a=e.length;l<a;l++){const h=e[l],f=Ce(h);this.addToIndex_(f,h)&&n.push(h)}for(let l=0,a=n.length;l<a;l++){const h=n[l],f=Ce(h);this.setupChangeEvents_(f,h);const _=h.getGeometry();if(_){const m=_.getExtent();t.push(m),o.push(h)}else this.nullGeometryFeatures_[f]=h}if(this.featuresRtree_&&this.featuresRtree_.load(t,o),this.hasListener(Dt.ADDFEATURE))for(let l=0,a=n.length;l<a;l++)this.dispatchEvent(new jn(Dt.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Dt.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Dt.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Et.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Et.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(ce);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=o=>{this.removeFeatureInternal(o)};this.featuresRtree_.forEach(n);for(const o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new jn(Dt.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(o){const l=o.getGeometry();if(l instanceof It||l.intersectsCoordinate(e))return t(o)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const o=n.getGeometry();if(o instanceof It||o.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),tr(this.nullGeometryFeatures_)||mn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const o=iu(e,t);return[].concat(...o.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],o=e[1];let l=null;const a=[NaN,NaN];let h=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||Gr,this.featuresRtree_.forEachInExtent(f,function(_){if(t(_)){const m=_.getGeometry(),p=h;if(h=m instanceof It?0:m.closestPointXY(n,o,a,h),h<p){l=_;const v=Math.sqrt(h);f[0]=n-v,f[1]=o-v,f[2]=n+v,f[3]=o+v}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Ce(t),o=t.getGeometry();if(!o)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const l=t.getId();if(l!==void 0){const a=l.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new jn(Dt.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ce(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&tr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const o=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let a=0,h=l.length;a<h;++a){const f=l[a];o.forEachInExtent(f,function(m){return eu(m.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new jn(Dt.FEATURESLOADSTART)),this.loader_.call(this,f,t,n,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new jn(Dt.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new jn(Dt.FEATURESLOADERROR))}),o.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(o){if(Xr(o.extent,e))return n=o,!0}),n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,o=e.length;n<o;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ce(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(ce),delete this.featureChangeKeys_[t];const o=e.getId();if(o!==void 0){const l=o.toString(),a=this.idIndex_[l];a===e?delete this.idIndex_[l]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[l]=a[0]))}return delete this.uidIndex_[t],this.hasListener(Dt.REMOVEFEATURE)&&this.dispatchEvent(new jn(Dt.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ae(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Ed(e,this.format_))}}const U={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Nu extends Do{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(H.CHANGE)}release(){this.state===U.ERROR&&this.setState(U.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==U.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){B()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const o=t-n+1e3/60;return o>=this.transition_?1:Ud(o/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Cf extends Nu{constructor(e,t,n,o,l,a){super(e,t,a),this.crossOrigin_=o,this.src_=n,this.key=n,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=U.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=U.ERROR,this.unlistenImage_(),this.image_=m0(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=U.LOADED:this.state=U.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==U.ERROR&&(this.state=U.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==U.IDLE&&(this.state=U.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=np(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function m0(){const i=He(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class _0{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const o=this.points_[t+2]-this.points_[n+2];if(o<1e3/60)return!1;const l=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class p0 extends Fo{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){B()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;nr(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),jd(o,n)}forEachFeatureAtCoordinate(e,t,n,o,l,a,h,f){let _;const m=t.viewState;function p(N,F,K,X){return l.call(a,F,N?K:null,X)}const v=m.projection,w=Jm(e.slice(),v),E=[[0,0]];if(v.canWrapX()&&o){const N=v.getExtent(),F=pe(N);E.push([-F,0],[F,0])}const R=t.layerStatesArray,P=R.length,L=[],A=[];for(let N=0;N<E.length;N++)for(let F=P-1;F>=0;--F){const K=R[F],X=K.layer;if(X.hasRenderer()&&Cu(K,m)&&h.call(f,X)){const k=X.getRenderer(),Y=X.getSource();if(k&&Y){const ge=Y.getWrapX()?w:e,ye=p.bind(null,K.managed);A[0]=ge[0]+E[N][0],A[1]=ge[1]+E[N][1],_=k.forEachFeatureAtCoordinate(A,t,n,ye,L)}if(_)return _}}if(L.length===0)return;const D=1/L.length;return L.forEach((N,F)=>N.distanceSq+=F*D),L.sort((N,F)=>N.distanceSq-F.distanceSq),L.some(N=>_=N.callback(N.feature,N.layer,N.geometry)),_}hasFeatureAtCoordinate(e,t,n,o,l,a){return this.forEachFeatureAtCoordinate(e,t,n,o,Gr,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){B()}scheduleExpireIconCache(e){fn.canExpireCache()&&e.postRenderFunctions.push(y0)}}function y0(i,e){fn.expire()}class v0 extends p0{constructor(e){super(e),this.fontChangeListenerKey_=ne(Rn,$i.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Zo+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const o=new vf(e,void 0,t);n.dispatchEvent(o)}}disposeInternal(){ce(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(dn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((h,f)=>h.zIndex-f.zIndex);t.some(h=>h.layer instanceof t0&&h.layer.getDeclutter())&&(e.declutter={});const o=e.viewState;this.children_.length=0;const l=[];let a=null;for(let h=0,f=t.length;h<f;++h){const _=t[h];e.layerIndex=h;const m=_.layer,p=m.getSourceState();if(!Cu(_,o)||p!="ready"&&p!="undefined"){m.unrender();continue}const v=m.render(e,a);v&&(v!==a&&(this.children_.push(v),a=v),l.push(_))}this.declutter(e,l),tp(this.element_,this.children_),this.dispatchRenderEvent(dn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const o=t[n],l=o.layer;l.getDeclutter()&&l.renderDeclutter(e,o)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Kn extends Pn{constructor(e,t){super(e),this.layer=t}}const Sa={LAYERS:"layers"};class lr extends Fd{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Sa.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new gn(n.slice(),{unique:!0}):ae(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new gn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ce),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ne(e,Et.ADD,this.handleLayersAdd_,this),ne(e,Et.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(ce);br(this.listenerKeys_);const t=e.getArray();for(let n=0,o=t.length;n<o;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Kn("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[ne(e,$i.PROPERTYCHANGE,this.handleLayerChange_,this),ne(e,H.CHANGE,this.handleLayerChange_,this)];e instanceof lr&&t.push(ne(e,"addlayer",this.handleLayerGroupAdd_,this),ne(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ce(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Kn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Kn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Kn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Ce(t);this.listenerKeys_[n].forEach(ce),delete this.listenerKeys_[n],this.dispatchEvent(new Kn("removelayer",t)),this.changed()}getLayers(){return this.get(Sa.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let o=0,l=n.length;o<l;++o)this.dispatchEvent(new Kn("removelayer",n[o]))}this.set(Sa.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const o=this.getLayerState();let l=o.zIndex;!e&&o.zIndex===void 0&&(l=0);for(let a=n,h=t.length;a<h;a++){const f=t[a];f.opacity*=o.opacity,f.visible=f.visible&&o.visible,f.maxResolution=Math.min(f.maxResolution,o.maxResolution),f.minResolution=Math.max(f.minResolution,o.minResolution),f.minZoom=Math.max(f.minZoom,o.minZoom),f.maxZoom=Math.min(f.maxZoom,o.maxZoom),o.extent!==void 0&&(f.extent!==void 0?f.extent=Ht(f.extent,o.extent):f.extent=o.extent),f.zIndex===void 0&&(f.zIndex=l)}return t}getSourceState(){return"ready"}}class qi extends Pn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Yn extends qi{constructor(e,t,n,o,l,a){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Me={SINGLECLICK:"singleclick",CLICK:H.CLICK,DBLCLICK:H.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ka={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class E0 extends Do{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=ne(n,Ka.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ne(n,Ka.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_,lf?{passive:!1}:!1)}emulateClick_(e){let t=new Yn(Me.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Yn(Me.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Yn(Me.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Me.POINTERUP||t.type==Me.POINTERCANCEL){delete this.trackedTouches_[n];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==t.target){delete this.trackedTouches_[o];break}}else(t.type==Me.POINTERDOWN||t.type==Me.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Yn(Me.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ce),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Yn(Me.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ne(n,Me.POINTERMOVE,this.handlePointerMove_,this),ne(n,Me.POINTERUP,this.handlePointerUp_,this),ne(this.element_,Me.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(ne(this.element_.getRootNode(),Me.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Yn(Me.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Yn(Me.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ce(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ce(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ce),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const In={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},it={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Po=1/0;class w0{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,br(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const o=this.keyFunction_(n);return delete this.queuedElements_[o],n}enqueue(e){ae(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Po?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,o=t.length,l=t[e],a=n[e],h=e;for(;e<o>>1;){const f=this.getLeftChildIndex_(e),_=this.getRightChildIndex_(e),m=_<o&&n[_]<n[f]?_:f;t[e]=t[m],n[e]=n[m],e=m}t[e]=l,n[e]=a,this.siftDown_(h,e)}siftDown_(e,t){const n=this.elements_,o=this.priorities_,l=n[t],a=o[t];for(;t>e;){const h=this.getParentIndex_(t);if(o[h]>a)n[t]=n[h],o[t]=o[h],t=h;else break}n[t]=l,o[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let o=0;const l=t.length;let a,h,f;for(h=0;h<l;++h)a=t[h],f=e(a),f==Po?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=f,t[o++]=a);t.length=o,n.length=o,this.heapify_()}}class C0 extends w0{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(H.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===U.LOADED||n===U.ERROR||n===U.EMPTY){n!==U.ERROR&&t.removeEventListener(H.CHANGE,this.boundHandleTileChange_);const o=t.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const o=this.dequeue()[0],l=o.getKey();o.getState()===U.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,o.load())}}}function x0(i,e,t,n,o){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Po;const l=i.viewState.center,a=n[0]-l[0],h=n[1]-l[1];return 65536*Math.log(o)+Math.sqrt(a*a+h*h)/o}class Du extends bt{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)ce(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==er&&this.listenerKeys.push(ne(e,In.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class R0 extends Du{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",o=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const h=e.label!==void 0?e.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=o):this.label_=h;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const _=t+" "+Zo+" "+Pu+(this.collapsed_&&this.collapsible_?" "+td:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=_,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(o=>o.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(o=>n.add(o)):n.add(this.attributions_)),!this.overrideCollapsible_){const o=!t.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(o)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(o=>Pm(()=>o))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Oo(t,this.renderedAttributions_)){af(this.ulElement_);for(let o=0,l=t.length;o<l;++o){const a=document.createElement("li");a.innerHTML=t[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(td),this.collapsed_?$c(this.collapseLabel_,this.label_):$c(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class I0 extends Du{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",o=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(o));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+Zo+" "+Pu,f=this.element;f.className=h,f.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(lo)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:or}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const o="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(lo);!l&&n===0?this.element.classList.add(lo):l&&n!==0&&this.element.classList.remove(lo)}this.label_.style.transform=o}this.rotation_=n}}class T0 extends Du{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,o=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",h=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",_=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=o,m.setAttribute("type","button"),m.title=f,m.appendChild(typeof a=="string"?document.createTextNode(a):a),m.addEventListener(H.CLICK,this.handleClick_.bind(this,n),!1);const p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=_,p.appendChild(typeof h=="string"?document.createTextNode(h):h),p.addEventListener(H.CLICK,this.handleClick_.bind(this,-n),!1);const v=t+" "+Zo+" "+Pu,w=this.element;w.className=v,w.appendChild(m),w.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const o=n.getZoom();if(o!==void 0){const l=n.getConstrainedZoom(o+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:or})):n.setZoom(l)}}}function S0(i){i=i||{};const e=new gn;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new T0(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new I0(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new R0(i.attributionOptions)),e}const wd={ACTIVE:"active"};class ss extends bt{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(wd.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(wd.ACTIVE,e)}setMap(e){this.map_=e}}function P0(i,e,t){const n=i.getCenterInternal();if(n){const o=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:g_,center:i.getConstrainedCenter(o)})}}function ku(i,e,t,n){const o=i.getZoom();if(o===void 0)return;const l=i.getConstrainedZoom(o+e),a=i.getResolutionForZoom(l);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:or})}class M0 extends ss{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Me.DBLCLICK){const n=e.originalEvent,o=e.map,l=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,h=o.getView();ku(h,a,l,this.duration_),n.preventDefault(),t=!0}return!t}}class os extends ss{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Me.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Me.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Me.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Me.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function zu(i){const e=i.length;let t=0,n=0;for(let o=0;o<e;o++)t+=i[o].clientX,n+=i[o].clientY;return{clientX:t/e,clientY:n/e}}function Va(i){const e=arguments;return function(t){let n=!0;for(let o=0,l=e.length;o<l&&(n=n&&e[o](t),!!n);++o);return n}}const A0=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},L0=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},xf=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?L0(i):!0},F0=Gr,Rf=function(i){const e=i.originalEvent;return e.button==0&&!(J_&&nf&&e.ctrlKey)},If=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},O0=function(i){const e=i.originalEvent;return nf?e.metaKey:e.ctrlKey},N0=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Tf=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Pa=function(i){const e=i.originalEvent;return ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},D0=function(i){const e=i.originalEvent;return ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class k0 extends os{constructor(e){super({stopDown:No}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Va(If,D0);this.condition_=e.onFocusOnly?Va(xf,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,o=t.getEventPixel(zu(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){const l=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],h=e.map.getView();Qm(l,h.getResolution()),ru(l,h.getRotation()),h.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=n.getCenterInternal(),h=t.getPixelFromCoordinateInternal(a),f=t.getCoordinateFromPixelInternal([h[0]-o*Math.cos(l),h[1]-o*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(f),duration:500,easing:or})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class z0 extends os{constructor(e){e=e||{},super({stopDown:No}),this.condition_=e.condition?e.condition:A0,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Pa(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===hu)return;const o=t.getSize(),l=e.pixel,a=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){const h=a-this.lastAngle_;n.adjustRotationInternal(-h)}this.lastAngle_=a}handleUpEvent(e){return Pa(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Pa(e)&&Rf(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class G0 extends Fo{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(e[0],t[0])+n,o.top=Math.min(e[1],t[1])+n,o.width=Math.abs(t[0]-e[0])+n,o.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,o=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Bn([o])}getGeometry(){return this.geometry_}}const Wi={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Lr extends Pn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class X0 extends os{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new G0(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Rf,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const o=n[0]-t[0],l=n[1]-t[1];return o*o+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Lr(Wi.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Lr(t?Wi.BOXEND:Wi.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Lr(Wi.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Lr(Wi.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Lr(Wi.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class U0 extends X0{constructor(e){e=e||{};const t=e.condition?e.condition:N0;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let o=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(o),a=n.getResolutionForExtentInternal(l),h=n.getResolution()/a;o=o.clone(),o.scale(h*h)}n.fitInternal(o,{duration:this.duration_,easing:or})}}const ui={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class j0 extends ss{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return If(t)&&Tf(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN){const n=e.originalEvent,o=n.key;if(this.condition_(e)&&(o==ui.DOWN||o==ui.LEFT||o==ui.RIGHT||o==ui.UP)){const a=e.map.getView(),h=a.getResolution()*this.pixelDelta_;let f=0,_=0;o==ui.DOWN?_=-h:o==ui.LEFT?f=-h:o==ui.RIGHT?f=h:_=h;const m=[f,_];ru(m,a.getRotation()),P0(a,m,this.duration_),n.preventDefault(),t=!0}}return!t}}class W0 extends ss{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!O0(t)&&Tf(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN||e.type==H.KEYPRESS){const n=e.originalEvent,o=n.key;if(this.condition_(e)&&(o==="+"||o==="-")){const l=e.map,a=o==="+"?this.delta_:-this.delta_,h=l.getView();ku(h,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class Y0 extends ss{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:F0;this.condition_=e.onFocusOnly?Va(xf,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==H.WHEEL)return!0;const n=e.map,o=e.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==H.WHEEL&&(l=o.deltaY,b_&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=rf),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const h=n.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const f=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Fe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ku(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class K0 extends os{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=No),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(this.lastAngle_!==void 0){const f=l-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=l;const a=e.map,h=a.getView();h.getConstraints().rotation!==hu&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(zu(this.targetPointers))),this.rotating_&&(a.render(),h.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class V0 extends os{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=No),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],o=this.targetPointers[1],l=n.clientX-o.clientX,a=n.clientY-o.clientY,h=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/h),this.lastDistance_=h;const f=e.map,_=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(zu(this.targetPointers))),f.render(),_.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Z0(i){i=i||{};const e=new gn,t=new _0(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new z0),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new M0({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new k0({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new K0),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new V0({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new j0),e.push(new W0({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new Y0({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new U0({duration:i.zoomDuration})),e}function Sf(i){if(i instanceof Ko){i.setMapInternal(null);return}i instanceof lr&&i.getLayers().forEach(Sf)}function Pf(i,e){if(i instanceof Ko){i.setMapInternal(e);return}if(i instanceof lr){const t=i.getLayers().getArray();for(let n=0,o=t.length;n<o;++n)Pf(t[n],e)}}let el=class extends bt{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=B0(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:rf,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fi(),this.pixelToCoordinateTransform_=fi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||S0(),this.interactions=t.interactions||Z0({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new C0(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(it.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(it.VIEW,this.handleViewChanged_),this.addChangeListener(it.SIZE,this.handleSizeChanged_),this.addChangeListener(it.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof cn)&&e.view.then(function(o){n.setView(new cn(o))}),this.controls.addEventListener(Et.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(Et.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(Et.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(Et.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(Et.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(Et.REMOVE,o=>{const l=o.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Pf(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:Gr,h=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,h,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(o){n.push(o)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(o){o instanceof lr?t(o.getLayers()):e.push(o)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const o=t.layerFilter!==void 0?t.layerFilter:Gr,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,a,o,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),o=this.getSize(),l=n.width/o[0],a=n.height/o[1],h="changedTouches"in e?e.changedTouches[0]:e;return[(h.clientX-n.left)/l,(h.clientY-n.top)/a]}getTarget(){return this.get(it.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return za(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?zt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(it.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof gn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const o=e[t];if(!o.visible)continue;const l=o.layer.getRenderer();if(l&&!l.ready)return!0;const a=o.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=xn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?zt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(it.SIZE)}getView(){return this.get(it.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,o){return x0(this.frameState_,e,t,n,o)}handleBrowserEvent(e,t){t=t||e.type;const n=new Yn(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Ka.POINTERDOWN||n===H.WHEEL||n===H.KEYDOWN){const o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,a=t.target,h=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===o?o.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!h.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const o=this.getInteractions().getArray().slice();for(let l=o.length-1;l>=0;l--){const a=o[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let o=this.maxTilesLoading_,l=o;if(e){const a=e.viewHints;if(a[kt.ANIMATING]||a[kt.INTERACTING]){const h=Date.now()-e.time>8;o=h?0:8,l=h?0:2}}t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(dn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(dn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new qi(In.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new qi(In.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let o=0,l=n.length;o<l;++o)n[o](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,o=this.targetChangeHandlerKeys_.length;n<o;++n)ce(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(H.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new v0(this)),this.mapBrowserEventHandler_=new E0(this,this.moveTolerance_);for(const l in Me)this.mapBrowserEventHandler_.addEventListener(Me[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(H.WHEEL,this.boundHandleBrowserEvent_,lf?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[ne(n,H.KEYDOWN,this.handleBrowserEvent,this),ne(n,H.KEYPRESS,this.handleBrowserEvent,this)];const o=t.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ce(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ce(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ne(e,$i.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ne(e,H.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ce),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Kn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ne(e,$i.PROPERTYCHANGE,this.render,this),ne(e,H.CHANGE,this.render,this),ne(e,"addlayer",this.handleLayerAdd_,this),ne(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const o=e[t].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Sf(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),o=this.frameState_;let l=null;if(t!==void 0&&qc(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Da(h.center,h.resolution,h.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:h,viewHints:a,wantedTiles:{},mapId:Ce(this),renderTargets:{}},h.nextCenter&&h.nextResolution){const f=isNaN(h.nextRotation)?h.rotation:h.nextRotation;l.nextExtent=Da(h.nextCenter,h.nextResolution,f,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),o&&(!this.previousExtent_||!Xo(this.previousExtent_)&&!Xr(l.extent,this.previousExtent_))&&(this.dispatchEvent(new qi(In.MOVESTART,this,o)),this.previousExtent_=$r(this.previousExtent_)),this.previousExtent_&&!l.viewHints[kt.ANIMATING]&&!l.viewHints[kt.INTERACTING]&&!Xr(l.extent,this.previousExtent_)&&(this.dispatchEvent(new qi(In.MOVEEND,this,l)),Ym(l.extent,this.previousExtent_))),this.dispatchEvent(new qi(In.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(In.LOADSTART)||this.hasListener(In.LOADEND)||this.hasListener(dn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Kn("removelayer",t)),this.set(it.LAYERGROUP,e)}setSize(e){this.set(it.SIZE,e)}setTarget(e){this.set(it.TARGET,e)}setView(e){if(!e||e instanceof cn){this.set(it.VIEW,e);return}this.set(it.VIEW,new cn);const t=this;e.then(function(n){t.setView(new cn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const o=getComputedStyle(e),l=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!qc(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Gd("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Oo(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function B0(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new lr({layers:i.layers});t[it.LAYERGROUP]=n,t[it.TARGET]=i.target,t[it.VIEW]=i.view instanceof cn?i.view:new cn;let o;i.controls!==void 0&&(Array.isArray(i.controls)?o=new gn(i.controls.slice()):(ae(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),o=i.controls));let l;i.interactions!==void 0&&(Array.isArray(i.interactions)?l=new gn(i.interactions.slice()):(ae(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=i.interactions));let a;return i.overlays!==void 0?Array.isArray(i.overlays)?a=new gn(i.overlays.slice()):(ae(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=i.overlays):a=new gn,{controls:o,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}const nt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Mf extends bt{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+ap,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(nt.ELEMENT,this.handleElementChanged),this.addChangeListener(nt.MAP,this.handleMapChanged),this.addChangeListener(nt.OFFSET,this.handleOffsetChanged),this.addChangeListener(nt.POSITION,this.handlePositionChanged),this.addChangeListener(nt.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(nt.ELEMENT)}getId(){return this.id}getMap(){return this.get(nt.MAP)||null}getOffset(){return this.get(nt.OFFSET)}getPosition(){return this.get(nt.POSITION)}getPositioning(){return this.get(nt.POSITIONING)}handleElementChanged(){af(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),ce(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ne(e,In.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(nt.ELEMENT,e)}setMap(e){this.set(nt.MAP,e)}setOffset(e){this.set(nt.OFFSET,e)}setPosition(e){this.set(nt.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(nt.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),o=this.getElement(),l=this.getRect(o,[$_(o),ep(o)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!eu(n,l)){const h=l[0]-n[0],f=n[2]-l[2],_=l[1]-n[1],m=n[3]-l[3],p=[0,0];if(h<0?p[0]=h-a:f<0&&(p[0]=Math.abs(f)+a),_<0?p[1]=_-a:m<0&&(p[1]=Math.abs(m)+a),p[0]!==0||p[1]!==0){const v=t.getView().getCenterInternal(),w=t.getPixelFromCoordinateInternal(v);if(!w)return;const E=[w[0]+p[0],w[1]+p[1]],R=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(E),duration:R.duration,easing:R.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),o=n.left+window.pageXOffset,l=n.top+window.pageYOffset;return[o,l,o+t[0],l+t[1]]}setPositioning(e){this.set(nt.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),o=e.getSize();this.updateRenderedPosition(n,o)}updateRenderedPosition(e,t){const n=this.element.style,o=this.getOffset(),l=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+o[0])+"px",h=Math.round(e[1]+o[1])+"px";let f="0%",_="0%";l=="bottom-right"||l=="center-right"||l=="top-right"?f="-100%":(l=="bottom-center"||l=="center-center"||l=="top-center")&&(f="-50%"),l=="bottom-left"||l=="bottom-center"||l=="bottom-right"?_="-100%":(l=="center-left"||l=="center-center"||l=="center-right")&&(_="-50%");const m=`translate(${f}, ${_}) translate(${a}, ${h})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,n.transform=m)}getOptions(){return this.options}}class H0{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();){const t=this.pop();t instanceof Fo&&t.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return ae(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return ae(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ae(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Mo(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function q0(i,e,t){return i+"/"+e+"/"+t}function b0(i){return Q0(i[0],i[1],i[2])}function Q0(i,e,t){return(e<<i)+t}function J0(i,e){const t=i[0],n=i[1],o=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,o):!0}class Gu{constructor(e,t,n,o){this.minX=e,this.maxX=t,this.minY=n,this.maxY=o}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Yi(i,e,t,n,o){return o!==void 0?(o.minX=i,o.maxX=e,o.minY=t,o.maxY=n,o):new Gu(i,e,t,n)}const ho={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class $0 extends Ko{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ho.PRELOAD)}setPreload(e){this.set(ho.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ho.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ho.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Ao(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function ey(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}const ty=new Error("disposed");let Ki=null;function ny(i){Ki||(Ki=He(i.width,i.height,void 0,{willReadFrequently:!0}));const e=Ki.canvas,t=i.width;e.width!==t&&(e.width=t);const n=i.height;return e.height!==n&&(e.height=n),Ki.clearRect(0,0,t,n),Ki.drawImage(i,0,0),Ki.getImageData(0,0,t,n).data}const iy=[256,256];class Za extends Nu{constructor(e){const t=U.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Ao(this.data_);return e?[e.width,e.height]:iy}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==U.IDLE&&this.state!==U.ERROR)return;this.state=U.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=U.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=U.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(ty),this.controller_=null),super.disposeInternal()}}const Af=.5,ry=10,Cd=.25;class Lf{constructor(e,t,n,o,l,a){this.sourceProj_=e,this.targetProj_=t;let h={};const f=jr(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){const D=A[0]+"/"+A[1];return h[D]||(h[D]=f(A)),h[D]},this.maxSourceExtent_=o,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&pe(o)>=pe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pe(this.targetProj_.getExtent()):null;const _=pi(n),m=Go(n),p=zo(n),v=ko(n),w=this.transformInv_(_),E=this.transformInv_(m),R=this.transformInv_(p),P=this.transformInv_(v),L=ry+(a?Math.max(0,Math.ceil(Math.log2(Ur(n)/(a*a*256*256)))):0);if(this.addQuad_(_,m,p,v,w,E,R,P,L),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(D,N,F){A=Math.min(A,D.source[0][0],D.source[1][0],D.source[2][0])}),this.triangles_.forEach(D=>{if(Math.max(D.source[0][0],D.source[1][0],D.source[2][0])-A>this.sourceWorldWidth_/2){const N=[[D.source[0][0],D.source[0][1]],[D.source[1][0],D.source[1][1]],[D.source[2][0],D.source[2][1]]];N[0][0]-A>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-A>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-A>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const F=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-F<this.sourceWorldWidth_/2&&(D.source=N)}})}h={}}addTriangle_(e,t,n,o,l,a){this.triangles_.push({source:[o,l,a],target:[e,t,n]})}addQuad_(e,t,n,o,l,a,h,f,_){const m=Dc([l,a,h,f]),p=this.sourceWorldWidth_?pe(m)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,w=this.sourceProj_.canWrapX()&&p>.5&&p<1;let E=!1;if(_>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const P=Dc([e,t,n,o]);E=pe(P)/this.targetWorldWidth_>Cd||E}!w&&this.sourceProj_.isGlobal()&&p&&(E=p>Cd||E)}if(!E&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!es(m,this.maxSourceExtent_))return;let R=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(f[0])||!isFinite(f[1]))){if(_>0)E=!0;else if(R=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),R!=1&&R!=2&&R!=4&&R!=8)return}if(_>0){if(!E){const P=[(e[0]+n[0])/2,(e[1]+n[1])/2],L=this.transformInv_(P);let A;w?A=(Qi(l[0],v)+Qi(h[0],v))/2-Qi(L[0],v):A=(l[0]+h[0])/2-L[0];const D=(l[1]+h[1])/2-L[1];E=A*A+D*D>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const P=[(t[0]+n[0])/2,(t[1]+n[1])/2],L=this.transformInv_(P),A=[(o[0]+e[0])/2,(o[1]+e[1])/2],D=this.transformInv_(A);this.addQuad_(e,t,P,A,l,a,L,D,_-1),this.addQuad_(A,P,n,o,D,L,h,f,_-1)}else{const P=[(e[0]+t[0])/2,(e[1]+t[1])/2],L=this.transformInv_(P),A=[(n[0]+o[0])/2,(n[1]+o[1])/2],D=this.transformInv_(A);this.addQuad_(e,P,A,o,l,L,D,f,_-1),this.addQuad_(P,t,n,A,L,a,h,D,_-1)}return}}if(w){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}R&11||this.addTriangle_(e,n,o,l,h,f),R&14||this.addTriangle_(e,n,t,l,h,a),R&&(R&13||this.addTriangle_(t,o,e,a,f,l),R&7||this.addTriangle_(t,o,n,a,f,h))}calculateSourceExtent(){const e=qn();return this.triangles_.forEach(function(t,n,o){const l=t.source;go(e,l[0]),go(e,l[1]),go(e,l[2])}),e}getTriangles(){return this.triangles_}}let Ma;const Sn=[];function xd(i,e,t,n,o){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,o),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,o)),i.restore()}function Aa(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function sy(){if(Ma===void 0){const i=He(6,6,Sn);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",xd(i,4,5,4,0),xd(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Ma=Aa(e,0)||Aa(e,4)||Aa(e,8),Vr(i),Sn.push(i.canvas)}return Ma}function Rd(i,e,t,n){const o=s_(t,e,i);let l=Gc(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const h=i.getMetersPerUnit();h!==void 0&&(l/=h);const f=i.getExtent();if(!f||$a(f,o)){const _=Gc(i,l,o)/l;isFinite(_)&&_>0&&(l/=_)}return l}function Ff(i,e,t,n){const o=Zn(t);let l=Rd(i,e,o,n);return(!isFinite(l)||l<=0)&&zd(t,function(a){return l=Rd(i,e,a,n),isFinite(l)&&l>0}),l}function Of(i,e,t,n,o,l,a,h,f,_,m,p,v,w){const E=He(Math.round(t*i),Math.round(t*e),Sn);if(p||(E.imageSmoothingEnabled=!1),f.length===0)return E.canvas;E.scale(t,t);function R(F){return Math.round(F*t)/t}E.globalCompositeOperation="lighter";const P=qn();f.forEach(function(F,K,X){Dd(P,F.extent)});let L;const A=t/n,D=(p?1:1+Math.pow(2,-24))/A;if(!v||f.length!==1||_!==0){if(L=He(Math.round(pe(P)*A),Math.round(at(P)*A),Sn),p||(L.imageSmoothingEnabled=!1),o&&w){const F=(o[0]-P[0])*A,K=-(o[3]-P[3])*A,X=pe(o)*A,k=at(o)*A;L.rect(F,K,X,k),L.clip()}f.forEach(function(F,K,X){if(F.image.width>0&&F.image.height>0){if(F.clipExtent){L.save();const me=(F.clipExtent[0]-P[0])*A,de=-(F.clipExtent[3]-P[3])*A,Q=pe(F.clipExtent)*A,ve=at(F.clipExtent)*A;L.rect(p?me:Math.round(me),p?de:Math.round(de),p?Q:Math.round(me+Q)-Math.round(me),p?ve:Math.round(de+ve)-Math.round(de)),L.clip()}const k=(F.extent[0]-P[0])*A,Y=-(F.extent[3]-P[3])*A,ge=pe(F.extent)*A,ye=at(F.extent)*A;L.drawImage(F.image,_,_,F.image.width-2*_,F.image.height-2*_,p?k:Math.round(k),p?Y:Math.round(Y),p?ge:Math.round(k+ge)-Math.round(k),p?ye:Math.round(Y+ye)-Math.round(Y)),F.clipExtent&&L.restore()}})}const N=pi(a);return h.getTriangles().forEach(function(F,K,X){const k=F.source,Y=F.target;let ge=k[0][0],ye=k[0][1],me=k[1][0],de=k[1][1],Q=k[2][0],ve=k[2][1];const re=R((Y[0][0]-N[0])/l),rt=R(-(Y[0][1]-N[1])/l),ut=R((Y[1][0]-N[0])/l),Tt=R(-(Y[1][1]-N[1])/l),Ie=R((Y[2][0]-N[0])/l),Te=R(-(Y[2][1]-N[1])/l),qe=ge,Gt=ye;ge=0,ye=0,me-=qe,de-=Gt,Q-=qe,ve-=Gt;const Qt=[[me,de,0,0,ut-re],[Q,ve,0,0,Ie-re],[0,0,me,de,Tt-rt],[0,0,Q,ve,Te-rt]],ht=Fm(Qt);if(!ht)return;if(E.save(),E.beginPath(),sy()||!p){E.moveTo(ut,Tt);const We=4,Jt=re-ut,Xt=rt-Tt;for(let ct=0;ct<We;ct++)E.lineTo(ut+R((ct+1)*Jt/We),Tt+R(ct*Xt/(We-1))),ct!=We-1&&E.lineTo(ut+R((ct+1)*Jt/We),Tt+R((ct+1)*Xt/(We-1)));E.lineTo(Ie,Te)}else E.moveTo(ut,Tt),E.lineTo(re,rt),E.lineTo(Ie,Te);E.clip(),E.transform(ht[0],ht[2],ht[1],ht[3],re,rt),E.translate(P[0]-qe,P[3]-Gt);let be;if(L)be=L.canvas,E.scale(D,-D);else{const We=f[0],Jt=We.extent;be=We.image,E.scale(pe(Jt)/be.width,-at(Jt)/be.height)}E.drawImage(be,0,0),E.restore()}),L&&(Vr(L),Sn.push(L.canvas)),m&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,h.getTriangles().forEach(function(F,K,X){const k=F.target,Y=(k[0][0]-N[0])/l,ge=-(k[0][1]-N[1])/l,ye=(k[1][0]-N[0])/l,me=-(k[1][1]-N[1])/l,de=(k[2][0]-N[0])/l,Q=-(k[2][1]-N[1])/l;E.beginPath(),E.moveTo(ye,me),E.lineTo(Y,ge),E.lineTo(de,Q),E.closePath(),E.stroke()}),E.restore()),E.canvas}class oy extends Za{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),o=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?o?Ht(n,o):n:o;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let h=this.sourceTileGrid_.getExtent();const f=a?Ht(l,a):l;if(Ur(f)===0){this.state=U.EMPTY;return}n&&(h?h=Ht(h,n):h=n);const _=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),m=e.targetProj,p=Ff(t,m,f,_);if(!isFinite(p)||p<=0){this.state=U.EMPTY;return}const v=e.errorThreshold!==void 0?e.errorThreshold:Af;if(this.triangulation_=new Lf(t,m,f,h,p*v,_),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let w=this.triangulation_.calculateSourceExtent();if(h&&(t.canWrapX()?(w[1]=Fe(w[1],h[1],h[3]),w[3]=Fe(w[3],h[1],h[3])):w=Ht(w,h)),!Ur(w))this.state=U.EMPTY;else{let E=0,R=0;t.canWrapX()&&(E=pe(n),R=Math.floor((w[0]-n[0])/E)),iu(w.slice(),t,!0).forEach(L=>{const A=this.sourceTileGrid_.getTileRangeForExtentAndZ(L,this.sourceZ_),D=e.getTileFunction;for(let N=A.minX;N<=A.maxX;N++)for(let F=A.minY;F<=A.maxY;F++){const K=D(this.sourceZ_,N,F,this.pixelRatio_);if(K){const X=R*E;this.sourceTiles_.push({tile:K,offset:X})}}++R}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(E=>{const R=E.tile;if(!R||R.getState()!==U.LOADED)return;const P=R.getSize(),L=this.gutter_;let A;const D=ey(R.getData());D?A=D:(t=!0,A=ny(Ao(R.getData())));const N=[P[0]+2*L,P[1]+2*L],F=A instanceof Float32Array,K=N[0]*N[1],X=F?Float32Array:Uint8ClampedArray,k=new X(A.buffer),Y=X.BYTES_PER_ELEMENT,ge=Y*k.length/K,ye=k.byteLength/N[1],me=Math.floor(ye/Y/N[0]),de=K*me;let Q=k;if(k.length!==de){Q=new X(de);let rt=0,ut=0;const Tt=N[0]*me;for(let Ie=0;Ie<N[1];++Ie){for(let Te=0;Te<Tt;++Te)Q[rt++]=k[ut+Te];ut+=ye/Y}}const ve=this.sourceTileGrid_.getTileCoordExtent(R.tileCoord);ve[0]+=E.offset,ve[2]+=E.offset;const re=this.clipExtent_?.slice();re&&(re[0]+=E.offset,re[2]+=E.offset),e.push({extent:ve,clipExtent:re,data:new Uint8ClampedArray(Q.buffer),dataType:X,bytesPerPixel:ge,pixelSize:N})}),this.sourceTiles_.length=0,e.length===0){this.state=U.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),l=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],h=this.targetTileGrid_.getResolution(n),f=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let m,p;const v=e[0].bytesPerPixel,w=Math.ceil(v/3);for(let E=w-1;E>=0;--E){const R=[];for(let F=0,K=e.length;F<K;++F){const X=e[F],k=X.data,Y=X.pixelSize,ge=Y[0],ye=Y[1],me=He(ge,ye,Sn),de=me.createImageData(ge,ye),Q=de.data;let ve=E*3;for(let re=0,rt=Q.length;re<rt;re+=4)Q[re]=k[ve],Q[re+1]=k[ve+1],Q[re+2]=k[ve+2],Q[re+3]=255,ve+=v;me.putImageData(de,0,0),R.push({extent:X.extent,clipExtent:X.clipExtent,image:me.canvas})}const P=Of(l,a,this.pixelRatio_,f,this.sourceTileGrid_.getExtent(),h,_,this.triangulation_,R,this.gutter_,!1,!1,!1);for(let F=0,K=R.length;F<K;++F){const k=R[F].image.getContext("2d");Vr(k),Sn.push(k.canvas)}const L=P.getContext("2d"),A=L.getImageData(0,0,P.width,P.height);Vr(L),Sn.push(P),m||(p=new Uint8ClampedArray(v*A.width*A.height),m=new e[0].dataType(p.buffer));const D=A.data;let N=E*3;for(let F=0,K=D.length;F<K;F+=4)D[F+3]===255?(p[N]=D[F],p[N+1]=D[F+1],p[N+2]=D[F+2]):(p[N]=0,p[N+1]=0,p[N+2]=0),N+=v}if(t){const E=He(l,a),R=new ImageData(m,l);E.putImageData(R,0,0),this.reprojData_=E.canvas}else this.reprojData_=m;this.reprojSize_=[Math.round(l*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=U.LOADED,this.changed()}load(){if(this.state!==U.IDLE&&this.state!==U.ERROR)return;this.state=U.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==U.IDLE&&n!==U.LOADING)return;e++;const o=ne(t,H.CHANGE,()=>{const l=t.getState();(l==U.LOADED||l==U.ERROR||l==U.EMPTY)&&(ce(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==U.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(ce),this.sourcesListenerKeys_=null}}class Ba extends Nu{constructor(e,t,n,o,l,a,h,f,_,m,p,v){super(l,U.IDLE,v),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=h,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=o,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const w=o.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let R=this.sourceTileGrid_.getExtent();const P=E?Ht(w,E):w;if(Ur(P)===0){this.state=U.EMPTY;return}const L=e.getExtent();L&&(R?R=Ht(R,L):R=L);const A=o.getResolution(this.wrappedTileCoord_[0]),D=Ff(e,n,P,A);if(!isFinite(D)||D<=0){this.state=U.EMPTY;return}const N=m!==void 0?m:Af;if(this.triangulation_=new Lf(e,n,P,R,D*N,A),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let F=this.triangulation_.calculateSourceExtent();if(R&&(e.canWrapX()?(F[1]=Fe(F[1],R[1],R[3]),F[3]=Fe(F[3],R[1],R[3])):F=Ht(F,R)),!Ur(F))this.state=U.EMPTY;else{let K=0,X=0;e.canWrapX()&&(K=pe(L),X=Math.floor((F[0]-L[0])/K)),iu(F.slice(),e,!0).forEach(Y=>{const ge=t.getTileRangeForExtentAndZ(Y,this.sourceZ_);for(let ye=ge.minX;ye<=ge.maxX;ye++)for(let me=ge.minY;me<=ge.maxY;me++){const de=_(this.sourceZ_,ye,me,h);if(de){const Q=X*K;this.sourceTiles_.push({tile:de,offset:Q})}}++X}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&n.getState()==U.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);o[0]+=t.offset,o[2]+=t.offset;const l=this.clipExtent_?.slice();l&&(l[0]+=t.offset,l[2]+=t.offset),e.push({extent:o,clipExtent:l,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=U.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),o=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),h=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Of(o,l,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),a,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=U.LOADED}this.changed()}load(){if(this.state==U.IDLE){this.state=U.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==U.IDLE||n==U.LOADING){e++;const o=ne(t,H.CHANGE,l=>{const a=t.getState();(a==U.LOADED||a==U.ERROR||a==U.EMPTY)&&(ce(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,o){t.getState()==U.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ce),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Vr(this.canvas_.getContext("2d")),Sn.push(this.canvas_),this.canvas_=null),super.release()}}function La(i,e,t,n){return`${i},${q0(e,t,n)}`}function Fa(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],o=n.has(e);return o||n.add(e),!o}function ly(i,e,t){const n=i[t];return n?n.delete(e):!1}function Id(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Ht(e,hi(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const o=n.getTileGridForProjection(i.viewState.projection).getExtent();o&&(e=Ht(e,o))}return e}class ay extends l0{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=qn(),this.tempTileRange_=new Gu(0,0,0,0),this.tempTileCoord_=Mo(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new H0(n),this.renderedProjection_=void 0,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,o){const l=this.tileCache_,h=this.getLayer().getSource(),f=La(h.getKey(),e,t,n);let _;if(l.containsKey(f))_=l.get(f);else{if(_=h.getTile(e,t,n,o.pixelRatio,o.viewState.projection),!_)return null;l.set(f,_)}return _}getTile(e,t,n,o){const l=this.getOrCreateTile(e,t,n,o);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),o=zt(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!$a(l,o))return null;const a=t.viewState,h=n.getRenderSource(),f=h.getTileGridForProjection(a.projection),_=h.getTilePixelRatio(t.pixelRatio);for(let m=f.getZForResolution(a.resolution);m>=f.getMinZoom();--m){const p=f.getTileCoordForCoordAndZ(o,m),v=this.getTile(m,p[1],p[2],t);if(!v||v.getState()!==U.LOADED)continue;const w=f.getOrigin(m),E=Ct(f.getTileSize(m)),R=f.getResolution(m);let P;if(v instanceof Cf||v instanceof Ba)P=v.getImage();else if(v instanceof Za){if(P=Ao(v.getData()),!P)continue}else continue;const L=Math.floor(_*((o[0]-w[0])/R-p[1]*E[0])),A=Math.floor(_*((w[1]-o[1])/R-p[2]*E[1])),D=Math.round(_*h.getGutterForProjection(a.projection));return this.getImageData(P,L+D,A+D)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,o,l){const a=e.viewState,h=this.getLayer(),f=h.getRenderSource(),_=f.getTileGridForProjection(a.projection),m=Ce(f);m in e.wantedTiles||(e.wantedTiles[m]={});const p=e.wantedTiles[m],v=h.getMapInternal(),w=Math.max(n-l,_.getMinZoom(),_.getZForResolution(Math.min(h.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(h.getMinZoom(),0)):_.getResolution(0)),f.zDirection));for(let E=n;E>=w;--E){const R=_.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),P=_.getResolution(E);for(let L=R.minX;L<=R.maxX;++L)for(let A=R.minY;A<=R.maxY;++A){const D=this.getTile(E,L,A,e);if(!D||!Fa(o,D,E))continue;const F=D.getKey();if(p[F]=!0,D.getState()===U.IDLE&&!e.tileQueue.isKeyQueued(F)){const K=Mo(E,L,A,this.tempTileCoord_);e.tileQueue.enqueue([D,m,_.getTileCoordCenter(K),P])}}}}findStaleTile_(e,t){const n=this.tileCache_,o=e[0],l=e[1],a=e[2],h=this.getStaleKeys();for(let f=0;f<h.length;++f){const _=La(h[f],o,l,a);if(n.containsKey(_)){const m=n.get(_);if(m.getState()===U.LOADED)return m.endTransition(Ce(this)),Fa(t,m,o),!0}}return!1}findAltTiles_(e,t,n,o){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let a=!0;const h=this.tileCache_,_=this.getLayer().getRenderSource().getKey();for(let m=l.minX;m<=l.maxX;++m)for(let p=l.minY;p<=l.maxY;++p){const v=La(_,n,m,p);let w=!1;if(h.containsKey(v)){const E=h.get(v);E.getState()===U.LOADED&&(Fa(o,E,n),w=!0)}w||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],o=e.viewState,l=o.projection,a=o.resolution,h=o.center,f=e.pixelRatio,_=this.getLayer(),m=_.getSource(),p=m.getRevision(),v=m.getTileGridForProjection(l),w=v.getZForResolution(a,m.zDirection),E=v.getResolution(w),R=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==R&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=R):this.renderedSourceKey_=R;let P=e.extent;const L=m.getTilePixelRatio(f);this.prepareContainer(e,t);const A=this.context.canvas.width,D=this.context.canvas.height,N=n.extent&&hi(n.extent);N&&(P=Ht(P,hi(n.extent)));const F=E*A/2/L,K=E*D/2/L,X=[h[0]-F,h[1]-K,h[0]+F,h[1]+K],k={};this.renderedTiles.length=0;const Y=_.getPreload();if(e.nextExtent){const Ie=v.getZForResolution(o.nextResolution,m.zDirection),Te=Id(e,e.nextExtent);this.enqueueTiles(e,Te,Ie,k,Y)}const ge=Id(e,P);if(this.enqueueTiles(e,ge,w,k,0),Y>0&&setTimeout(()=>{this.enqueueTiles(e,ge,w-1,k,Y-1)},0),!(w in k))return this.container;const ye=Ce(this),me=e.time;for(const Ie of k[w]){const Te=Ie.getState();if((Ie instanceof Ba||Ie instanceof oy)&&Te===U.EMPTY)continue;const qe=Ie.tileCoord;if(Te===U.LOADED&&Ie.getAlpha(ye,me)===1){Ie.endTransition(ye);continue}if(this.renderComplete=!1,this.findStaleTile_(qe,k)){ly(k,Ie,w),e.animate=!0;continue}if(this.findAltTiles_(v,qe,w+1,k))continue;const ht=v.getMinZoom();for(let be=w-1;be>=ht&&!this.findAltTiles_(v,qe,be,k);--be);}const de=E/a*f/L,Q=this.getRenderContext(e);nr(this.tempTransform,A/2,D/2,de,de,0,-A/2,-D/2),n.extent&&this.clipUnrotated(Q,e,N),m.getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,e);const ve=Object.keys(k).map(Number);ve.sort(qr);let re;const rt=[],ut=[];for(let Ie=ve.length-1;Ie>=0;--Ie){const Te=ve[Ie],qe=m.getTilePixelSize(Te,f,l),Qt=v.getResolution(Te)/E,ht=qe[0]*Qt*de,be=qe[1]*Qt*de,We=v.getTileCoordForCoordAndZ(pi(X),Te),Jt=v.getTileCoordExtent(We),Xt=zt(this.tempTransform,[L*(Jt[0]-X[0])/E,L*(X[3]-Jt[3])/E]),ct=L*m.getGutterForProjection(l);for(const Ne of k[Te]){if(Ne.getState()!==U.LOADED)continue;const bn=Ne.tileCoord,st=We[1]-bn[1],tl=Math.round(Xt[0]-(st-1)*ht),ls=We[2]-bn[2],nl=Math.round(Xt[1]-(ls-1)*be),$t=Math.round(Xt[0]-st*ht),en=Math.round(Xt[1]-ls*be),Ci=tl-$t,tn=nl-en,as=ve.length===1;let ar=!1;re=[$t,en,$t+Ci,en,$t+Ci,en+tn,$t,en+tn];for(let xi=0,Qn=rt.length;xi<Qn;++xi)if(!as&&Te<ut[xi]){const dt=rt[xi];es([$t,en,$t+Ci,en+tn],[dt[0],dt[3],dt[4],dt[7]])&&(ar||(Q.save(),ar=!0),Q.beginPath(),Q.moveTo(re[0],re[1]),Q.lineTo(re[2],re[3]),Q.lineTo(re[4],re[5]),Q.lineTo(re[6],re[7]),Q.moveTo(dt[6],dt[7]),Q.lineTo(dt[4],dt[5]),Q.lineTo(dt[2],dt[3]),Q.lineTo(dt[0],dt[1]),Q.clip())}rt.push(re),ut.push(Te),this.drawTile(Ne,e,$t,en,Ci,tn,ct,as),ar&&Q.restore(),this.renderedTiles.unshift(Ne),this.updateUsedTiles(e.usedTiles,m,Ne)}}this.renderedRevision=p,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!Xr(this.renderedExtent_,X),this.renderedExtent_=X,this.renderedPixelRatio=f,this.renderedProjection=l,this.postRender(this.context,e),n.extent&&Q.restore(),Q.imageSmoothingEnabled=!0;const Tt=(Ie,Te)=>{const qe=Ce(m),Gt=Te.wantedTiles[qe],Qt=Gt?Object.keys(Gt).length:0;this.updateCacheSize(Qt),this.tileCache_.expireCache()};return e.postRenderFunctions.push(Tt),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,o,l,a,h,f){let _;if(e instanceof Za){if(_=Ao(e.getData()),!_)throw new Error("Rendering array data is not yet supported")}else _=this.getTileImage(e);if(!_)return;const m=this.getRenderContext(t),p=Ce(this),v=t.layerStatesArray[t.layerIndex],w=v.opacity*(f?e.getAlpha(p,t.time):1),E=w!==m.globalAlpha;E&&(m.save(),m.globalAlpha=w),m.drawImage(_,h,h,_.width-2*h,_.height-2*h,n,o,l,a),E&&m.restore(),w!==v.opacity?t.animate=!0:f&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const o=Ce(t);o in e||(e[o]={}),e[o][n.getKey()]=!0}}class uy extends $0{constructor(e){super(e)}createRenderer(){return new ay(this,{cacheSize:this.getCacheSize()})}}const Oa={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Vi=[0,0,0],Wn=5;class Nf{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ae(Sm(this.resolutions_,(o,l)=>l-o),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let o=0,l=this.resolutions_.length-1;o<l;++o)if(!t)t=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ae(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=pi(n)),ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ae(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Qa,ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((o,l)=>{const a=new Gu(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(n){const h=this.getTileRangeForExtentAndZ(n,l);a.minX=Math.max(h.minX,a.minX),a.maxX=Math.min(h.maxX,a.maxX),a.minY=Math.max(h.minY,a.minY),a.maxY=Math.min(h.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const o=this.getTileRangeForExtentAndZ(e,t);for(let l=o.minX,a=o.maxX;l<=a;++l)for(let h=o.minY,f=o.maxY;h<=f;++h)n([t,l,h])}forEachTileCoordParentTileRange(e,t,n,o){let l,a,h,f=null,_=e[0]-1;for(this.zoomFactor_===2?(a=e[1],h=e[2]):f=this.getTileCoordExtent(e,o);_>=this.minZoom;){if(a!==void 0&&h!==void 0?(a=Math.floor(a/2),h=Math.floor(h/2),l=Yi(a,a,h,h,n)):l=this.getTileRangeForExtentAndZ(f,_,n),t(_,l))return!0;--_}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return Yi(l,l+1,a,a+1,t)}const o=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const o=e[0],l=e[1],a=e[2];if(t===o)return Yi(l,a,l,a,n);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-o),_=Math.floor(l*f),m=Math.floor(a*f);if(t<o)return Yi(_,_,m,m,n);const p=Math.floor(f*(l+1))-1,v=Math.floor(f*(a+1))-1;return Yi(_,p,m,v,n)}const h=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Vi);const o=Vi[1],l=Vi[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Vi);const a=Vi[1],h=Vi[2];return Yi(o,a,l,h,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),o=Ct(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*o[0]*n,t[1]-(e[2]+.5)*o[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),o=this.getResolution(e[0]),l=Ct(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*l[0]*o,h=n[1]-(e[2]+1)*l[1]*o,f=a+l[0]*o,_=h+l[1]*o;return sr(a,h,f,_,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,o,l){const a=this.getZForResolution(n),h=n/this.getResolution(a),f=this.getOrigin(a),_=Ct(this.getTileSize(a),this.tmpSize_);let m=h*(e-f[0])/n/_[0],p=h*(f[1]-t)/n/_[1];return o?(m=no(m,Wn)-1,p=no(p,Wn)-1):(m=to(m,Wn),p=to(p,Wn)),Mo(a,m,p,l)}getTileCoordForXYAndZ_(e,t,n,o,l){const a=this.getOrigin(n),h=this.getResolution(n),f=Ct(this.getTileSize(n),this.tmpSize_);let _=(e-a[0])/h/f[0],m=(a[1]-t)/h/f[1];return o?(_=no(_,Wn)-1,m=no(m,Wn)-1):(_=to(_,Wn),m=to(m,Wn)),Mo(n,_,m,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=qa(this.resolutions_,e,t||0);return Fe(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return qd(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let o=this.minZoom;o<t;++o)n[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=n}}function Df(i){let e=i.getDefaultTileGrid();return e||(e=fy(i),i.setDefaultTileGrid(e)),e}function hy(i,e,t){const n=e[0],o=i.getTileCoordCenter(e),l=Xu(t);if(!$a(l,o)){const a=pe(l),h=Math.ceil((l[0]-o[0])/a);return o[0]+=a*h,i.getTileCoordForCoordAndZ(o,n)}return e}function cy(i,e,t,n){n=n!==void 0?n:"top-left";const o=kf(i,e,t);return new Nf({extent:i,origin:Vm(i,n),resolutions:o,tileSize:t})}function dy(i){const e=i||{},t=e.extent||Oe("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:kf(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Nf(n)}function kf(i,e,t,n){e=e!==void 0?e:Om,t=Ct(t!==void 0?t:Qa);const o=at(i),l=pe(i);n=n>0?n:Math.max(l/t[0],o/t[1]);const a=e+1,h=new Array(a);for(let f=0;f<a;++f)h[f]=n/Math.pow(2,f);return h}function fy(i,e,t,n){const o=Xu(i);return cy(o,e,t,n)}function Xu(i){i=Oe(i);let e=i.getExtent();if(!e){const t=180*Ja.degrees/i.getMetersPerUnit();e=sr(-t,-t,t,t)}return e}class gy extends wf{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ct(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ce(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,o,l){return B()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Df(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const o=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),a=Ct(o.getTileSize(e),this.tmpSize);return l==1?a:Y_(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=hy(n,e,t)),J0(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class my extends Pn{constructor(e,t){super(e),this.tile=t}}const _y=/\{z\}/g,py=/\{x\}/g,yy=/\{y\}/g,vy=/\{-y\}/g;function Ey(i,e,t,n,o){return i.replace(_y,e.toString()).replace(py,t.toString()).replace(yy,n.toString()).replace(vy,function(){if(o===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(o-n).toString()})}function wy(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),o=t[2].charCodeAt(0);let l;for(l=n;l<=o;++l)e.push(i.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let o=parseInt(t[1],10);o<=n;o++)e.push(i.replace(t[0],o.toString()));return e}return e.push(i),e}function Cy(i,e){return function(t,n,o){if(!t)return;let l;const a=t[0];if(e){const h=e.getFullTileRange(a);h&&(l=h.getHeight()-1)}return Ey(i,a,t[1],t[2],l)}}function xy(i,e){const t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=Cy(i[o],e);return Ry(n)}function Ry(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const o=b0(e),l=Qi(o,i.length);return i[l](e,t,n)}}class Uu extends gy{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Uu.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Ce(t),o=t.getState();let l;o==U.LOADING?(this.tileLoadingKeys_[n]=!0,l=Oa.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=o==U.ERROR?Oa.TILELOADERROR:o==U.LOADED?Oa.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new my(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=wy(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(xy(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class Iy extends Uu{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ty,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Cf,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!mo(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||mo(t,e)))return this.tileGrid;const n=Ce(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Df(e)),this.tileGridForProjection[n]}createTile_(e,t,n,o,l,a){const h=[e,t,n],f=this.getTileCoordForTileUrlFunction(h,l),_=f?this.tileUrlFunction(f,o,l):void 0,m=new this.tileClass(h,_!==void 0?U.IDLE:U.EMPTY,_!==void 0?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=a,m.addEventListener(H.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,n,o,l){const a=this.getProjection();if(!a||!l||mo(a,l))return this.getTileInternal(e,t,n,o,a||l);const h=[e,t,n],f=this.getKey(),_=this.getTileGridForProjection(a),m=this.getTileGridForProjection(l),p=this.getTileCoordForTileUrlFunction(h,l),v=new Ba(a,_,l,m,h,p,this.getTilePixelRatio(o),this.getGutter(),(w,E,R,P)=>this.getTileInternal(w,E,R,P,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=f,v}getTileInternal(e,t,n,o,l){const a=this.getKey();return this.createTile_(e,t,n,o,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Oe(e);if(n){const o=Ce(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=t)}}}function Ty(i,e){i.getImage().src=e}class Sy extends Iy{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:dy({extent:Xu(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Py='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class My extends Sy{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Py];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",o=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}class Ay{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Jo,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Oe(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Oe(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return B()}readFeature(e,t){return B()}readFeatures(e,t){return B()}readGeometry(e,t){return B()}readProjection(e){return B()}writeFeature(e,t){return B()}writeFeatures(e,t){return B()}writeGeometry(e,t){return B()}}function ju(i,e,t){const n=t?Oe(t.featureProjection):null,o=t?Oe(t.dataProjection):null;let l=i;if(n&&o&&!mo(n,o)){e&&(l=i.clone());const a=e?n:o,h=e?o:n;a.getUnits()==="tile-pixels"?l.transform(a,h):l.applyTransform(jr(a,h))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),h=function(f){for(let _=0,m=f.length;_<m;++_)f[_]=Math.round(f[_]*a)/a;return f};l===i&&(l=i.clone()),l.applyTransform(h)}return l}const Ly={Point:ir,LineString:rr,Polygon:Bn,MultiPoint:$o,MultiLineString:To,MultiPolygon:So};function Fy(i,e,t){return Array.isArray(e[0])?(Qd(i,0,e,t)||(i=i.slice(),Ga(i,0,e,t)),i):(wu(i,0,e,t)||(i=i.slice(),vo(i,0,e,t)),i)}function zf(i,e){const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(l=>zf({...i,geometry:l})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const o=t.layout.length;return ju(new It(n,n==="Polygon"?Fy(t.flatCoordinates,t.ends,o):t.flatCoordinates,t.ends?.flat(),o,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function Wu(i,e){if(!i)return null;if(Array.isArray(i)){const n=i.map(o=>Wu(o,e));return new Io(n)}const t=Ly[i.type];return ju(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}class Oy extends Ay{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(co(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(co(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return B()}readFeaturesFromObject(e,t){return B()}readGeometry(e,t){return this.readGeometryFromObject(co(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return B()}readProjection(e){return this.readProjectionFromObject(co(e))}readProjectionFromObject(e){return B()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return B()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return B()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return B()}}function co(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}class Ny extends Oy{constructor(e){e=e||{},super(),this.dataProjection=Oe(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Oe(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const o=Yu(n.geometry);if(this.featureClass===It)return zf({geometry:o,id:n.id,properties:n.properties},t);const l=new Jo;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(Wu(o,t)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,t){const n=e;let o=null;if(n.type==="FeatureCollection"){const l=e;o=[];const a=l.features;for(let h=0,f=a.length;h<f;++h){const _=this.readFeatureFromObject(a[h],t);_&&o.push(_)}}else o=[this.readFeatureFromObject(e,t)];return o.flat()}readGeometryFromObject(e,t){return Dy(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Oe(t.properties.name);else if(t.type==="EPSG")n=Oe("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},o=e.getId();if(o!==void 0&&(n.id=o),!e.hasProperties())return n;const l=e.getProperties(),a=e.getGeometry();return a&&(n.geometry=Ha(a,t),delete l[e.getGeometryName()]),tr(l)||(n.properties=l),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let o=0,l=e.length;o<l;++o)n.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Ha(e,this.adaptOptions(t))}}function Yu(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=zy(i);break}case"LineString":{t=Gy(i);break}case"Polygon":{t=Wy(i);break}case"MultiPoint":{t=Uy(i);break}case"MultiLineString":{t=Xy(i);break}case"MultiPolygon":{t=jy(i);break}case"GeometryCollection":{t=ky(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function Dy(i,e){const t=Yu(i);return Wu(t,e)}function ky(i,e){return i.geometries.map(function(n){return Yu(n)})}function zy(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:vi(e.length)}}function Gy(i){const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:vi(e[0]?.length||2)}}function Xy(i){const e=i.coordinates,t=e[0]?.[0]?.length||2,n=[],o=ts(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:o,layout:vi(t)}}function Uy(i){const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:vi(e[0]?.length||2)}}function jy(i){const e=i.coordinates,t=[],n=e[0]?.[0]?.[0].length||2,o=Yd(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:o,layout:vi(n)}}function Wy(i){const e=i.coordinates,t=[],n=e[0]?.[0]?.length,o=ts(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:o,layout:vi(n)}}function Ha(i,e){i=ju(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=Hy(i);break}case"LineString":{n=Ky(i);break}case"Polygon":{n=qy(i,e);break}case"MultiPoint":{n=Zy(i);break}case"MultiLineString":{n=Vy(i);break}case"MultiPolygon":{n=By(i,e);break}case"GeometryCollection":{n=Yy(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function Yy(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return Ha(n,e)})}}function Ky(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function Vy(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Zy(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function By(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function Hy(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function qy(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}var Gf={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by=function(e){var t={},n=Vn,o=_m,l=Object.assign;function a(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),_=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),E=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),F=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}function X(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case _:return"Portal";case v:return"Profiler";case p:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case E:return(r.displayName||"Context")+".Consumer";case w:return(r._context.displayName||"Context")+".Provider";case R:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return s=r.displayName||null,s!==null?s:X(r.type)||"Memo";case D:s=r._payload,r=r._init;try{return X(r(s))}catch{}}return null}function k(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(s);case 8:return s===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Y(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function ge(r){if(Y(r)!==r)throw Error(a(188))}function ye(r){var s=r.alternate;if(!s){if(s=Y(r),s===null)throw Error(a(188));return s!==r?null:r}for(var u=r,c=s;;){var d=u.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){u=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===u)return ge(d),r;if(g===c)return ge(d),s;g=g.sibling}throw Error(a(188))}if(u.return!==c.return)u=d,c=g;else{for(var y=!1,C=d.child;C;){if(C===u){y=!0,u=d,c=g;break}if(C===c){y=!0,c=d,u=g;break}C=C.sibling}if(!y){for(C=g.child;C;){if(C===u){y=!0,u=g,c=d;break}if(C===c){y=!0,c=g,u=d;break}C=C.sibling}if(!y)throw Error(a(189))}}if(u.alternate!==c)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?r:s}function me(r){return r=ye(r),r!==null?de(r):null}function de(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=de(r);if(s!==null)return s;r=r.sibling}return null}function Q(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){if(r.tag!==4){var s=Q(r);if(s!==null)return s}r=r.sibling}return null}var ve=Array.isArray,re=e.getPublicInstance,rt=e.getRootHostContext,ut=e.getChildHostContext,Tt=e.prepareForCommit,Ie=e.resetAfterCommit,Te=e.createInstance,qe=e.appendInitialChild,Gt=e.finalizeInitialChildren,Qt=e.prepareUpdate,ht=e.shouldSetTextContent,be=e.createTextInstance,We=e.scheduleTimeout,Jt=e.cancelTimeout,Xt=e.noTimeout,ct=e.isPrimaryRenderer,Ne=e.supportsMutation,bn=e.supportsPersistence,st=e.supportsHydration,tl=e.getInstanceFromNode,ls=e.preparePortalMount,nl=e.getCurrentEventPriority,$t=e.detachDeletedInstance,en=e.supportsMicrotasks,Ci=e.scheduleMicrotask,tn=e.supportsTestSelectors,as=e.findFiberRoot,ar=e.getBoundingRect,xi=e.getTextContent,Qn=e.isHiddenSubtree,dt=e.matchAccessibilityRole,jf=e.setFocusIfFocusable,Wf=e.setupIntersectionObserver,Yf=e.appendChild,Kf=e.appendChildToContainer,Vf=e.commitTextUpdate,Zf=e.commitMount,Bf=e.commitUpdate,Hf=e.insertBefore,qf=e.insertInContainerBefore,bf=e.removeChild,Qf=e.removeChildFromContainer,Ku=e.resetTextContent,Jf=e.hideInstance,$f=e.hideTextInstance,eg=e.unhideInstance,tg=e.unhideTextInstance,ng=e.clearContainer,ig=e.cloneInstance,Vu=e.createContainerChildSet,Zu=e.appendChildToContainerChildSet,rg=e.finalizeContainerChildren,il=e.replaceContainerChildren,Bu=e.cloneHiddenInstance,Hu=e.cloneHiddenTextInstance,sg=e.canHydrateInstance,og=e.canHydrateTextInstance,lg=e.canHydrateSuspenseInstance,qu=e.isSuspenseInstancePending,rl=e.isSuspenseInstanceFallback,ag=e.getSuspenseInstanceFallbackErrorDetails,ug=e.registerSuspenseInstanceRetry,us=e.getNextHydratableSibling,hg=e.getFirstHydratableChild,cg=e.getFirstHydratableChildWithinContainer,dg=e.getFirstHydratableChildWithinSuspenseInstance,fg=e.hydrateInstance,gg=e.hydrateTextInstance,mg=e.hydrateSuspenseInstance,_g=e.getNextHydratableInstanceAfterSuspenseInstance,pg=e.commitHydratedContainer,yg=e.commitHydratedSuspenseInstance,vg=e.clearSuspenseBoundary,Eg=e.clearSuspenseBoundaryFromContainer,wg=e.shouldDeleteUnhydratedTailInstances,Cg=e.didNotMatchHydratedContainerTextInstance,xg=e.didNotMatchHydratedTextInstance,sl;function ur(r){if(sl===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);sl=s&&s[1]||""}return`
`+sl+r}var ol=!1;function ll(r,s){if(!r||ol)return"";ol=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(O){var c=O}Reflect.construct(r,[],s)}else{try{s.call()}catch(O){c=O}r.call(s.prototype)}else{try{throw Error()}catch(O){c=O}r()}}catch(O){if(O&&c&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),g=c.stack.split(`
`),y=d.length-1,C=g.length-1;1<=y&&0<=C&&d[y]!==g[C];)C--;for(;1<=y&&0<=C;y--,C--)if(d[y]!==g[C]){if(y!==1||C!==1)do if(y--,C--,0>C||d[y]!==g[C]){var T=`
`+d[y].replace(" at new "," at ");return r.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",r.displayName)),T}while(1<=y&&0<=C);break}}}finally{ol=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?ur(r):""}var Rg=Object.prototype.hasOwnProperty,al=[],Ri=-1;function An(r){return{current:r}}function Ee(r){0>Ri||(r.current=al[Ri],al[Ri]=null,Ri--)}function _e(r,s){Ri++,al[Ri]=r.current,r.current=s}var Ln={},Qe=An(Ln),ft=An(!1),Jn=Ln;function Ii(r,s){var u=r.type.contextTypes;if(!u)return Ln;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in u)d[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function gt(r){return r=r.childContextTypes,r!=null}function hs(){Ee(ft),Ee(Qe)}function bu(r,s,u){if(Qe.current!==Ln)throw Error(a(168));_e(Qe,s),_e(ft,u)}function Qu(r,s,u){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return u;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(a(108,k(r)||"Unknown",d));return l({},u,c)}function cs(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ln,Jn=Qe.current,_e(Qe,r),_e(ft,ft.current),!0}function Ju(r,s,u){var c=r.stateNode;if(!c)throw Error(a(169));u?(r=Qu(r,s,Jn),c.__reactInternalMemoizedMergedChildContext=r,Ee(ft),Ee(Qe),_e(Qe,r)):Ee(ft),_e(ft,u)}var Ut=Math.clz32?Math.clz32:Sg,Ig=Math.log,Tg=Math.LN2;function Sg(r){return r>>>=0,r===0?32:31-(Ig(r)/Tg|0)|0}var ds=64,fs=4194304;function hr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function gs(r,s){var u=r.pendingLanes;if(u===0)return 0;var c=0,d=r.suspendedLanes,g=r.pingedLanes,y=u&268435455;if(y!==0){var C=y&~d;C!==0?c=hr(C):(g&=y,g!==0&&(c=hr(g)))}else y=u&~d,y!==0?c=hr(y):g!==0&&(c=hr(g));if(c===0)return 0;if(s!==0&&s!==c&&!(s&d)&&(d=c&-c,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if(c&4&&(c|=u&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)u=31-Ut(s),d=1<<u,c|=r[u],s&=~d;return c}function Pg(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mg(r,s){for(var u=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var y=31-Ut(g),C=1<<y,T=d[y];T===-1?(!(C&u)||C&c)&&(d[y]=Pg(C,s)):T<=s&&(r.expiredLanes|=C),g&=~C}}function ul(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $u(){var r=ds;return ds<<=1,!(ds&4194240)&&(ds=64),r}function hl(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function cr(r,s,u){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ut(s),r[s]=u}function Ag(r,s){var u=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<u;){var d=31-Ut(u),g=1<<d;s[d]=0,c[d]=-1,r[d]=-1,u&=~g}}function cl(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var c=31-Ut(u),d=1<<c;d&s|r[c]&s&&(r[c]|=s),u&=~d}}var se=0;function eh(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var dl=o.unstable_scheduleCallback,th=o.unstable_cancelCallback,Lg=o.unstable_shouldYield,Fg=o.unstable_requestPaint,Ge=o.unstable_now,fl=o.unstable_ImmediatePriority,Og=o.unstable_UserBlockingPriority,gl=o.unstable_NormalPriority,Ng=o.unstable_IdlePriority,ms=null,nn=null;function Dg(r){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}}function kg(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var jt=typeof Object.is=="function"?Object.is:kg,_n=null,_s=!1,ml=!1;function nh(r){_n===null?_n=[r]:_n.push(r)}function zg(r){_s=!0,nh(r)}function rn(){if(!ml&&_n!==null){ml=!0;var r=0,s=se;try{var u=_n;for(se=1;r<u.length;r++){var c=u[r];do c=c(!0);while(c!==null)}_n=null,_s=!1}catch(d){throw _n!==null&&(_n=_n.slice(r+1)),dl(fl,rn),d}finally{se=s,ml=!1}}return null}var Ti=[],Si=0,ps=null,ys=0,St=[],Pt=0,$n=null,pn=1,yn="";function ei(r,s){Ti[Si++]=ys,Ti[Si++]=ps,ps=r,ys=s}function ih(r,s,u){St[Pt++]=pn,St[Pt++]=yn,St[Pt++]=$n,$n=r;var c=pn;r=yn;var d=32-Ut(c)-1;c&=~(1<<d),u+=1;var g=32-Ut(s)+d;if(30<g){var y=d-d%5;g=(c&(1<<y)-1).toString(32),c>>=y,d-=y,pn=1<<32-Ut(s)+d|u<<d|c,yn=g+r}else pn=1<<g|u<<d|c,yn=r}function _l(r){r.return!==null&&(ei(r,1),ih(r,1,0))}function pl(r){for(;r===ps;)ps=Ti[--Si],Ti[Si]=null,ys=Ti[--Si],Ti[Si]=null;for(;r===$n;)$n=St[--Pt],St[Pt]=null,yn=St[--Pt],St[Pt]=null,pn=St[--Pt],St[Pt]=null}var xt=null,Mt=null,xe=!1,dr=!1,Wt=null;function rh(r,s){var u=Nt(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=r,s=r.deletions,s===null?(r.deletions=[u],r.flags|=16):s.push(u)}function sh(r,s){switch(r.tag){case 5:return s=sg(s,r.type,r.pendingProps),s!==null?(r.stateNode=s,xt=r,Mt=hg(s),!0):!1;case 6:return s=og(s,r.pendingProps),s!==null?(r.stateNode=s,xt=r,Mt=null,!0):!1;case 13:if(s=lg(s),s!==null){var u=$n!==null?{id:pn,overflow:yn}:null;return r.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Nt(18,null,null,0),u.stateNode=s,u.return=r,r.child=u,xt=r,Mt=null,!0}return!1;default:return!1}}function yl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function vl(r){if(xe){var s=Mt;if(s){var u=s;if(!sh(r,s)){if(yl(r))throw Error(a(418));s=us(u);var c=xt;s&&sh(r,s)?rh(c,u):(r.flags=r.flags&-4097|2,xe=!1,xt=r)}}else{if(yl(r))throw Error(a(418));r.flags=r.flags&-4097|2,xe=!1,xt=r}}}function oh(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;xt=r}function vs(r){if(!st||r!==xt)return!1;if(!xe)return oh(r),xe=!0,!1;if(r.tag!==3&&(r.tag!==5||wg(r.type)&&!ht(r.type,r.memoizedProps))){var s=Mt;if(s){if(yl(r))throw lh(),Error(a(418));for(;s;)rh(r,s),s=us(s)}}if(oh(r),r.tag===13){if(!st)throw Error(a(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Mt=_g(r)}else Mt=xt?us(r.stateNode):null;return!0}function lh(){for(var r=Mt;r;)r=us(r)}function Pi(){st&&(Mt=xt=null,dr=xe=!1)}function El(r){Wt===null?Wt=[r]:Wt.push(r)}var Gg=h.ReactCurrentBatchConfig;function Es(r,s){if(jt(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),c=Object.keys(s);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var d=u[c];if(!Rg.call(s,d)||!jt(r[d],s[d]))return!1}return!0}function Xg(r){switch(r.tag){case 5:return ur(r.type);case 16:return ur("Lazy");case 13:return ur("Suspense");case 19:return ur("SuspenseList");case 0:case 2:case 15:return r=ll(r.type,!1),r;case 11:return r=ll(r.type.render,!1),r;case 1:return r=ll(r.type,!0),r;default:return""}}function fr(r,s,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(a(309));var c=u.stateNode}if(!c)throw Error(a(147,r));var d=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(y){var C=d.refs;y===null?delete C[g]:C[g]=y},s._stringRef=g,s)}if(typeof r!="string")throw Error(a(284));if(!u._owner)throw Error(a(290,r))}return r}function ws(r,s){throw r=Object.prototype.toString.call(s),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function ah(r){var s=r._init;return s(r._payload)}function uh(r){function s(I,x){if(r){var S=I.deletions;S===null?(I.deletions=[x],I.flags|=16):S.push(x)}}function u(I,x){if(!r)return null;for(;x!==null;)s(I,x),x=x.sibling;return null}function c(I,x){for(I=new Map;x!==null;)x.key!==null?I.set(x.key,x):I.set(x.index,x),x=x.sibling;return I}function d(I,x){return I=Gn(I,x),I.index=0,I.sibling=null,I}function g(I,x,S){return I.index=S,r?(S=I.alternate,S!==null?(S=S.index,S<x?(I.flags|=2,x):S):(I.flags|=2,x)):(I.flags|=1048576,x)}function y(I){return r&&I.alternate===null&&(I.flags|=2),I}function C(I,x,S,G){return x===null||x.tag!==6?(x=ma(S,I.mode,G),x.return=I,x):(x=d(x,S),x.return=I,x)}function T(I,x,S,G){var V=S.type;return V===m?W(I,x,S.props.children,G,S.key):x!==null&&(x.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===D&&ah(V)===x.type)?(G=d(x,S.props),G.ref=fr(I,x,S),G.return=I,G):(G=Js(S.type,S.key,S.props,null,I.mode,G),G.ref=fr(I,x,S),G.return=I,G)}function O(I,x,S,G){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=_a(S,I.mode,G),x.return=I,x):(x=d(x,S.children||[]),x.return=I,x)}function W(I,x,S,G,V){return x===null||x.tag!==7?(x=li(S,I.mode,G,V),x.return=I,x):(x=d(x,S),x.return=I,x)}function q(I,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ma(""+x,I.mode,S),x.return=I,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case f:return S=Js(x.type,x.key,x.props,null,I.mode,S),S.ref=fr(I,null,x),S.return=I,S;case _:return x=_a(x,I.mode,S),x.return=I,x;case D:var G=x._init;return q(I,G(x._payload),S)}if(ve(x)||K(x))return x=li(x,I.mode,S,null),x.return=I,x;ws(I,x)}return null}function z(I,x,S,G){var V=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:C(I,x,""+S,G);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case f:return S.key===V?T(I,x,S,G):null;case _:return S.key===V?O(I,x,S,G):null;case D:return V=S._init,z(I,x,V(S._payload),G)}if(ve(S)||K(S))return V!==null?null:W(I,x,S,G,null);ws(I,S)}return null}function we(I,x,S,G,V){if(typeof G=="string"&&G!==""||typeof G=="number")return I=I.get(S)||null,C(x,I,""+G,V);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case f:return I=I.get(G.key===null?S:G.key)||null,T(x,I,G,V);case _:return I=I.get(G.key===null?S:G.key)||null,O(x,I,G,V);case D:var $=G._init;return we(I,x,S,$(G._payload),V)}if(ve(G)||K(G))return I=I.get(S)||null,W(x,I,G,V,null);ws(x,G)}return null}function fe(I,x,S,G){for(var V=null,$=null,b=x,oe=x=0,je=null;b!==null&&oe<S.length;oe++){b.index>oe?(je=b,b=null):je=b.sibling;var le=z(I,b,S[oe],G);if(le===null){b===null&&(b=je);break}r&&b&&le.alternate===null&&s(I,b),x=g(le,x,oe),$===null?V=le:$.sibling=le,$=le,b=je}if(oe===S.length)return u(I,b),xe&&ei(I,oe),V;if(b===null){for(;oe<S.length;oe++)b=q(I,S[oe],G),b!==null&&(x=g(b,x,oe),$===null?V=b:$.sibling=b,$=b);return xe&&ei(I,oe),V}for(b=c(I,b);oe<S.length;oe++)je=we(b,I,oe,S[oe],G),je!==null&&(r&&je.alternate!==null&&b.delete(je.key===null?oe:je.key),x=g(je,x,oe),$===null?V=je:$.sibling=je,$=je);return r&&b.forEach(function(Xn){return s(I,Xn)}),xe&&ei(I,oe),V}function yt(I,x,S,G){var V=K(S);if(typeof V!="function")throw Error(a(150));if(S=V.call(S),S==null)throw Error(a(151));for(var $=V=null,b=x,oe=x=0,je=null,le=S.next();b!==null&&!le.done;oe++,le=S.next()){b.index>oe?(je=b,b=null):je=b.sibling;var Xn=z(I,b,le.value,G);if(Xn===null){b===null&&(b=je);break}r&&b&&Xn.alternate===null&&s(I,b),x=g(Xn,x,oe),$===null?V=Xn:$.sibling=Xn,$=Xn,b=je}if(le.done)return u(I,b),xe&&ei(I,oe),V;if(b===null){for(;!le.done;oe++,le=S.next())le=q(I,le.value,G),le!==null&&(x=g(le,x,oe),$===null?V=le:$.sibling=le,$=le);return xe&&ei(I,oe),V}for(b=c(I,b);!le.done;oe++,le=S.next())le=we(b,I,oe,le.value,G),le!==null&&(r&&le.alternate!==null&&b.delete(le.key===null?oe:le.key),x=g(le,x,oe),$===null?V=le:$.sibling=le,$=le);return r&&b.forEach(function(mm){return s(I,mm)}),xe&&ei(I,oe),V}function Cn(I,x,S,G){if(typeof S=="object"&&S!==null&&S.type===m&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case f:e:{for(var V=S.key,$=x;$!==null;){if($.key===V){if(V=S.type,V===m){if($.tag===7){u(I,$.sibling),x=d($,S.props.children),x.return=I,I=x;break e}}else if($.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===D&&ah(V)===$.type){u(I,$.sibling),x=d($,S.props),x.ref=fr(I,$,S),x.return=I,I=x;break e}u(I,$);break}else s(I,$);$=$.sibling}S.type===m?(x=li(S.props.children,I.mode,G,S.key),x.return=I,I=x):(G=Js(S.type,S.key,S.props,null,I.mode,G),G.ref=fr(I,x,S),G.return=I,I=G)}return y(I);case _:e:{for($=S.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){u(I,x.sibling),x=d(x,S.children||[]),x.return=I,I=x;break e}else{u(I,x);break}else s(I,x);x=x.sibling}x=_a(S,I.mode,G),x.return=I,I=x}return y(I);case D:return $=S._init,Cn(I,x,$(S._payload),G)}if(ve(S))return fe(I,x,S,G);if(K(S))return yt(I,x,S,G);ws(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(u(I,x.sibling),x=d(x,S),x.return=I,I=x):(u(I,x),x=ma(S,I.mode,G),x.return=I,I=x),y(I)):u(I,x)}return Cn}var Mi=uh(!0),hh=uh(!1),Cs=An(null),xs=null,Ai=null,wl=null;function Cl(){wl=Ai=xs=null}function ch(r,s,u){ct?(_e(Cs,s._currentValue),s._currentValue=u):(_e(Cs,s._currentValue2),s._currentValue2=u)}function xl(r){var s=Cs.current;Ee(Cs),ct?r._currentValue=s:r._currentValue2=s}function Rl(r,s,u){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===u)break;r=r.return}}function Li(r,s){xs=r,wl=Ai=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(mt=!0),r.firstContext=null)}function At(r){var s=ct?r._currentValue:r._currentValue2;if(wl!==r)if(r={context:r,memoizedValue:s,next:null},Ai===null){if(xs===null)throw Error(a(308));Ai=r,xs.dependencies={lanes:0,firstContext:r}}else Ai=Ai.next=r;return s}var ti=null;function Il(r){ti===null?ti=[r]:ti.push(r)}function dh(r,s,u,c){var d=s.interleaved;return d===null?(u.next=u,Il(s)):(u.next=d.next,d.next=u),s.interleaved=u,sn(r,c)}function sn(r,s){r.lanes|=s;var u=r.alternate;for(u!==null&&(u.lanes|=s),u=r,r=r.return;r!==null;)r.childLanes|=s,u=r.alternate,u!==null&&(u.childLanes|=s),u=r,r=r.return;return u.tag===3?u.stateNode:null}var Fn=!1;function Tl(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function vn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function On(r,s,u){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,ee&2){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,sn(r,u)}return d=c.interleaved,d===null?(s.next=s,Il(c)):(s.next=d.next,d.next=s),c.interleaved=s,sn(r,u)}function Rs(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,u|=c,s.lanes=u,cl(r,u)}}function gh(r,s){var u=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var d=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var y={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?d=g=y:g=g.next=y,u=u.next}while(u!==null);g===null?d=g=s:g=g.next=s}else d=g=s;u={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}function Is(r,s,u,c){var d=r.updateQueue;Fn=!1;var g=d.firstBaseUpdate,y=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var T=C,O=T.next;T.next=null,y===null?g=O:y.next=O,y=T;var W=r.alternate;W!==null&&(W=W.updateQueue,C=W.lastBaseUpdate,C!==y&&(C===null?W.firstBaseUpdate=O:C.next=O,W.lastBaseUpdate=T))}if(g!==null){var q=d.baseState;y=0,W=O=T=null,C=g;do{var z=C.lane,we=C.eventTime;if((c&z)===z){W!==null&&(W=W.next={eventTime:we,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var fe=r,yt=C;switch(z=s,we=u,yt.tag){case 1:if(fe=yt.payload,typeof fe=="function"){q=fe.call(we,q,z);break e}q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=yt.payload,z=typeof fe=="function"?fe.call(we,q,z):fe,z==null)break e;q=l({},q,z);break e;case 2:Fn=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,z=d.effects,z===null?d.effects=[C]:z.push(C))}else we={eventTime:we,lane:z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},W===null?(O=W=we,T=q):W=W.next=we,y|=z;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;z=C,C=z.next,z.next=null,d.lastBaseUpdate=z,d.shared.pending=null}}while(!0);if(W===null&&(T=q),d.baseState=T,d.firstBaseUpdate=O,d.lastBaseUpdate=W,s=d.shared.interleaved,s!==null){d=s;do y|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ii|=y,r.lanes=y,r.memoizedState=q}}function mh(r,s,u){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=u,typeof d!="function")throw Error(a(191,d));d.call(c)}}}var gr={},Lt=An(gr),mr=An(gr),Fi=An(gr);function on(r){if(r===gr)throw Error(a(174));return r}function Sl(r,s){_e(Fi,s),_e(mr,r),_e(Lt,gr),r=rt(s),Ee(Lt),_e(Lt,r)}function Oi(){Ee(Lt),Ee(mr),Ee(Fi)}function _h(r){var s=on(Fi.current),u=on(Lt.current);s=ut(u,r.type,s),u!==s&&(_e(mr,r),_e(Lt,s))}function Pl(r){mr.current===r&&(Ee(Lt),Ee(mr))}var Se=An(0);function Ts(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||qu(u)||rl(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ml=[];function Al(){for(var r=0;r<Ml.length;r++){var s=Ml[r];ct?s._workInProgressVersionPrimary=null:s._workInProgressVersionSecondary=null}Ml.length=0}var Ss=h.ReactCurrentDispatcher,Ll=h.ReactCurrentBatchConfig,ni=0,Pe=null,De=null,Xe=null,Ps=!1,_r=!1,pr=0,Ug=0;function Je(){throw Error(a(321))}function Fl(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!jt(r[u],s[u]))return!1;return!0}function Ol(r,s,u,c,d,g){if(ni=g,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ss.current=r===null||r.memoizedState===null?Kg:Vg,r=u(c,d),_r){g=0;do{if(_r=!1,pr=0,25<=g)throw Error(a(301));g+=1,Xe=De=null,s.updateQueue=null,Ss.current=Zg,r=u(c,d)}while(_r)}if(Ss.current=Ls,s=De!==null&&De.next!==null,ni=0,Xe=De=Pe=null,Ps=!1,s)throw Error(a(300));return r}function Nl(){var r=pr!==0;return pr=0,r}function ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=r:Xe=Xe.next=r,Xe}function Ft(){if(De===null){var r=Pe.alternate;r=r!==null?r.memoizedState:null}else r=De.next;var s=Xe===null?Pe.memoizedState:Xe.next;if(s!==null)Xe=s,De=r;else{if(r===null)throw Error(a(310));De=r,r={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Xe===null?Pe.memoizedState=Xe=r:Xe=Xe.next=r}return Xe}function yr(r,s){return typeof s=="function"?s(r):s}function Dl(r){var s=Ft(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=r;var c=De,d=c.baseQueue,g=u.pending;if(g!==null){if(d!==null){var y=d.next;d.next=g.next,g.next=y}c.baseQueue=d=g,u.pending=null}if(d!==null){g=d.next,c=c.baseState;var C=y=null,T=null,O=g;do{var W=O.lane;if((ni&W)===W)T!==null&&(T=T.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),c=O.hasEagerState?O.eagerState:r(c,O.action);else{var q={lane:W,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};T===null?(C=T=q,y=c):T=T.next=q,Pe.lanes|=W,ii|=W}O=O.next}while(O!==null&&O!==g);T===null?y=c:T.next=C,jt(c,s.memoizedState)||(mt=!0),s.memoizedState=c,s.baseState=y,s.baseQueue=T,u.lastRenderedState=c}if(r=u.interleaved,r!==null){d=r;do g=d.lane,Pe.lanes|=g,ii|=g,d=d.next;while(d!==r)}else d===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function kl(r){var s=Ft(),u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=r;var c=u.dispatch,d=u.pending,g=s.memoizedState;if(d!==null){u.pending=null;var y=d=d.next;do g=r(g,y.action),y=y.next;while(y!==d);jt(g,s.memoizedState)||(mt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),u.lastRenderedState=g}return[g,c]}function ph(){}function yh(r,s){var u=Pe,c=Ft(),d=s(),g=!jt(c.memoizedState,d);if(g&&(c.memoizedState=d,mt=!0),c=c.queue,zl(wh.bind(null,u,c,r),[r]),c.getSnapshot!==s||g||Xe!==null&&Xe.memoizedState.tag&1){if(u.flags|=2048,vr(9,Eh.bind(null,u,c,d,s),void 0,null),Ue===null)throw Error(a(349));ni&30||vh(u,s,d)}return d}function vh(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=Pe.updateQueue,s===null?(s={lastEffect:null,stores:null},Pe.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function Eh(r,s,u,c){s.value=u,s.getSnapshot=c,Ch(s)&&xh(r)}function wh(r,s,u){return u(function(){Ch(s)&&xh(r)})}function Ch(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!jt(r,u)}catch{return!0}}function xh(r){var s=sn(r,1);s!==null&&Ot(s,r,1,-1)}function Rh(r){var s=ln();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:r},s.queue=r,r=r.dispatch=Yg.bind(null,Pe,r),[s.memoizedState,r]}function vr(r,s,u,c){return r={tag:r,create:s,destroy:u,deps:c,next:null},s=Pe.updateQueue,s===null?(s={lastEffect:null,stores:null},Pe.updateQueue=s,s.lastEffect=r.next=r):(u=s.lastEffect,u===null?s.lastEffect=r.next=r:(c=u.next,u.next=r,r.next=c,s.lastEffect=r)),r}function Ih(){return Ft().memoizedState}function Ms(r,s,u,c){var d=ln();Pe.flags|=r,d.memoizedState=vr(1|s,u,void 0,c===void 0?null:c)}function As(r,s,u,c){var d=Ft();c=c===void 0?null:c;var g=void 0;if(De!==null){var y=De.memoizedState;if(g=y.destroy,c!==null&&Fl(c,y.deps)){d.memoizedState=vr(s,u,g,c);return}}Pe.flags|=r,d.memoizedState=vr(1|s,u,g,c)}function Th(r,s){return Ms(8390656,8,r,s)}function zl(r,s){return As(2048,8,r,s)}function Sh(r,s){return As(4,2,r,s)}function Ph(r,s){return As(4,4,r,s)}function Mh(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Ah(r,s,u){return u=u!=null?u.concat([r]):null,As(4,4,Mh.bind(null,s,r),u)}function Gl(){}function Lh(r,s){var u=Ft();s=s===void 0?null:s;var c=u.memoizedState;return c!==null&&s!==null&&Fl(s,c[1])?c[0]:(u.memoizedState=[r,s],r)}function Fh(r,s){var u=Ft();s=s===void 0?null:s;var c=u.memoizedState;return c!==null&&s!==null&&Fl(s,c[1])?c[0]:(r=r(),u.memoizedState=[r,s],r)}function Oh(r,s,u){return ni&21?(jt(u,s)||(u=$u(),Pe.lanes|=u,ii|=u,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,mt=!0),r.memoizedState=u)}function jg(r,s){var u=se;se=u!==0&&4>u?u:4,r(!0);var c=Ll.transition;Ll.transition={};try{r(!1),s()}finally{se=u,Ll.transition=c}}function Nh(){return Ft().memoizedState}function Wg(r,s,u){var c=kn(r);if(u={lane:c,action:u,hasEagerState:!1,eagerState:null,next:null},Dh(r))kh(s,u);else if(u=dh(r,s,u,c),u!==null){var d=tt();Ot(u,r,c,d),zh(u,s,c)}}function Yg(r,s,u){var c=kn(r),d={lane:c,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dh(r))kh(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var y=s.lastRenderedState,C=g(y,u);if(d.hasEagerState=!0,d.eagerState=C,jt(C,y)){var T=s.interleaved;T===null?(d.next=d,Il(s)):(d.next=T.next,T.next=d),s.interleaved=d;return}}catch{}finally{}u=dh(r,s,d,c),u!==null&&(d=tt(),Ot(u,r,c,d),zh(u,s,c))}}function Dh(r){var s=r.alternate;return r===Pe||s!==null&&s===Pe}function kh(r,s){_r=Ps=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function zh(r,s,u){if(u&4194240){var c=s.lanes;c&=r.pendingLanes,u|=c,s.lanes=u,cl(r,u)}}var Ls={readContext:At,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Kg={readContext:At,useCallback:function(r,s){return ln().memoizedState=[r,s===void 0?null:s],r},useContext:At,useEffect:Th,useImperativeHandle:function(r,s,u){return u=u!=null?u.concat([r]):null,Ms(4194308,4,Mh.bind(null,s,r),u)},useLayoutEffect:function(r,s){return Ms(4194308,4,r,s)},useInsertionEffect:function(r,s){return Ms(4,2,r,s)},useMemo:function(r,s){var u=ln();return s=s===void 0?null:s,r=r(),u.memoizedState=[r,s],r},useReducer:function(r,s,u){var c=ln();return s=u!==void 0?u(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=Wg.bind(null,Pe,r),[c.memoizedState,r]},useRef:function(r){var s=ln();return r={current:r},s.memoizedState=r},useState:Rh,useDebugValue:Gl,useDeferredValue:function(r){return ln().memoizedState=r},useTransition:function(){var r=Rh(!1),s=r[0];return r=jg.bind(null,r[1]),ln().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,u){var c=Pe,d=ln();if(xe){if(u===void 0)throw Error(a(407));u=u()}else{if(u=s(),Ue===null)throw Error(a(349));ni&30||vh(c,s,u)}d.memoizedState=u;var g={value:u,getSnapshot:s};return d.queue=g,Th(wh.bind(null,c,g,r),[r]),c.flags|=2048,vr(9,Eh.bind(null,c,g,u,s),void 0,null),u},useId:function(){var r=ln(),s=Ue.identifierPrefix;if(xe){var u=yn,c=pn;u=(c&~(1<<32-Ut(c)-1)).toString(32)+u,s=":"+s+"R"+u,u=pr++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=Ug++,s=":"+s+"r"+u.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Vg={readContext:At,useCallback:Lh,useContext:At,useEffect:zl,useImperativeHandle:Ah,useInsertionEffect:Sh,useLayoutEffect:Ph,useMemo:Fh,useReducer:Dl,useRef:Ih,useState:function(){return Dl(yr)},useDebugValue:Gl,useDeferredValue:function(r){var s=Ft();return Oh(s,De.memoizedState,r)},useTransition:function(){var r=Dl(yr)[0],s=Ft().memoizedState;return[r,s]},useMutableSource:ph,useSyncExternalStore:yh,useId:Nh,unstable_isNewReconciler:!1},Zg={readContext:At,useCallback:Lh,useContext:At,useEffect:zl,useImperativeHandle:Ah,useInsertionEffect:Sh,useLayoutEffect:Ph,useMemo:Fh,useReducer:kl,useRef:Ih,useState:function(){return kl(yr)},useDebugValue:Gl,useDeferredValue:function(r){var s=Ft();return De===null?s.memoizedState=r:Oh(s,De.memoizedState,r)},useTransition:function(){var r=kl(yr)[0],s=Ft().memoizedState;return[r,s]},useMutableSource:ph,useSyncExternalStore:yh,useId:Nh,unstable_isNewReconciler:!1};function Yt(r,s){if(r&&r.defaultProps){s=l({},s),r=r.defaultProps;for(var u in r)s[u]===void 0&&(s[u]=r[u]);return s}return s}function Xl(r,s,u,c){s=r.memoizedState,u=u(c,s),u=u==null?s:l({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Fs={isMounted:function(r){return(r=r._reactInternals)?Y(r)===r:!1},enqueueSetState:function(r,s,u){r=r._reactInternals;var c=tt(),d=kn(r),g=vn(c,d);g.payload=s,u!=null&&(g.callback=u),s=On(r,g,d),s!==null&&(Ot(s,r,d,c),Rs(s,r,d))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var c=tt(),d=kn(r),g=vn(c,d);g.tag=1,g.payload=s,u!=null&&(g.callback=u),s=On(r,g,d),s!==null&&(Ot(s,r,d,c),Rs(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=tt(),c=kn(r),d=vn(u,c);d.tag=2,s!=null&&(d.callback=s),s=On(r,d,c),s!==null&&(Ot(s,r,c,u),Rs(s,r,c))}};function Gh(r,s,u,c,d,g,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,y):s.prototype&&s.prototype.isPureReactComponent?!Es(u,c)||!Es(d,g):!0}function Xh(r,s,u){var c=!1,d=Ln,g=s.contextType;return typeof g=="object"&&g!==null?g=At(g):(d=gt(s)?Jn:Qe.current,c=s.contextTypes,g=(c=c!=null)?Ii(r,d):Ln),s=new s(u,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Fs,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function Uh(r,s,u,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,c),s.state!==r&&Fs.enqueueReplaceState(s,s.state,null)}function Ul(r,s,u,c){var d=r.stateNode;d.props=u,d.state=r.memoizedState,d.refs={},Tl(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=At(g):(g=gt(s)?Jn:Qe.current,d.context=Ii(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Xl(r,s,g,u),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Fs.enqueueReplaceState(d,d.state,null),Is(r,u,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Ni(r,s){try{var u="",c=s;do u+=Xg(c),c=c.return;while(c);var d=u}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function jl(r,s,u){return{value:r,source:null,stack:u??null,digest:s??null}}function Wl(r,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function jh(r,s,u){u=vn(-1,u),u.tag=3,u.payload={element:null};var c=s.value;return u.callback=function(){Zs||(Zs=!0,aa=c),Wl(r,s)},u}function Wh(r,s,u){u=vn(-1,u),u.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;u.payload=function(){return c(d)},u.callback=function(){Wl(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){Wl(r,s),typeof c!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})}),u}function Yh(r,s,u){var c=r.pingCache;if(c===null){c=r.pingCache=new Bg;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(u)||(d.add(u),r=lm.bind(null,r,s,u),s.then(r,r))}function Kh(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Vh(r,s,u,c,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===s?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=vn(-1,1),s.tag=2,On(u,s,1))),u.lanes|=1),r)}var Hg=h.ReactCurrentOwner,mt=!1;function ot(r,s,u,c){s.child=r===null?hh(s,null,u,c):Mi(s,r.child,u,c)}function Zh(r,s,u,c,d){u=u.render;var g=s.ref;return Li(s,d),c=Ol(r,s,u,c,g,d),u=Nl(),r!==null&&!mt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,En(r,s,d)):(xe&&u&&_l(s),s.flags|=1,ot(r,s,c,d),s.child)}function Bh(r,s,u,c,d){if(r===null){var g=u.type;return typeof g=="function"&&!ga(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=g,Hh(r,s,g,c,d)):(r=Js(u.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&d)){var y=g.memoizedProps;if(u=u.compare,u=u!==null?u:Es,u(y,c)&&r.ref===s.ref)return En(r,s,d)}return s.flags|=1,r=Gn(g,c),r.ref=s.ref,r.return=s,s.child=r}function Hh(r,s,u,c,d){if(r!==null){var g=r.memoizedProps;if(Es(g,c)&&r.ref===s.ref)if(mt=!1,s.pendingProps=c=g,(r.lanes&d)!==0)r.flags&131072&&(mt=!0);else return s.lanes=r.lanes,En(r,s,d)}return Yl(r,s,u,c,d)}function qh(r,s,u){var c=s.pendingProps,d=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(ki,Rt),Rt|=u;else{if(!(u&1073741824))return r=g!==null?g.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,_e(ki,Rt),Rt|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:u,_e(ki,Rt),Rt|=c}else g!==null?(c=g.baseLanes|u,s.memoizedState=null):c=u,_e(ki,Rt),Rt|=c;return ot(r,s,d,u),s.child}function bh(r,s){var u=s.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function Yl(r,s,u,c,d){var g=gt(u)?Jn:Qe.current;return g=Ii(s,g),Li(s,d),u=Ol(r,s,u,c,g,d),c=Nl(),r!==null&&!mt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,En(r,s,d)):(xe&&c&&_l(s),s.flags|=1,ot(r,s,u,d),s.child)}function Qh(r,s,u,c,d){if(gt(u)){var g=!0;cs(s)}else g=!1;if(Li(s,d),s.stateNode===null)Ns(r,s),Xh(s,u,c),Ul(s,u,c,d),c=!0;else if(r===null){var y=s.stateNode,C=s.memoizedProps;y.props=C;var T=y.context,O=u.contextType;typeof O=="object"&&O!==null?O=At(O):(O=gt(u)?Jn:Qe.current,O=Ii(s,O));var W=u.getDerivedStateFromProps,q=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function";q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==c||T!==O)&&Uh(s,y,c,O),Fn=!1;var z=s.memoizedState;y.state=z,Is(s,c,y,d),T=s.memoizedState,C!==c||z!==T||ft.current||Fn?(typeof W=="function"&&(Xl(s,u,W,c),T=s.memoizedState),(C=Fn||Gh(s,u,C,c,z,T,O))?(q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=T),y.props=c,y.state=T,y.context=O,c=C):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,fh(r,s),C=s.memoizedProps,O=s.type===s.elementType?C:Yt(s.type,C),y.props=O,q=s.pendingProps,z=y.context,T=u.contextType,typeof T=="object"&&T!==null?T=At(T):(T=gt(u)?Jn:Qe.current,T=Ii(s,T));var we=u.getDerivedStateFromProps;(W=typeof we=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==q||z!==T)&&Uh(s,y,c,T),Fn=!1,z=s.memoizedState,y.state=z,Is(s,c,y,d);var fe=s.memoizedState;C!==q||z!==fe||ft.current||Fn?(typeof we=="function"&&(Xl(s,u,we,c),fe=s.memoizedState),(O=Fn||Gh(s,u,O,c,z,fe,T)||!1)?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,fe,T),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,fe,T)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===r.memoizedProps&&z===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&z===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),y.props=c,y.state=fe,y.context=T,c=O):(typeof y.componentDidUpdate!="function"||C===r.memoizedProps&&z===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&z===r.memoizedState||(s.flags|=1024),c=!1)}return Kl(r,s,u,c,g,d)}function Kl(r,s,u,c,d,g){bh(r,s);var y=(s.flags&128)!==0;if(!c&&!y)return d&&Ju(s,u,!1),En(r,s,g);c=s.stateNode,Hg.current=s;var C=y&&typeof u.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&y?(s.child=Mi(s,r.child,null,g),s.child=Mi(s,null,C,g)):ot(r,s,C,g),s.memoizedState=c.state,d&&Ju(s,u,!0),s.child}function Jh(r){var s=r.stateNode;s.pendingContext?bu(r,s.pendingContext,s.pendingContext!==s.context):s.context&&bu(r,s.context,!1),Sl(r,s.containerInfo)}function $h(r,s,u,c,d){return Pi(),El(d),s.flags|=256,ot(r,s,u,c),s.child}var Vl={dehydrated:null,treeContext:null,retryLane:0};function Zl(r){return{baseLanes:r,cachePool:null,transitions:null}}function ec(r,s,u){var c=s.pendingProps,d=Se.current,g=!1,y=(s.flags&128)!==0,C;if((C=y)||(C=r!==null&&r.memoizedState===null?!1:(d&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),_e(Se,d&1),r===null)return vl(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?rl(r)?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(y=c.children,r=c.fallback,g?(c=s.mode,g=s.child,y={mode:"hidden",children:y},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=y):g=$s(y,c,0,null),r=li(r,c,u,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Zl(u),s.memoizedState=Vl,r):Bl(s,y));if(d=r.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return qg(r,s,y,c,C,d,u);if(g){g=c.fallback,y=s.mode,d=r.child,C=d.sibling;var T={mode:"hidden",children:c.children};return!(y&1)&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=T,s.deletions=null):(c=Gn(d,T),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?g=Gn(C,g):(g=li(g,y,u,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,y=r.child.memoizedState,y=y===null?Zl(u):{baseLanes:y.baseLanes|u,cachePool:null,transitions:y.transitions},g.memoizedState=y,g.childLanes=r.childLanes&~u,s.memoizedState=Vl,c}return g=r.child,r=g.sibling,c=Gn(g,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=u),c.return=s,c.sibling=null,r!==null&&(u=s.deletions,u===null?(s.deletions=[r],s.flags|=16):u.push(r)),s.child=c,s.memoizedState=null,c}function Bl(r,s){return s=$s({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Os(r,s,u,c){return c!==null&&El(c),Mi(s,r.child,null,u),r=Bl(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function qg(r,s,u,c,d,g,y){if(u)return s.flags&256?(s.flags&=-257,c=jl(Error(a(422))),Os(r,s,y,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,d=s.mode,c=$s({mode:"visible",children:c.children},d,0,null),g=li(g,d,y,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,s.mode&1&&Mi(s,r.child,null,y),s.child.memoizedState=Zl(y),s.memoizedState=Vl,g);if(!(s.mode&1))return Os(r,s,y,null);if(rl(d))return c=ag(d).digest,g=Error(a(419)),c=jl(g,c,void 0),Os(r,s,y,c);if(u=(y&r.childLanes)!==0,mt||u){if(c=Ue,c!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|y)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,sn(r,d),Ot(c,r,d,-1))}return fa(),c=jl(Error(a(421))),Os(r,s,y,c)}return qu(d)?(s.flags|=128,s.child=r.child,s=am.bind(null,r),ug(d,s),null):(r=g.treeContext,st&&(Mt=dg(d),xt=s,xe=!0,Wt=null,dr=!1,r!==null&&(St[Pt++]=pn,St[Pt++]=yn,St[Pt++]=$n,pn=r.id,yn=r.overflow,$n=s)),s=Bl(s,c.children),s.flags|=4096,s)}function tc(r,s,u){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Rl(r.return,s,u)}function Hl(r,s,u,c,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=u,g.tailMode=d)}function nc(r,s,u){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(ot(r,s,c.children,u),c=Se.current,c&2)c=c&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&tc(r,u,s);else if(r.tag===19)tc(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(_e(Se,c),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(u=s.child,d=null;u!==null;)r=u.alternate,r!==null&&Ts(r)===null&&(d=u),u=u.sibling;u=d,u===null?(d=s.child,s.child=null):(d=u.sibling,u.sibling=null),Hl(s,!1,d,u,g);break;case"backwards":for(u=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Ts(r)===null){s.child=d;break}r=d.sibling,d.sibling=u,u=d,d=r}Hl(s,!0,u,null,g);break;case"together":Hl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ns(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function En(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),ii|=s.lanes,!(u&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(a(153));if(s.child!==null){for(r=s.child,u=Gn(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=Gn(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function bg(r,s,u){switch(s.tag){case 3:Jh(s),Pi();break;case 5:_h(s);break;case 1:gt(s.type)&&cs(s);break;case 4:Sl(s,s.stateNode.containerInfo);break;case 10:ch(s,s.type._context,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(_e(Se,Se.current&1),s.flags|=128,null):u&s.child.childLanes?ec(r,s,u):(_e(Se,Se.current&1),r=En(r,s,u),r!==null?r.sibling:null);_e(Se,Se.current&1);break;case 19:if(c=(u&s.childLanes)!==0,r.flags&128){if(c)return nc(r,s,u);s.flags|=128}var d=s.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),_e(Se,Se.current),c)break;return null;case 22:case 23:return s.lanes=0,qh(r,s,u)}return En(r,s,u)}function an(r){r.flags|=4}function ic(r,s){if(r!==null&&r.child===s.child)return!0;if(s.flags&16)return!1;for(r=s.child;r!==null;){if(r.flags&12854||r.subtreeFlags&12854)return!1;r=r.sibling}return!0}var Er,wr,Ds,ks;if(Ne)Er=function(r,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)qe(r,u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},wr=function(){},Ds=function(r,s,u,c,d){if(r=r.memoizedProps,r!==c){var g=s.stateNode,y=on(Lt.current);u=Qt(g,u,r,c,d,y),(s.updateQueue=u)&&an(s)}},ks=function(r,s,u,c){u!==c&&an(s)};else if(bn){Er=function(r,s,u,c){for(var d=s.child;d!==null;){if(d.tag===5){var g=d.stateNode;u&&c&&(g=Bu(g,d.type,d.memoizedProps,d)),qe(r,g)}else if(d.tag===6)g=d.stateNode,u&&c&&(g=Hu(g,d.memoizedProps,d)),qe(r,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Er(r,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var rc=function(r,s,u,c){for(var d=s.child;d!==null;){if(d.tag===5){var g=d.stateNode;u&&c&&(g=Bu(g,d.type,d.memoizedProps,d)),Zu(r,g)}else if(d.tag===6)g=d.stateNode,u&&c&&(g=Hu(g,d.memoizedProps,d)),Zu(r,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),rc(r,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};wr=function(r,s){var u=s.stateNode;if(!ic(r,s)){r=u.containerInfo;var c=Vu(r);rc(c,s,!1,!1),u.pendingChildren=c,an(s),rg(r,c)}},Ds=function(r,s,u,c,d){var g=r.stateNode,y=r.memoizedProps;if((r=ic(r,s))&&y===c)s.stateNode=g;else{var C=s.stateNode,T=on(Lt.current),O=null;y!==c&&(O=Qt(C,u,y,c,d,T)),r&&O===null?s.stateNode=g:(g=ig(g,O,u,y,c,s,r,C),Gt(g,u,c,d,T)&&an(s),s.stateNode=g,r?an(s):Er(g,s,!1,!1))}},ks=function(r,s,u,c){u!==c?(r=on(Fi.current),u=on(Lt.current),s.stateNode=be(c,r,u,s),an(s)):s.stateNode=r.stateNode}}else wr=function(){},Ds=function(){},ks=function(){};function Cr(r,s){if(!xe)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function $e(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,c=0;if(s)for(var d=r.child;d!==null;)u|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)u|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=u,s}function Qg(r,s,u){var c=s.pendingProps;switch(pl(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(s),null;case 1:return gt(s.type)&&hs(),$e(s),null;case 3:return u=s.stateNode,Oi(),Ee(ft),Ee(Qe),Al(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(vs(s)?an(s):r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Wt!==null&&(ca(Wt),Wt=null))),wr(r,s),$e(s),null;case 5:Pl(s),u=on(Fi.current);var d=s.type;if(r!==null&&s.stateNode!=null)Ds(r,s,d,c,u),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(a(166));return $e(s),null}if(r=on(Lt.current),vs(s)){if(!st)throw Error(a(175));r=fg(s.stateNode,s.type,s.memoizedProps,u,r,s,!dr),s.updateQueue=r,r!==null&&an(s)}else{var g=Te(d,c,u,r,s);Er(g,s,!1,!1),s.stateNode=g,Gt(g,d,c,u,r)&&an(s)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return $e(s),null;case 6:if(r&&s.stateNode!=null)ks(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(a(166));if(r=on(Fi.current),u=on(Lt.current),vs(s)){if(!st)throw Error(a(176));if(r=s.stateNode,u=s.memoizedProps,(c=gg(r,u,s,!dr))&&(d=xt,d!==null))switch(d.tag){case 3:Cg(d.stateNode.containerInfo,r,u,(d.mode&1)!==0);break;case 5:xg(d.type,d.memoizedProps,d.stateNode,r,u,(d.mode&1)!==0)}c&&an(s)}else s.stateNode=be(c,r,u,s)}return $e(s),null;case 13:if(Ee(Se),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(xe&&Mt!==null&&s.mode&1&&!(s.flags&128))lh(),Pi(),s.flags|=98560,d=!1;else if(d=vs(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(a(318));if(!st)throw Error(a(344));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));mg(d,s)}else Pi(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;$e(s),d=!1}else Wt!==null&&(ca(Wt),Wt=null),d=!0;if(!d)return s.flags&65536?s:null}return s.flags&128?(s.lanes=u,s):(u=c!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(s.child.flags|=8192,s.mode&1&&(r===null||Se.current&1?ke===0&&(ke=3):fa())),s.updateQueue!==null&&(s.flags|=4),$e(s),null);case 4:return Oi(),wr(r,s),r===null&&ls(s.stateNode.containerInfo),$e(s),null;case 10:return xl(s.type._context),$e(s),null;case 17:return gt(s.type)&&hs(),$e(s),null;case 19:if(Ee(Se),d=s.memoizedState,d===null)return $e(s),null;if(c=(s.flags&128)!==0,g=d.rendering,g===null)if(c)Cr(d,!1);else{if(ke!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(g=Ts(r),g!==null){for(s.flags|=128,Cr(d,!1),r=g.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=u,u=s.child;u!==null;)c=u,d=r,c.flags&=14680066,g=c.alternate,g===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,d=g.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u=u.sibling;return _e(Se,Se.current&1|2),s.child}r=r.sibling}d.tail!==null&&Ge()>la&&(s.flags|=128,c=!0,Cr(d,!1),s.lanes=4194304)}else{if(!c)if(r=Ts(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Cr(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!xe)return $e(s),null}else 2*Ge()-d.renderingStartTime>la&&u!==1073741824&&(s.flags|=128,c=!0,Cr(d,!1),s.lanes=4194304);d.isBackwards?(g.sibling=s.child,s.child=g):(r=d.last,r!==null?r.sibling=g:s.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ge(),s.sibling=null,r=Se.current,_e(Se,c?r&1|2:r&1),s):($e(s),null);case 22:case 23:return da(),u=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(s.flags|=8192),u&&s.mode&1?Rt&1073741824&&($e(s),Ne&&s.subtreeFlags&6&&(s.flags|=8192)):$e(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Jg(r,s){switch(pl(s),s.tag){case 1:return gt(s.type)&&hs(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Oi(),Ee(ft),Ee(Qe),Al(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Pl(s),null;case 13:if(Ee(Se),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Pi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ee(Se),null;case 4:return Oi(),null;case 10:return xl(s.type._context),null;case 22:case 23:return da(),null;case 24:return null;default:return null}}var zs=!1,et=!1,$g=typeof WeakSet=="function"?WeakSet:Set,j=null;function Di(r,s){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(c){Re(r,s,c)}else u.current=null}function ql(r,s,u){try{u()}catch(c){Re(r,s,c)}}var sc=!1;function em(r,s){for(Tt(r.containerInfo),j=s;j!==null;)if(r=j,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,j=s;else for(;j!==null;){r=j;try{var u=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var c=u.memoizedProps,d=u.memoizedState,g=r.stateNode,y=g.getSnapshotBeforeUpdate(r.elementType===r.type?c:Yt(r.type,c),d);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:Ne&&ng(r.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(C){Re(r,r.return,C)}if(s=r.sibling,s!==null){s.return=r.return,j=s;break}j=r.return}return u=sc,sc=!1,u}function xr(r,s,u){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&ql(s,u,g)}d=d.next}while(d!==c)}}function Gs(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&r)===r){var c=u.create;u.destroy=c()}u=u.next}while(u!==s)}}function bl(r){var s=r.ref;if(s!==null){var u=r.stateNode;switch(r.tag){case 5:r=re(u);break;default:r=u}typeof s=="function"?s(r):s.current=r}}function oc(r){var s=r.alternate;s!==null&&(r.alternate=null,oc(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&$t(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function lc(r){return r.tag===5||r.tag===3||r.tag===4}function ac(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lc(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ql(r,s,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?qf(u,r,s):Kf(u,r);else if(c!==4&&(r=r.child,r!==null))for(Ql(r,s,u),r=r.sibling;r!==null;)Ql(r,s,u),r=r.sibling}function Jl(r,s,u){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?Hf(u,r,s):Yf(u,r);else if(c!==4&&(r=r.child,r!==null))for(Jl(r,s,u),r=r.sibling;r!==null;)Jl(r,s,u),r=r.sibling}var Ye=null,Kt=!1;function un(r,s,u){for(u=u.child;u!==null;)$l(r,s,u),u=u.sibling}function $l(r,s,u){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ms,u)}catch{}switch(u.tag){case 5:et||Di(u,s);case 6:if(Ne){var c=Ye,d=Kt;Ye=null,un(r,s,u),Ye=c,Kt=d,Ye!==null&&(Kt?Qf(Ye,u.stateNode):bf(Ye,u.stateNode))}else un(r,s,u);break;case 18:Ne&&Ye!==null&&(Kt?Eg(Ye,u.stateNode):vg(Ye,u.stateNode));break;case 4:Ne?(c=Ye,d=Kt,Ye=u.stateNode.containerInfo,Kt=!0,un(r,s,u),Ye=c,Kt=d):(bn&&(c=u.stateNode.containerInfo,d=Vu(c),il(c,d)),un(r,s,u));break;case 0:case 11:case 14:case 15:if(!et&&(c=u.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,y=g.destroy;g=g.tag,y!==void 0&&(g&2||g&4)&&ql(u,s,y),d=d.next}while(d!==c)}un(r,s,u);break;case 1:if(!et&&(Di(u,s),c=u.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=u.memoizedProps,c.state=u.memoizedState,c.componentWillUnmount()}catch(C){Re(u,s,C)}un(r,s,u);break;case 21:un(r,s,u);break;case 22:u.mode&1?(et=(c=et)||u.memoizedState!==null,un(r,s,u),et=c):un(r,s,u);break;default:un(r,s,u)}}function uc(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new $g),s.forEach(function(c){var d=um.bind(null,r,c);u.has(c)||(u.add(c),c.then(d,d))})}}function Vt(r,s){var u=s.deletions;if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];try{var g=r,y=s;if(Ne){var C=y;e:for(;C!==null;){switch(C.tag){case 5:Ye=C.stateNode,Kt=!1;break e;case 3:Ye=C.stateNode.containerInfo,Kt=!0;break e;case 4:Ye=C.stateNode.containerInfo,Kt=!0;break e}C=C.return}if(Ye===null)throw Error(a(160));$l(g,y,d),Ye=null,Kt=!1}else $l(g,y,d);var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(O){Re(d,s,O)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hc(s,r),s=s.sibling}function hc(r,s){var u=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Vt(s,r),hn(r),c&4){try{xr(3,r,r.return),Gs(3,r)}catch(z){Re(r,r.return,z)}try{xr(5,r,r.return)}catch(z){Re(r,r.return,z)}}break;case 1:Vt(s,r),hn(r),c&512&&u!==null&&Di(u,u.return);break;case 5:if(Vt(s,r),hn(r),c&512&&u!==null&&Di(u,u.return),Ne){if(r.flags&32){var d=r.stateNode;try{Ku(d)}catch(z){Re(r,r.return,z)}}if(c&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps;if(u=u!==null?u.memoizedProps:g,c=r.type,s=r.updateQueue,r.updateQueue=null,s!==null)try{Bf(d,s,c,u,g,r)}catch(z){Re(r,r.return,z)}}}break;case 6:if(Vt(s,r),hn(r),c&4&&Ne){if(r.stateNode===null)throw Error(a(162));d=r.stateNode,g=r.memoizedProps,u=u!==null?u.memoizedProps:g;try{Vf(d,u,g)}catch(z){Re(r,r.return,z)}}break;case 3:if(Vt(s,r),hn(r),c&4){if(Ne&&st&&u!==null&&u.memoizedState.isDehydrated)try{pg(s.containerInfo)}catch(z){Re(r,r.return,z)}if(bn){d=s.containerInfo,g=s.pendingChildren;try{il(d,g)}catch(z){Re(r,r.return,z)}}}break;case 4:if(Vt(s,r),hn(r),c&4&&bn){g=r.stateNode,d=g.containerInfo,g=g.pendingChildren;try{il(d,g)}catch(z){Re(r,r.return,z)}}break;case 13:Vt(s,r),hn(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(oa=Ge())),c&4&&uc(r);break;case 22:var y=u!==null&&u.memoizedState!==null;if(r.mode&1?(et=(u=et)||y,Vt(s,r),et=u):Vt(s,r),hn(r),c&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!y&&r.mode&1)for(j=r,c=r.child;c!==null;){for(s=j=c;j!==null;){y=j;var C=y.child;switch(y.tag){case 0:case 11:case 14:case 15:xr(4,y,y.return);break;case 1:Di(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){var O=y,W=y.return;try{var q=O;T.props=q.memoizedProps,T.state=q.memoizedState,T.componentWillUnmount()}catch(z){Re(O,W,z)}}break;case 5:Di(y,y.return);break;case 22:if(y.memoizedState!==null){fc(s);continue}}C!==null?(C.return=y,j=C):fc(s)}c=c.sibling}if(Ne){e:if(c=null,Ne)for(s=r;;){if(s.tag===5){if(c===null){c=s;try{d=s.stateNode,u?Jf(d):eg(s.stateNode,s.memoizedProps)}catch(z){Re(r,r.return,z)}}}else if(s.tag===6){if(c===null)try{g=s.stateNode,u?$f(g):tg(g,s.memoizedProps)}catch(z){Re(r,r.return,z)}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}}}break;case 19:Vt(s,r),hn(r),c&4&&uc(r);break;case 21:break;default:Vt(s,r),hn(r)}}function hn(r){var s=r.flags;if(s&2){try{if(Ne){e:{for(var u=r.return;u!==null;){if(lc(u)){var c=u;break e}u=u.return}throw Error(a(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Ku(d),c.flags&=-33);var g=ac(r);Jl(r,g,d);break;case 3:case 4:var y=c.stateNode.containerInfo,C=ac(r);Ql(r,C,y);break;default:throw Error(a(161))}}}catch(T){Re(r,r.return,T)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function tm(r,s,u){j=r,cc(r)}function cc(r,s,u){for(var c=(r.mode&1)!==0;j!==null;){var d=j,g=d.child;if(d.tag===22&&c){var y=d.memoizedState!==null||zs;if(!y){var C=d.alternate,T=C!==null&&C.memoizedState!==null||et;C=zs;var O=et;if(zs=y,(et=T)&&!O)for(j=d;j!==null;)y=j,T=y.child,y.tag===22&&y.memoizedState!==null?gc(d):T!==null?(T.return=y,j=T):gc(d);for(;g!==null;)j=g,cc(g),g=g.sibling;j=d,zs=C,et=O}dc(r)}else d.subtreeFlags&8772&&g!==null?(g.return=d,j=g):dc(r)}}function dc(r){for(;j!==null;){var s=j;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:et||Gs(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!et)if(u===null)c.componentDidMount();else{var d=s.elementType===s.type?u.memoizedProps:Yt(s.type,u.memoizedProps);c.componentDidUpdate(d,u.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&mh(s,g,c);break;case 3:var y=s.updateQueue;if(y!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=re(s.child.stateNode);break;case 1:u=s.child.stateNode}mh(s,y,u)}break;case 5:var C=s.stateNode;u===null&&s.flags&4&&Zf(C,s.type,s.memoizedProps,s);break;case 6:break;case 4:break;case 12:break;case 13:if(st&&s.memoizedState===null){var T=s.alternate;if(T!==null){var O=T.memoizedState;if(O!==null){var W=O.dehydrated;W!==null&&yg(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}et||s.flags&512&&bl(s)}catch(q){Re(s,s.return,q)}}if(s===r){j=null;break}if(u=s.sibling,u!==null){u.return=s.return,j=u;break}j=s.return}}function fc(r){for(;j!==null;){var s=j;if(s===r){j=null;break}var u=s.sibling;if(u!==null){u.return=s.return,j=u;break}j=s.return}}function gc(r){for(;j!==null;){var s=j;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Gs(4,s)}catch(T){Re(s,u,T)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(T){Re(s,d,T)}}var g=s.return;try{bl(s)}catch(T){Re(s,g,T)}break;case 5:var y=s.return;try{bl(s)}catch(T){Re(s,y,T)}}}catch(T){Re(s,s.return,T)}if(s===r){j=null;break}var C=s.sibling;if(C!==null){C.return=s.return,j=C;break}j=s.return}}var Xs=0,Us=1,js=2,Ws=3,Ys=4;if(typeof Symbol=="function"&&Symbol.for){var Rr=Symbol.for;Xs=Rr("selector.component"),Us=Rr("selector.has_pseudo_class"),js=Rr("selector.role"),Ws=Rr("selector.test_id"),Ys=Rr("selector.text")}function ea(r){var s=tl(r);if(s!=null){if(typeof s.memoizedProps["data-testname"]!="string")throw Error(a(364));return s}if(r=as(r),r===null)throw Error(a(362));return r.stateNode.current}function ta(r,s){switch(s.$$typeof){case Xs:if(r.type===s.value)return!0;break;case Us:e:{s=s.value,r=[r,0];for(var u=0;u<r.length;){var c=r[u++],d=r[u++],g=s[d];if(c.tag!==5||!Qn(c)){for(;g!=null&&ta(c,g);)d++,g=s[d];if(d===s.length){s=!0;break e}else for(c=c.child;c!==null;)r.push(c,d),c=c.sibling}}s=!1}return s;case js:if(r.tag===5&&dt(r.stateNode,s.value))return!0;break;case Ys:if((r.tag===5||r.tag===6)&&(r=xi(r),r!==null&&0<=r.indexOf(s.value)))return!0;break;case Ws:if(r.tag===5&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===s.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function na(r){switch(r.$$typeof){case Xs:return"<"+(X(r.value)||"Unknown")+">";case Us:return":has("+(na(r)||"")+")";case js:return'[role="'+r.value+'"]';case Ys:return'"'+r.value+'"';case Ws:return'[data-testname="'+r.value+'"]';default:throw Error(a(365))}}function mc(r,s){var u=[];r=[r,0];for(var c=0;c<r.length;){var d=r[c++],g=r[c++],y=s[g];if(d.tag!==5||!Qn(d)){for(;y!=null&&ta(d,y);)g++,y=s[g];if(g===s.length)u.push(d);else for(d=d.child;d!==null;)r.push(d,g),d=d.sibling}}return u}function ia(r,s){if(!tn)throw Error(a(363));r=ea(r),r=mc(r,s),s=[],r=Array.from(r);for(var u=0;u<r.length;){var c=r[u++];if(c.tag===5)Qn(c)||s.push(c.stateNode);else for(c=c.child;c!==null;)r.push(c),c=c.sibling}return s}var nm=Math.ceil,Ks=h.ReactCurrentDispatcher,ra=h.ReactCurrentOwner,Ae=h.ReactCurrentBatchConfig,ee=0,Ue=null,Le=null,Ke=0,Rt=0,ki=An(0),ke=0,Ir=null,ii=0,Vs=0,sa=0,Tr=null,_t=null,oa=0,la=1/0,wn=null;function zi(){la=Ge()+500}var Zs=!1,aa=null,Nn=null,Bs=!1,Dn=null,Hs=0,Sr=0,ua=null,qs=-1,bs=0;function tt(){return ee&6?Ge():qs!==-1?qs:qs=Ge()}function kn(r){return r.mode&1?ee&2&&Ke!==0?Ke&-Ke:Gg.transition!==null?(bs===0&&(bs=$u()),bs):(r=se,r!==0?r:nl()):1}function Ot(r,s,u,c){if(50<Sr)throw Sr=0,ua=null,Error(a(185));cr(r,u,c),(!(ee&2)||r!==Ue)&&(r===Ue&&(!(ee&2)&&(Vs|=u),ke===4&&zn(r,Ke)),pt(r,c),u===1&&ee===0&&!(s.mode&1)&&(zi(),_s&&rn()))}function pt(r,s){var u=r.callbackNode;Mg(r,s);var c=gs(r,r===Ue?Ke:0);if(c===0)u!==null&&th(u),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(u!=null&&th(u),s===1)r.tag===0?zg(pc.bind(null,r)):nh(pc.bind(null,r)),en?Ci(function(){!(ee&6)&&rn()}):dl(fl,rn),u=null;else{switch(eh(c)){case 1:u=fl;break;case 4:u=Og;break;case 16:u=gl;break;case 536870912:u=Ng;break;default:u=gl}u=Tc(u,_c.bind(null,r))}r.callbackPriority=s,r.callbackNode=u}}function _c(r,s){if(qs=-1,bs=0,ee&6)throw Error(a(327));var u=r.callbackNode;if(oi()&&r.callbackNode!==u)return null;var c=gs(r,r===Ue?Ke:0);if(c===0)return null;if(c&30||c&r.expiredLanes||s)s=Qs(r,c);else{s=c;var d=ee;ee|=2;var g=Ec();(Ue!==r||Ke!==s)&&(wn=null,zi(),ri(r,s));do try{sm();break}catch(C){vc(r,C)}while(!0);Cl(),Ks.current=g,ee=d,Le!==null?s=0:(Ue=null,Ke=0,s=ke)}if(s!==0){if(s===2&&(d=ul(r),d!==0&&(c=d,s=ha(r,d))),s===1)throw u=Ir,ri(r,0),zn(r,c),pt(r,Ge()),u;if(s===6)zn(r,c);else{if(d=r.current.alternate,!(c&30)&&!im(d)&&(s=Qs(r,c),s===2&&(g=ul(r),g!==0&&(c=g,s=ha(r,g))),s===1))throw u=Ir,ri(r,0),zn(r,c),pt(r,Ge()),u;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(a(345));case 2:si(r,_t,wn);break;case 3:if(zn(r,c),(c&130023424)===c&&(s=oa+500-Ge(),10<s)){if(gs(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){tt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=We(si.bind(null,r,_t,wn),s);break}si(r,_t,wn);break;case 4:if(zn(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var y=31-Ut(c);g=1<<y,y=s[y],y>d&&(d=y),c&=~g}if(c=d,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*nm(c/1960))-c,10<c){r.timeoutHandle=We(si.bind(null,r,_t,wn),c);break}si(r,_t,wn);break;case 5:si(r,_t,wn);break;default:throw Error(a(329))}}}return pt(r,Ge()),r.callbackNode===u?_c.bind(null,r):null}function ha(r,s){var u=Tr;return r.current.memoizedState.isDehydrated&&(ri(r,s).flags|=256),r=Qs(r,s),r!==2&&(s=_t,_t=u,s!==null&&ca(s)),r}function ca(r){_t===null?_t=r:_t.push.apply(_t,r)}function im(r){for(var s=r;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var c=0;c<u.length;c++){var d=u[c],g=d.getSnapshot;d=d.value;try{if(!jt(g(),d))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zn(r,s){for(s&=~sa,s&=~Vs,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var u=31-Ut(s),c=1<<u;r[u]=-1,s&=~c}}function pc(r){if(ee&6)throw Error(a(327));oi();var s=gs(r,0);if(!(s&1))return pt(r,Ge()),null;var u=Qs(r,s);if(r.tag!==0&&u===2){var c=ul(r);c!==0&&(s=c,u=ha(r,c))}if(u===1)throw u=Ir,ri(r,0),zn(r,s),pt(r,Ge()),u;if(u===6)throw Error(a(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,si(r,_t,wn),pt(r,Ge()),null}function yc(r){Dn!==null&&Dn.tag===0&&!(ee&6)&&oi();var s=ee;ee|=1;var u=Ae.transition,c=se;try{if(Ae.transition=null,se=1,r)return r()}finally{se=c,Ae.transition=u,ee=s,!(ee&6)&&rn()}}function da(){Rt=ki.current,Ee(ki)}function ri(r,s){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==Xt&&(r.timeoutHandle=Xt,Jt(u)),Le!==null)for(u=Le.return;u!==null;){var c=u;switch(pl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&hs();break;case 3:Oi(),Ee(ft),Ee(Qe),Al();break;case 5:Pl(c);break;case 4:Oi();break;case 13:Ee(Se);break;case 19:Ee(Se);break;case 10:xl(c.type._context);break;case 22:case 23:da()}u=u.return}if(Ue=r,Le=r=Gn(r.current,null),Ke=Rt=s,ke=0,Ir=null,sa=Vs=ii=0,_t=Tr=null,ti!==null){for(s=0;s<ti.length;s++)if(u=ti[s],c=u.interleaved,c!==null){u.interleaved=null;var d=c.next,g=u.pending;if(g!==null){var y=g.next;g.next=d,c.next=y}u.pending=c}ti=null}return r}function vc(r,s){do{var u=Le;try{if(Cl(),Ss.current=Ls,Ps){for(var c=Pe.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Ps=!1}if(ni=0,Xe=De=Pe=null,_r=!1,pr=0,ra.current=null,u===null||u.return===null){ke=1,Ir=s,Le=null;break}e:{var g=r,y=u.return,C=u,T=s;if(s=Ke,C.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var O=T,W=C,q=W.tag;if(!(W.mode&1)&&(q===0||q===11||q===15)){var z=W.alternate;z?(W.updateQueue=z.updateQueue,W.memoizedState=z.memoizedState,W.lanes=z.lanes):(W.updateQueue=null,W.memoizedState=null)}var we=Kh(y);if(we!==null){we.flags&=-257,Vh(we,y,C,g,s),we.mode&1&&Yh(g,O,s),s=we,T=O;var fe=s.updateQueue;if(fe===null){var yt=new Set;yt.add(T),s.updateQueue=yt}else fe.add(T);break e}else{if(!(s&1)){Yh(g,O,s),fa();break e}T=Error(a(426))}}else if(xe&&C.mode&1){var Cn=Kh(y);if(Cn!==null){!(Cn.flags&65536)&&(Cn.flags|=256),Vh(Cn,y,C,g,s),El(Ni(T,C));break e}}g=T=Ni(T,C),ke!==4&&(ke=2),Tr===null?Tr=[g]:Tr.push(g),g=y;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var I=jh(g,T,s);gh(g,I);break e;case 1:C=T;var x=g.type,S=g.stateNode;if(!(g.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Nn===null||!Nn.has(S)))){g.flags|=65536,s&=-s,g.lanes|=s;var G=Wh(g,C,s);gh(g,G);break e}}g=g.return}while(g!==null)}Cc(u)}catch(V){s=V,Le===u&&u!==null&&(Le=u=u.return);continue}break}while(!0)}function Ec(){var r=Ks.current;return Ks.current=Ls,r===null?Ls:r}function fa(){(ke===0||ke===3||ke===2)&&(ke=4),Ue===null||!(ii&268435455)&&!(Vs&268435455)||zn(Ue,Ke)}function Qs(r,s){var u=ee;ee|=2;var c=Ec();(Ue!==r||Ke!==s)&&(wn=null,ri(r,s));do try{rm();break}catch(d){vc(r,d)}while(!0);if(Cl(),ee=u,Ks.current=c,Le!==null)throw Error(a(261));return Ue=null,Ke=0,ke}function rm(){for(;Le!==null;)wc(Le)}function sm(){for(;Le!==null&&!Lg();)wc(Le)}function wc(r){var s=Ic(r.alternate,r,Rt);r.memoizedProps=r.pendingProps,s===null?Cc(r):Le=s,ra.current=null}function Cc(r){var s=r;do{var u=s.alternate;if(r=s.return,s.flags&32768){if(u=Jg(u,s),u!==null){u.flags&=32767,Le=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ke=6,Le=null;return}}else if(u=Qg(u,s,Rt),u!==null){Le=u;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=r}while(s!==null);ke===0&&(ke=5)}function si(r,s,u){var c=se,d=Ae.transition;try{Ae.transition=null,se=1,om(r,s,u,c)}finally{Ae.transition=d,se=c}return null}function om(r,s,u,c){do oi();while(Dn!==null);if(ee&6)throw Error(a(327));u=r.finishedWork;var d=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(a(177));r.callbackNode=null,r.callbackPriority=0;var g=u.lanes|u.childLanes;if(Ag(r,g),r===Ue&&(Le=Ue=null,Ke=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Bs||(Bs=!0,Tc(gl,function(){return oi(),null})),g=(u.flags&15990)!==0,u.subtreeFlags&15990||g){g=Ae.transition,Ae.transition=null;var y=se;se=1;var C=ee;ee|=4,ra.current=null,em(r,u),hc(u,r),Ie(r.containerInfo),r.current=u,tm(u),Fg(),ee=C,se=y,Ae.transition=g}else r.current=u;if(Bs&&(Bs=!1,Dn=r,Hs=d),g=r.pendingLanes,g===0&&(Nn=null),Dg(u.stateNode),pt(r,Ge()),s!==null)for(c=r.onRecoverableError,u=0;u<s.length;u++)d=s[u],c(d.value,{componentStack:d.stack,digest:d.digest});if(Zs)throw Zs=!1,r=aa,aa=null,r;return Hs&1&&r.tag!==0&&oi(),g=r.pendingLanes,g&1?r===ua?Sr++:(Sr=0,ua=r):Sr=0,rn(),null}function oi(){if(Dn!==null){var r=eh(Hs),s=Ae.transition,u=se;try{if(Ae.transition=null,se=16>r?16:r,Dn===null)var c=!1;else{if(r=Dn,Dn=null,Hs=0,ee&6)throw Error(a(331));var d=ee;for(ee|=4,j=r.current;j!==null;){var g=j,y=g.child;if(j.flags&16){var C=g.deletions;if(C!==null){for(var T=0;T<C.length;T++){var O=C[T];for(j=O;j!==null;){var W=j;switch(W.tag){case 0:case 11:case 15:xr(8,W,g)}var q=W.child;if(q!==null)q.return=W,j=q;else for(;j!==null;){W=j;var z=W.sibling,we=W.return;if(oc(W),W===O){j=null;break}if(z!==null){z.return=we,j=z;break}j=we}}}var fe=g.alternate;if(fe!==null){var yt=fe.child;if(yt!==null){fe.child=null;do{var Cn=yt.sibling;yt.sibling=null,yt=Cn}while(yt!==null)}}j=g}}if(g.subtreeFlags&2064&&y!==null)y.return=g,j=y;else e:for(;j!==null;){if(g=j,g.flags&2048)switch(g.tag){case 0:case 11:case 15:xr(9,g,g.return)}var I=g.sibling;if(I!==null){I.return=g.return,j=I;break e}j=g.return}}var x=r.current;for(j=x;j!==null;){y=j;var S=y.child;if(y.subtreeFlags&2064&&S!==null)S.return=y,j=S;else e:for(y=x;j!==null;){if(C=j,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Gs(9,C)}}catch(V){Re(C,C.return,V)}if(C===y){j=null;break e}var G=C.sibling;if(G!==null){G.return=C.return,j=G;break e}j=C.return}}if(ee=d,rn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ms,r)}catch{}c=!0}return c}finally{se=u,Ae.transition=s}}return!1}function xc(r,s,u){s=Ni(u,s),s=jh(r,s,1),r=On(r,s,1),s=tt(),r!==null&&(cr(r,1,s),pt(r,s))}function Re(r,s,u){if(r.tag===3)xc(r,r,u);else for(;s!==null;){if(s.tag===3){xc(s,r,u);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Nn===null||!Nn.has(c))){r=Ni(u,r),r=Wh(s,r,1),s=On(s,r,1),r=tt(),s!==null&&(cr(s,1,r),pt(s,r));break}}s=s.return}}function lm(r,s,u){var c=r.pingCache;c!==null&&c.delete(s),s=tt(),r.pingedLanes|=r.suspendedLanes&u,Ue===r&&(Ke&u)===u&&(ke===4||ke===3&&(Ke&130023424)===Ke&&500>Ge()-oa?ri(r,0):sa|=u),pt(r,s)}function Rc(r,s){s===0&&(r.mode&1?(s=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):s=1);var u=tt();r=sn(r,s),r!==null&&(cr(r,s,u),pt(r,u))}function am(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),Rc(r,u)}function um(r,s){var u=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(u=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(a(314))}c!==null&&c.delete(s),Rc(r,u)}var Ic;Ic=function(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps||ft.current)mt=!0;else{if(!(r.lanes&u)&&!(s.flags&128))return mt=!1,bg(r,s,u);mt=!!(r.flags&131072)}else mt=!1,xe&&s.flags&1048576&&ih(s,ys,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ns(r,s),r=s.pendingProps;var d=Ii(s,Qe.current);Li(s,u),d=Ol(null,s,c,r,d,u);var g=Nl();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,gt(c)?(g=!0,cs(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Tl(s),d.updater=Fs,s.stateNode=d,d._reactInternals=s,Ul(s,c,r,u),s=Kl(null,s,c,!0,g,u)):(s.tag=0,xe&&g&&_l(s),ot(null,s,d,u),s=s.child),s;case 16:c=s.elementType;e:{switch(Ns(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=cm(c),r=Yt(c,r),d){case 0:s=Yl(null,s,c,r,u);break e;case 1:s=Qh(null,s,c,r,u);break e;case 11:s=Zh(null,s,c,r,u);break e;case 14:s=Bh(null,s,c,Yt(c.type,r),u);break e}throw Error(a(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Yt(c,d),Yl(r,s,c,d,u);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Yt(c,d),Qh(r,s,c,d,u);case 3:e:{if(Jh(s),r===null)throw Error(a(387));c=s.pendingProps,g=s.memoizedState,d=g.element,fh(r,s),Is(s,c,null,u);var y=s.memoizedState;if(c=y.element,st&&g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=Ni(Error(a(423)),s),s=$h(r,s,c,u,d);break e}else if(c!==d){d=Ni(Error(a(424)),s),s=$h(r,s,c,u,d);break e}else for(st&&(Mt=cg(s.stateNode.containerInfo),xt=s,xe=!0,Wt=null,dr=!1),u=hh(s,null,c,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Pi(),c===d){s=En(r,s,u);break e}ot(r,s,c,u)}s=s.child}return s;case 5:return _h(s),r===null&&vl(s),c=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,y=d.children,ht(c,d)?y=null:g!==null&&ht(c,g)&&(s.flags|=32),bh(r,s),ot(r,s,y,u),s.child;case 6:return r===null&&vl(s),null;case 13:return ec(r,s,u);case 4:return Sl(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Mi(s,null,c,u):ot(r,s,c,u),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Yt(c,d),Zh(r,s,c,d,u);case 7:return ot(r,s,s.pendingProps,u),s.child;case 8:return ot(r,s,s.pendingProps.children,u),s.child;case 12:return ot(r,s,s.pendingProps.children,u),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,g=s.memoizedProps,y=d.value,ch(s,c,y),g!==null)if(jt(g.value,y)){if(g.children===d.children&&!ft.current){s=En(r,s,u);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){y=g.child;for(var T=C.firstContext;T!==null;){if(T.context===c){if(g.tag===1){T=vn(-1,u&-u),T.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var W=O.pending;W===null?T.next=T:(T.next=W.next,W.next=T),O.pending=T}}g.lanes|=u,T=g.alternate,T!==null&&(T.lanes|=u),Rl(g.return,u,s),C.lanes|=u;break}T=T.next}}else if(g.tag===10)y=g.type===s.type?null:g.child;else if(g.tag===18){if(y=g.return,y===null)throw Error(a(341));y.lanes|=u,C=y.alternate,C!==null&&(C.lanes|=u),Rl(y,u,s),y=g.sibling}else y=g.child;if(y!==null)y.return=g;else for(y=g;y!==null;){if(y===s){y=null;break}if(g=y.sibling,g!==null){g.return=y.return,y=g;break}y=y.return}g=y}ot(r,s,d.children,u),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,Li(s,u),d=At(d),c=c(d),s.flags|=1,ot(r,s,c,u),s.child;case 14:return c=s.type,d=Yt(c,s.pendingProps),d=Yt(c.type,d),Bh(r,s,c,d,u);case 15:return Hh(r,s,s.type,s.pendingProps,u);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Yt(c,d),Ns(r,s),s.tag=1,gt(c)?(r=!0,cs(s)):r=!1,Li(s,u),Xh(s,c,d),Ul(s,c,d,u),Kl(null,s,c,!0,r,u);case 19:return nc(r,s,u);case 22:return qh(r,s,u)}throw Error(a(156,s.tag))};function Tc(r,s){return dl(r,s)}function hm(r,s,u,c){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(r,s,u,c){return new hm(r,s,u,c)}function ga(r){return r=r.prototype,!(!r||!r.isReactComponent)}function cm(r){if(typeof r=="function")return ga(r)?1:0;if(r!=null){if(r=r.$$typeof,r===R)return 11;if(r===A)return 14}return 2}function Gn(r,s){var u=r.alternate;return u===null?(u=Nt(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function Js(r,s,u,c,d,g){var y=2;if(c=r,typeof r=="function")ga(r)&&(y=1);else if(typeof r=="string")y=5;else e:switch(r){case m:return li(u.children,d,g,s);case p:y=8,d|=8;break;case v:return r=Nt(12,u,s,d|2),r.elementType=v,r.lanes=g,r;case P:return r=Nt(13,u,s,d),r.elementType=P,r.lanes=g,r;case L:return r=Nt(19,u,s,d),r.elementType=L,r.lanes=g,r;case N:return $s(u,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case w:y=10;break e;case E:y=9;break e;case R:y=11;break e;case A:y=14;break e;case D:y=16,c=null;break e}throw Error(a(130,r==null?r:typeof r,""))}return s=Nt(y,u,s,d),s.elementType=r,s.type=c,s.lanes=g,s}function li(r,s,u,c){return r=Nt(7,r,c,s),r.lanes=u,r}function $s(r,s,u,c){return r=Nt(22,r,c,s),r.elementType=N,r.lanes=u,r.stateNode={isHidden:!1},r}function ma(r,s,u){return r=Nt(6,r,null,s),r.lanes=u,r}function _a(r,s,u){return s=Nt(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function dm(r,s,u,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=c,this.onRecoverableError=d,st&&(this.mutableSourceEagerHydrationData=null)}function Sc(r,s,u,c,d,g,y,C,T){return r=new dm(r,s,u,C,T),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Nt(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(g),r}function Pc(r){if(!r)return Ln;r=r._reactInternals;e:{if(Y(r)!==r||r.tag!==1)throw Error(a(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(r.tag===1){var u=r.type;if(gt(u))return Qu(r,u,s)}return s}function Mc(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=me(s),r===null?null:r.stateNode}function Ac(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function eo(r,s){Ac(r,s),(r=r.alternate)&&Ac(r,s)}function fm(r){return r=me(r),r===null?null:r.stateNode}function gm(){return null}return t.attemptContinuousHydration=function(r){if(r.tag===13){var s=sn(r,134217728);if(s!==null){var u=tt();Ot(s,r,134217728,u)}eo(r,134217728)}},t.attemptDiscreteHydration=function(r){if(r.tag===13){var s=sn(r,1);if(s!==null){var u=tt();Ot(s,r,1,u)}eo(r,1)}},t.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var s=kn(r),u=sn(r,s);if(u!==null){var c=tt();Ot(u,r,s,c)}eo(r,s)}},t.attemptSynchronousHydration=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var u=hr(s.pendingLanes);u!==0&&(cl(s,u|1),pt(s,Ge()),!(ee&6)&&(zi(),rn()))}break;case 13:yc(function(){var c=sn(r,1);if(c!==null){var d=tt();Ot(c,r,1,d)}}),eo(r,1)}},t.batchedUpdates=function(r,s){var u=ee;ee|=1;try{return r(s)}finally{ee=u,ee===0&&(zi(),_s&&rn())}},t.createComponentSelector=function(r){return{$$typeof:Xs,value:r}},t.createContainer=function(r,s,u,c,d,g,y){return Sc(r,s,!1,null,u,c,d,g,y)},t.createHasPseudoClassSelector=function(r){return{$$typeof:Us,value:r}},t.createHydrationContainer=function(r,s,u,c,d,g,y,C,T){return r=Sc(u,c,!0,r,d,g,y,C,T),r.context=Pc(null),u=r.current,c=tt(),d=kn(u),g=vn(c,d),g.callback=s??null,On(u,g,d),r.current.lanes=d,cr(r,d,c),pt(r,c),r},t.createPortal=function(r,s,u){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:c==null?null:""+c,children:r,containerInfo:s,implementation:u}},t.createRoleSelector=function(r){return{$$typeof:js,value:r}},t.createTestNameSelector=function(r){return{$$typeof:Ws,value:r}},t.createTextSelector=function(r){return{$$typeof:Ys,value:r}},t.deferredUpdates=function(r){var s=se,u=Ae.transition;try{return Ae.transition=null,se=16,r()}finally{se=s,Ae.transition=u}},t.discreteUpdates=function(r,s,u,c,d){var g=se,y=Ae.transition;try{return Ae.transition=null,se=1,r(s,u,c,d)}finally{se=g,Ae.transition=y,ee===0&&zi()}},t.findAllNodes=ia,t.findBoundingRects=function(r,s){if(!tn)throw Error(a(363));s=ia(r,s),r=[];for(var u=0;u<s.length;u++)r.push(ar(s[u]));for(s=r.length-1;0<s;s--){u=r[s];for(var c=u.x,d=c+u.width,g=u.y,y=g+u.height,C=s-1;0<=C;C--)if(s!==C){var T=r[C],O=T.x,W=O+T.width,q=T.y,z=q+T.height;if(c>=O&&g>=q&&d<=W&&y<=z){r.splice(s,1);break}else if(c!==O||u.width!==T.width||z<g||q>y){if(!(g!==q||u.height!==T.height||W<c||O>d)){O>c&&(T.width+=O-c,T.x=c),W<d&&(T.width=d-O),r.splice(s,1);break}}else{q>g&&(T.height+=q-g,T.y=g),z<y&&(T.height=y-q),r.splice(s,1);break}}}return r},t.findHostInstance=Mc,t.findHostInstanceWithNoPortals=function(r){return r=ye(r),r=r!==null?Q(r):null,r===null?null:r.stateNode},t.findHostInstanceWithWarning=function(r){return Mc(r)},t.flushControlled=function(r){var s=ee;ee|=1;var u=Ae.transition,c=se;try{Ae.transition=null,se=1,r()}finally{se=c,Ae.transition=u,ee=s,ee===0&&(zi(),rn())}},t.flushPassiveEffects=oi,t.flushSync=yc,t.focusWithin=function(r,s){if(!tn)throw Error(a(363));for(r=ea(r),s=mc(r,s),s=Array.from(s),r=0;r<s.length;){var u=s[r++];if(!Qn(u)){if(u.tag===5&&jf(u.stateNode))return!0;for(u=u.child;u!==null;)s.push(u),u=u.sibling}}return!1},t.getCurrentUpdatePriority=function(){return se},t.getFindAllNodesFailureDescription=function(r,s){if(!tn)throw Error(a(363));var u=0,c=[];r=[ea(r),0];for(var d=0;d<r.length;){var g=r[d++],y=r[d++],C=s[y];if((g.tag!==5||!Qn(g))&&(ta(g,C)&&(c.push(na(C)),y++,y>u&&(u=y)),y<s.length))for(g=g.child;g!==null;)r.push(g,y),g=g.sibling}if(u<s.length){for(r=[];u<s.length;u++)r.push(na(s[u]));return`findAllNodes was able to match part of the selector:
  `+(c.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},t.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return re(r.child.stateNode);default:return r.child.stateNode}},t.injectIntoDevTools=function(r){if(r={bundleType:r.bundleType,version:r.version,rendererPackageName:r.rendererPackageName,rendererConfig:r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:fm,findFiberByHostInstance:r.findFiberByHostInstance||gm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled||!s.supportsFiber)r=!0;else{try{ms=s.inject(r),nn=s}catch{}r=!!s.checkDCE}}return r},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(r,s,u,c){if(!tn)throw Error(a(363));r=ia(r,s);var d=Wf(r,u,c).disconnect;return{disconnect:function(){d()}}},t.registerMutableSourceForHydration=function(r,s){var u=s._getVersion;u=u(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,u]:r.mutableSourceEagerHydrationData.push(s,u)},t.runWithPriority=function(r,s){var u=se;try{return se=r,s()}finally{se=u}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(r,s,u,c){var d=s.current,g=tt(),y=kn(d);return u=Pc(u),s.context===null?s.context=u:s.pendingContext=u,s=vn(g,y),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=On(d,s,y),r!==null&&(Ot(r,d,y,g),Rs(r,d,y)),y},t};Gf.exports=by;var Qy=Gf.exports;const Jy=pm(Qy);var Xf={exports:{}},wi={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */wi.ConcurrentRoot=1;wi.ContinuousEventPriority=4;wi.DefaultEventPriority=16;wi.DiscreteEventPriority=1;wi.IdleEventPriority=536870912;wi.LegacyRoot=0;Xf.exports=wi;var Uf=Xf.exports;const $y=[{key:"fill-color",cssVar:"--data-source-polygon-fill-color",fallback:"rgba(126, 188, 111, 0.1)"},{key:"stroke-color",cssVar:"--data-source-polygon-stroke-color",fallback:"rgba(91, 124, 186, 1)"},{key:"stroke-width",cssVar:"--data-source-polygon-stroke-width",fallback:2,parse:Number.parseFloat},{key:"circle-radius",cssVar:"--data-source-circle-radius",fallback:10,parse:Number.parseFloat},{key:"circle-fill-color",cssVar:"--data-source-circle-fill-color",fallback:"rgba(255, 0, 0, 0.5)"},{key:"circle-stroke-color",cssVar:"--data-source-circle-stroke-color",fallback:"rgba(0, 0, 255, 1)"},{key:"circle-stroke-width",cssVar:"--data-source-circle-stroke-width",fallback:2,parse:Number.parseFloat}];function e1(i,e){const t=new MutationObserver(n=>{for(const o of n)o.type==="attributes"&&(o.attributeName==="style"||o.attributeName==="class")&&e()});return t.observe(i,{attributes:!0,attributeFilter:["style","class"]}),t}const t1=(i,e)=>{const t=i.element,n=e.getTargetElement(),o=$y,l=()=>{const h=getComputedStyle(n),f=o.reduce((_,{key:m,cssVar:p,fallback:v,parse:w})=>{const E=h.getPropertyValue(p)||v;return _[m]=w?w(E):E,_},{});t.setStyle(f)};e.addLayer(t),e1(n,l).observe(n,{attributes:!0,attributeFilter:["style","class"]}),l(),t.getSource()?.once("change",()=>{if(t.getSource()?.getState()==="ready"){const h=t.getSource()?.getExtent();i.props?.fitViewToData&&h&&!h.every(f=>!Number.isFinite(f))&&e.getView().fit(h,{padding:[20,20,20,20],maxZoom:19,duration:1e3}),e.on("click",f=>{const _=e.getFeaturesAtPixel(f.pixel);_.length>0?i.props.onClick?.(_[0].getProperties()):i.props.onClick?.()}),e.on("pointermove",f=>{const _=e.getFeaturesAtPixel(f.pixel);_.length>0?i.props.onHover?.(_[0].getProperties()):i.props.onMissed?.()})}})},n1=(i,e)=>{const t=i;e.addOverlay(t.popupOverlay),t||console.error("popupInstance is null, this feature is WIP"),e.on("singleclick",n=>{const o=e.forEachFeatureAtPixel(n.pixel,l=>l);if(t.props.overlay){const l=ym.createRoot(t.props.overlayPortalContainer);if(o){const a=n.coordinate;t.popupOverlay.setPosition(a),l.render(t.popupFunc(o.getProperties()))}else t.popupOverlay?.setPosition(void 0),t.popupOverlay?.getElement()&&l.unmount()}})},Td=new WeakMap;function i1(i,e){try{if(i===rs&&typeof e.layerConstructor=="function"){const t=new g0({url:e.url,format:new Ny}),n=new e.layerConstructor({source:t});return{type:i,element:n,props:e}}if(i===Ou){const t=new Mf({element:e.overlayPortalContainer});return{type:i,element:t,props:e}}}catch(t){return console.error("Error in createInstance",t),null}return null}function r1(i,e){i instanceof el&&(e.type===rs?t1(e,i):e.type===Ou&&n1(e,i))}function s1(i,e){i?.element instanceof el&&e.type===rs?(i.element.removeLayer(e.element),i.element.un("click",e.props.onClick),i.element.un("pointermove",e.props.onHover),i.element.un("pointermove",e.props.onMissed)):e?.element instanceof Mf&&e.popupOverlay.setMap(null)}function o1(i,e,t,n){t===rs&&e.url&&(i?.element).getSource()&&(i?.element).getSource()?.setUrl(e.url)}function l1(i,e,t,n){return e===rs&&t.url!==n.url?{url:n.url}:e===Ou&&t.overlay!==n.overlay?{overlay:n.overlay}:null}const Sd=Jy({supportsMutation:!0,createInstance:i1,createTextInstance:()=>null,appendChildToContainer:r1,appendChild:(i,e)=>{},removeChild:s1,insertBefore:(i,e,t)=>{},commitUpdate:o1,removeChildFromContainer:(i,e)=>{i instanceof el&&i.removeLayer(e?.element)},insertInContainerBefore:(i,e,t)=>{},prepareUpdate:l1,finalizeInitialChildren:()=>!1,getPublicInstance:i=>i,getChildHostContext:()=>({}),getRootHostContext:()=>({}),getCurrentEventPriority:()=>Uf.DefaultEventPriority,prepareForCommit:()=>null,resetAfterCommit:()=>{},clearContainer:()=>null,appendInitialChild:(i,e)=>{},shouldSetTextContent:()=>!1,detachDeletedInstance:()=>{},supportsPersistence:!1,preparePortalMount:()=>{},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,isPrimaryRenderer:!1,warnsIfNotActing:!0,getInstanceFromNode:()=>null,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},prepareScopeUpdate:()=>{},getInstanceFromScope:()=>null,supportsHydration:!1});function a1(i,e){let t=Td.get(e);t||(t=Sd.createContainer(e,Uf.ConcurrentRoot,null,!1,null,"",()=>{},null),Td.set(e,t)),Sd.updateContainer(i,t,null,()=>{})}function u1(i,e){const t=Vn.useRef(null),n=e??t,o=Vn.useRef(null),l=Vn.useId();return Vn.useEffect(()=>{t.current||(t.current=new el({target:l,view:new cn({center:[0,0],zoom:1}),layers:[new uy({source:new My})],controls:[]})),typeof n=="function"?n(t.current):n.current===null&&t.current&&(n.current=t.current)},[]),Vn.useEffect(()=>{t.current&&i.children&&a1(i.children,t.current)},[i.children]),vm.createElement("div",{id:l,ref:o,className:i.className?`react-geojson-map ${i.className}`:"react-geojson-map",style:{width:"100%",height:"100%"}})}const M1=Vn.forwardRef(u1);export{kt as $,x1 as A,Ce as B,p_ as C,fi as D,I1 as E,nr as F,M1 as G,zt as H,sr as I,T1 as J,cu as K,g1 as L,a0 as M,R1 as N,qn as O,He as P,go as Q,Ve as R,qr as S,tr as T,Ld as U,m1 as V,Mu as W,Fe as X,ie as Y,s0 as Z,l0 as _,kc as a,pe as a0,at as a1,Vr as a2,S1 as a3,dn as a4,hi as a5,eu as a6,Jm as a7,qm as a8,o_ as a9,t0 as aa,rs as ab,pu as b,$a as c,I_ as d,ed as e,id as f,cp as g,rd as h,Wo as i,c1 as j,y1 as k,v1 as l,sd as m,dp as n,hp as o,Oo as p,Ym as q,d1 as r,f1 as s,Xi as t,ba as u,es as v,C1 as w,E1 as x,w1 as y,p1 as z};
