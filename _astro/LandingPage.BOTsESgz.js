import{r as Qn,s as d_,g as f_,R as Od,a as g_}from"./index.C0Tw76Oi.js";var Df={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_=Qn,__=Symbol.for("react.element"),p_=Symbol.for("react.fragment"),y_=Object.prototype.hasOwnProperty,x_=m_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E_={key:!0,ref:!0,__self:!0,__source:!0};function kf(r,e,t){var n,i={},l=null,a=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)y_.call(e,n)&&!E_.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:__,type:r,key:l,ref:a,props:i,_owner:x_.current}}Gl.Fragment=p_;Gl.jsx=kf;Gl.jsxs=kf;Df.exports=Gl;var wu=Df.exports;class ii{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ur={PROPERTYCHANGE:"propertychange"};class Wl{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function v_(r,e,t){let n,i;t=t||Jn;let l=0,a=r.length,u=!1;for(;l<a;)n=l+(a-l>>1),i=+t(r[n],e),i<0?l=n+1:(a=n,u=!i);return u?l:~l}function Jn(r,e){return r>e?1:r<e?-1:0}function oh(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let i=1;i<n;++i){const l=r[i];if(l===e)return i;if(l<e)return t(e,r[i-1],l)>0?i-1:i}return n-1}if(t>0){for(let i=1;i<n;++i)if(r[i]<e)return i-1;return n-1}if(t<0){for(let i=1;i<n;++i)if(r[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return r[i-1]-e<e-r[i]?i-1:i}return n-1}function C_(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function kn(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let i=0;i<n;i++)r[r.length]=t[i]}function Oi(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function w_(r,e,t){const n=e||Jn;return r.every(function(i,l){if(l===0)return!0;const a=n(r[l-1],i);return!(a>0||a===0)})}function Gs(){return!0}function Xl(){return!1}function Br(){}function Nf(r){let e,t,n;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==n||!Oi(i,t))&&(n=this,t=i,e=r.apply(this,arguments)),e}}function S_(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function $s(r){for(const e in r)delete r[e]}function ir(r){let e;for(e in r)return!1;return!e}class Yl extends Wl{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const l=t?new ii(e):e;l.target||(l.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,u[n]=0),++a[n];let c;for(let m=0,g=i.length;m<g;++m)if("handleEvent"in i[m]?c=i[m].handleEvent(l):c=i[m].call(this,l),c===!1||l.propagationStopped){c=!1;break}if(--a[n]===0){let m=u[n];for(delete u[n];m--;)this.removeEventListener(n,Br);delete a[n]}return c}disposeInternal(){this.listeners_&&$s(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=Br,++this.pendingRemovals_[e]):(n.splice(i,1),n.length===0&&delete this.listeners_[e]))}}const re={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function me(r,e,t,n,i){if(i){const a=t;t=function(){r.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function vl(r,e,t,n){return me(r,e,t,n,!0)}function Re(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),$s(r))}class eo extends Yl{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(re.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=me(this,e[l],t);return i}return me(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const i=e.length;n=new Array(i);for(let l=0;l<i;++l)n[l]=vl(this,e[l],t)}else n=vl(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)R_(n);else if(Array.isArray(e))for(let i=0,l=e.length;i<l;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}eo.prototype.on;eo.prototype.once;eo.prototype.un;function R_(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Re(r[e]);else Re(r)}function ie(){throw new Error("Unimplemented abstract method.")}let I_=0;function we(r){return r.ol_uid||(r.ol_uid=String(++I_))}class Fd extends ii{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class En extends eo{constructor(e){super(),this.on,this.once,this.un,we(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Fd(n,e,t)),n=Ur.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Fd(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const i=this.values_||(this.values_={});if(n)i[e]=t;else{const l=i[e];i[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ir(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Se={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function xe(r,e){if(!r)throw new Error(e)}function Ge(r,e,t){return Math.min(Math.max(r,e),t)}function T_(r,e,t,n,i,l){const a=i-t,u=l-n;if(a!==0||u!==0){const c=((r-t)*a+(e-n)*u)/(a*a+u*u);c>1?(t=i,n=l):c>0&&(t+=a*c,n+=u*c)}return tr(r,e,t,n)}function tr(r,e,t,n){const i=t-r,l=n-e;return i*i+l*l}function P_(r){const e=r.length;for(let n=0;n<e;n++){let i=n,l=Math.abs(r[n][n]);for(let u=n+1;u<e;u++){const c=Math.abs(r[u][n]);c>l&&(l=c,i=u)}if(l===0)return null;const a=r[i];r[i]=r[n],r[n]=a;for(let u=n+1;u<e;u++){const c=-r[u][n]/r[n][n];for(let m=n;m<e+1;m++)n==m?r[u][m]=0:r[u][m]+=c*r[n][m]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let i=n-1;i>=0;i--)r[i][e]-=r[i][n]*t[n]}return t}function xl(r){return r*Math.PI/180}function Yr(r,e){const t=r%e;return t*e<0?t+e:t}function Yt(r,e,t){return r+t*(e-r)}function lh(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function ll(r,e){return Math.floor(lh(r,e))}function al(r,e){return Math.ceil(lh(r,e))}class zf extends En{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Se.OPACITY]=e.opacity!==void 0?e.opacity:1,xe(typeof t[Se.OPACITY]=="number","Layer opacity must be a number"),t[Se.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Se.Z_INDEX]=e.zIndex,t[Se.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Se.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Se.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Se.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ge(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ie()}getLayerStatesArray(e){return ie()}getExtent(){return this.get(Se.EXTENT)}getMaxResolution(){return this.get(Se.MAX_RESOLUTION)}getMinResolution(){return this.get(Se.MIN_RESOLUTION)}getMinZoom(){return this.get(Se.MIN_ZOOM)}getMaxZoom(){return this.get(Se.MAX_ZOOM)}getOpacity(){return this.get(Se.OPACITY)}getSourceState(){return ie()}getVisible(){return this.get(Se.VISIBLE)}getZIndex(){return this.get(Se.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Se.EXTENT,e)}setMaxResolution(e){this.set(Se.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Se.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Se.MAX_ZOOM,e)}setMinZoom(e){this.set(Se.MIN_ZOOM,e)}setOpacity(e){xe(typeof e=="number","Layer opacity must be a number"),this.set(Se.OPACITY,e)}setVisible(e){this.set(Se.VISIBLE,e)}setZIndex(e){this.set(Se.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const nn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},pt={ANIMATING:0,INTERACTING:1},mn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},L_=42,ah=256,uh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Gf{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||uh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const to=6378137,Wr=Math.PI*to,M_=[-Wr,-Wr,Wr,Wr],A_=[-180,-85,180,85],ul=to*Math.log(Math.tan(Math.PI/2));class Tr extends Gf{constructor(e){super({code:e,units:"m",extent:M_,global:!0,worldExtent:A_,getPointResolution:function(t,n){return t/Math.cosh(n[1]/to)}})}}const Dd=[new Tr("EPSG:3857"),new Tr("EPSG:102100"),new Tr("EPSG:102113"),new Tr("EPSG:900913"),new Tr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Tr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function O_(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let l=0;l<i;l+=n){e[l]=Wr*r[l]/180;let a=to*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));a>ul?a=ul:a<-ul&&(a=-ul),e[l+1]=a}return e}function F_(r,e,t,n){const i=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(i));for(let l=0;l<i;l+=n)e[l]=180*r[l]/Wr,e[l+1]=360*Math.atan(Math.exp(r[l+1]/to))/Math.PI-90;return e}const D_=6378137,kd=[-180,-90,180,90],k_=Math.PI*D_/180;class bi extends Gf{constructor(e,t){super({code:e,units:"degrees",extent:kd,axisOrientation:t,global:!0,metersPerUnit:k_,worldExtent:kd})}}const Nd=[new bi("CRS:84"),new bi("EPSG:4326","neu"),new bi("urn:ogc:def:crs:OGC:1.3:CRS84"),new bi("urn:ogc:def:crs:OGC:2:84"),new bi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new bi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new bi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Uu={};function N_(r){return Uu[r]||Uu[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function z_(r,e){Uu[r]=e}let jr={};function Cl(r,e,t){const n=r.getCode(),i=e.getCode();n in jr||(jr[n]={}),jr[n][i]=t}function G_(r,e){let t;return r in jr&&e in jr[r]&&(t=jr[r][e]),t}const nt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function zd(r){const e=rn();for(let t=0,n=r.length;t<n;++t)zs(e,r[t]);return e}function hh(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function Wf(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function sr(r,e,t){let n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function Kr(r,e){return ch(r,e[0],e[1])}function Qi(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function ch(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Bu(r,e){const t=r[0],n=r[1],i=r[2],l=r[3],a=e[0],u=e[1];let c=nt.UNKNOWN;return a<t?c=c|nt.LEFT:a>i&&(c=c|nt.RIGHT),u<n?c=c|nt.BELOW:u>l&&(c=c|nt.ABOVE),c===nt.UNKNOWN&&(c=nt.INTERSECTING),c}function rn(){return[1/0,1/0,-1/0,-1/0]}function Pi(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function no(r){return Pi(1/0,1/0,-1/0,-1/0,r)}function Xf(r,e){const t=r[0],n=r[1];return Pi(t,n,t,n,e)}function dh(r,e,t,n,i){const l=no(i);return jf(l,r,e,t,n)}function Ws(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function Yf(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function zs(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function jf(r,e,t,n,i){for(;t<n;t+=i)W_(r,e[t],e[t+1]);return r}function W_(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function Uf(r,e){let t;return t=e(jl(r)),t||(t=e(Ul(r)),t)||(t=e(Bl(r)),t)||(t=e(or(r)),t)?t:!1}function Xs(r){let e=0;return Kl(r)||(e=Ce(r)*yt(r)),e}function jl(r){return[r[0],r[1]]}function Ul(r){return[r[2],r[1]]}function Li(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function X_(r,e){let t;if(e==="bottom-left")t=jl(r);else if(e==="bottom-right")t=Ul(r);else if(e==="top-left")t=or(r);else if(e==="top-right")t=Bl(r);else throw new Error("Invalid corner");return t}function Ku(r,e,t,n,i){const[l,a,u,c,m,g,p,y]=Y_(r,e,t,n);return Pi(Math.min(l,u,m,p),Math.min(a,c,g,y),Math.max(l,u,m,p),Math.max(a,c,g,y),i)}function Y_(r,e,t,n){const i=e*n[0]/2,l=e*n[1]/2,a=Math.cos(t),u=Math.sin(t),c=i*a,m=i*u,g=l*a,p=l*u,y=r[0],x=r[1];return[y-c+p,x-m-g,y-c-p,x-m+g,y+c-p,x+m+g,y+c+p,x+m-g,y-c+p,x-m-g]}function yt(r){return r[3]-r[1]}function pn(r,e,t){const n=t||rn();return Dt(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):no(n),n}function or(r){return[r[0],r[3]]}function Bl(r){return[r[2],r[3]]}function Ce(r){return r[2]-r[0]}function Dt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Kl(r){return r[2]<r[0]||r[3]<r[1]}function j_(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function U_(r,e,t){let n=!1;const i=Bu(r,e),l=Bu(r,t);if(i===nt.INTERSECTING||l===nt.INTERSECTING)n=!0;else{const a=r[0],u=r[1],c=r[2],m=r[3],g=e[0],p=e[1],y=t[0],x=t[1],v=(x-p)/(y-g);let C,w;l&nt.ABOVE&&!(i&nt.ABOVE)&&(C=y-(x-m)/v,n=C>=a&&C<=c),!n&&l&nt.RIGHT&&!(i&nt.RIGHT)&&(w=x-(y-c)*v,n=w>=u&&w<=m),!n&&l&nt.BELOW&&!(i&nt.BELOW)&&(C=y-(x-u)/v,n=C>=a&&C<=c),!n&&l&nt.LEFT&&!(i&nt.LEFT)&&(w=x-(y-a)*v,n=w>=u&&w<=m)}return n}function Bf(r,e){const t=e.getExtent(),n=Li(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const i=Ce(t),a=Math.floor((n[0]-t[0])/i)*i;r[0]-=a,r[2]-=a}return r}function fh(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];Bf(r,e);const i=Ce(n);if(Ce(r)>i&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+i,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-i,r[3]]]}return[r]}function B_(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function wl(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function gh(r,e){const t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=i,r[1]=l,r}function K_(r,e){return r[0]*=e,r[1]*=e,r}function Kf(r,e){if(e.canWrapX()){const t=Ce(e.getExtent()),n=Z_(r,e,t);n&&(r[0]-=n*t)}return r}function Z_(r,e,t){const n=e.getExtent();let i=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||Ce(n),i=Math.floor((r[0]-n[0])/t)),i}const V_=63710088e-1;function Gd(r,e,t){t=t||V_;const n=xl(r[1]),i=xl(e[1]),l=(i-n)/2,a=xl(e[0]-r[0])/2,u=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function Zf(...r){console.warn(...r)}let Zu=!0;function b_(r){Zu=!1}function mh(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Vf(r,e){if(e!==void 0&&r!==e){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];r=e}return r}function H_(r){z_(r.getCode(),r),Cl(r,r,mh)}function q_(r){r.forEach(H_)}function Ze(r){return typeof r=="string"?N_(r):r||null}function Wd(r,e,t,n){r=Ze(r);let i;const l=r.getPointResolutionFunc();if(l)i=l(e,t);else{const a=r.getUnits();if(a=="degrees"&&!n||n=="degrees")i=e;else{const u=ph(r,Ze("EPSG:4326"));if(u===Vf&&a!=="degrees")i=e*r.getMetersPerUnit();else{let m=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];m=u(m,m,2);const g=Gd(m.slice(0,2),m.slice(2,4)),p=Gd(m.slice(4,6),m.slice(6,8));i=(g+p)/2}const c=r.getMetersPerUnit();c!==void 0&&(i/=c)}}return i}function Xd(r){q_(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Cl(e,t,mh)})})}function Q_(r,e,t,n){r.forEach(function(i){e.forEach(function(l){Cl(i,l,t),Cl(l,i,n)})})}function _h(r,e){return r?typeof r=="string"?Ze(r):r:Ze(e)}function El(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||ph(r,e)===mh)&&t}function ph(r,e){const t=r.getCode(),n=e.getCode();let i=G_(t,n);return i||(i=Vf),i}function Ys(r,e){const t=Ze(r),n=Ze(e);return ph(t,n)}function J_(r,e,t){return Ys(e,t)(r,void 0,r.length)}function Vu(r,e){return r}function Vn(r,e){return Zu&&!wl(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Zu=!1,Zf("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function bf(r,e){return r}function Si(r,e){return r}function $_(){Xd(Dd),Xd(Nd),Q_(Nd,Dd,O_,F_)}$_();function Yd(r,e,t){return function(n,i,l,a,u){if(!n)return;if(!i&&!e)return n;const c=e?0:l[0]*i,m=e?0:l[1]*i,g=u?u[0]:0,p=u?u[1]:0;let y=r[0]+c/2+g,x=r[2]-c/2+g,v=r[1]+m/2+p,C=r[3]-m/2+p;y>x&&(y=(x+y)/2,x=y),v>C&&(v=(C+v)/2,C=v);let w=Ge(n[0],y,x),S=Ge(n[1],v,C);if(a&&t&&i){const R=30*i;w+=-R*Math.log(1+Math.max(0,y-n[0])/R)+R*Math.log(1+Math.max(0,n[0]-x)/R),S+=-R*Math.log(1+Math.max(0,v-n[1])/R)+R*Math.log(1+Math.max(0,n[1]-C)/R)}return[w,S]}}function ep(r){return r}function yh(r,e,t,n){const i=Ce(e)/t[0],l=yt(e)/t[1];return n?Math.min(r,Math.max(i,l)):Math.min(r,Math.min(i,l))}function xh(r,e,t){let n=Math.min(r,e);const i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),Ge(n,t/2,e*2)}function tp(r,e,t,n){return e=e!==void 0?e:!0,function(i,l,a,u){if(i!==void 0){const c=r[0],m=r[r.length-1],g=t?yh(c,t,a,n):c;if(u)return e?xh(i,g,m):Ge(i,m,g);const p=Math.min(g,i),y=Math.floor(oh(r,p,l));return r[y]>g&&y<r.length-1?r[y+1]:r[y]}}}function np(r,e,t,n,i,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,u,c,m){if(a!==void 0){const g=i?yh(e,i,c,l):e;if(m)return n?xh(a,g,t):Ge(a,t,g);const p=1e-9,y=Math.ceil(Math.log(e/g)/Math.log(r)-p),x=-u*(.5-p)+.5,v=Math.min(g,a),C=Math.floor(Math.log(e/v)/Math.log(r)+x),w=Math.max(y,C),S=e/Math.pow(r,w);return Ge(S,t,g)}}}function jd(r,e,t,n,i){return t=t!==void 0?t:!0,function(l,a,u,c){if(l!==void 0){const m=n?yh(r,n,u,i):r;return!t||!c?Ge(l,e,m):xh(l,m,e)}}}function Eh(r){if(r!==void 0)return 0}function Ud(r){if(r!==void 0)return r}function ip(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function rp(r){const e=xl(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function Hf(r){return Math.pow(r,3)}function Qr(r){return 1-Hf(1-r)}function sp(r){return 3*r*r-2*r*r*r}function op(r){return r}new Array(6);function yn(){return[1,0,0,1,0,0]}function lp(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function lt(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function ni(r,e,t,n,i,l,a,u){const c=Math.sin(l),m=Math.cos(l);return r[0]=n*m,r[1]=i*c,r[2]=-n*c,r[3]=i*m,r[4]=a*n*m-u*n*c+e,r[5]=a*i*c+u*i*m+t,r}function qf(r,e){const t=ap(e);xe(t!==0,"Transformation matrix cannot be inverted");const n=e[0],i=e[1],l=e[2],a=e[3],u=e[4],c=e[5];return r[0]=a/t,r[1]=-i/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*c-a*u)/t,r[5]=-(n*c-i*u)/t,r}function ap(r){return r[0]*r[3]-r[1]*r[2]}const Bd=[1e6,1e6,1e6,1e6,2,2];function up(r){return"matrix("+r.map((t,n)=>Math.round(t*Bd[n])/Bd[n]).join(", ")+")"}function Ti(r,e,t,n,i,l,a){l=l||[],a=a||2;let u=0;for(let c=e;c<t;c+=n){const m=r[c],g=r[c+1];l[u++]=i[0]*m+i[2]*g+i[4],l[u++]=i[1]*m+i[3]*g+i[5];for(let p=2;p<a;p++)l[u++]=r[c+p]}return l&&l.length!=u&&(l.length=u),l}function Qf(r,e,t,n,i,l,a){a=a||[];const u=Math.cos(i),c=Math.sin(i),m=l[0],g=l[1];let p=0;for(let y=e;y<t;y+=n){const x=r[y]-m,v=r[y+1]-g;a[p++]=m+x*u-v*c,a[p++]=g+x*c+v*u;for(let C=y+2;C<y+n;++C)a[p++]=r[C]}return a&&a.length!=p&&(a.length=p),a}function hp(r,e,t,n,i,l,a,u){u=u||[];const c=a[0],m=a[1];let g=0;for(let p=e;p<t;p+=n){const y=r[p]-c,x=r[p+1]-m;u[g++]=c+i*y,u[g++]=m+l*x;for(let v=p+2;v<p+n;++v)u[g++]=r[v]}return u&&u.length!=g&&(u.length=g),u}function cp(r,e,t,n,i,l,a){a=a||[];let u=0;for(let c=e;c<t;c+=n){a[u++]=r[c]+i,a[u++]=r[c+1]+l;for(let m=c+2;m<c+n;++m)a[u++]=r[m]}return a&&a.length!=u&&(a.length=u),a}const Kd=yn();class Jf extends En{constructor(){super(),this.extent_=rn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Nf((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ie()}closestPointXY(e,t,n,i){return ie()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ie()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&no(t),this.extentRevision_=this.getRevision()}return j_(this.extent_,e)}rotate(e,t){ie()}scale(e,t,n){ie()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ie()}getType(){return ie()}applyTransform(e){ie()}intersectsExtent(e){return ie()}translate(e,t){ie()}transform(e,t){const n=Ze(e),i=n.getUnits()=="tile-pixels"?function(l,a,u){const c=n.getExtent(),m=n.getWorldExtent(),g=yt(m)/yt(c);return ni(Kd,m[0],m[3],g,-g,0,0,0),Ti(l,0,l.length,u,Kd,a),Ys(n,t)(l,a,u)}:Ys(n,t);return this.applyTransform(i),this}}class lr extends Jf{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return dh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ie()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Zd(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ie()}setLayout(e,t,n){let i;if(e)i=Zd(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=ar(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Qf(n,0,n.length,i,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Li(this.getExtent()));const i=this.getFlatCoordinates();if(i){const l=this.getStride();hp(i,0,i.length,l,e,t,n,i),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const i=this.getStride();cp(n,0,n.length,i,e,t,n),this.changed()}}}function ar(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Zd(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function dp(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const i=r.getStride();return Ti(n,0,n.length,i,e,t)}function Vd(r,e,t,n,i,l,a){const u=r[e],c=r[e+1],m=r[t]-u,g=r[t+1]-c;let p;if(m===0&&g===0)p=e;else{const y=((i-u)*m+(l-c)*g)/(m*m+g*g);if(y>1)p=t;else if(y>0){for(let x=0;x<n;++x)a[x]=Yt(r[e+x],r[t+x],y);a.length=n;return}else p=e}for(let y=0;y<n;++y)a[y]=r[p+y];a.length=n}function vh(r,e,t,n,i){let l=r[e],a=r[e+1];for(e+=n;e<t;e+=n){const u=r[e],c=r[e+1],m=tr(l,a,u,c);m>i&&(i=m),l=u,a=c}return i}function Ch(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];i=vh(r,e,u,n,i),e=u}return i}function fp(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];i=Ch(r,e,u,n,i),e=u[u.length-1]}return i}function wh(r,e,t,n,i,l,a,u,c,m,g){if(e==t)return m;let p,y;if(i===0){if(y=tr(a,u,r[e],r[e+1]),y<m){for(p=0;p<n;++p)c[p]=r[e+p];return c.length=n,y}return m}g=g||[NaN,NaN];let x=e+n;for(;x<t;)if(Vd(r,x-n,x,n,a,u,g),y=tr(a,u,g[0],g[1]),y<m){for(m=y,p=0;p<n;++p)c[p]=g[p];c.length=n,x+=n}else x+=n*Math.max((Math.sqrt(y)-Math.sqrt(m))/i|0,1);if(l&&(Vd(r,t-n,e,n,a,u,g),y=tr(a,u,g[0],g[1]),y<m)){for(m=y,p=0;p<n;++p)c[p]=g[p];c.length=n}return m}function Sh(r,e,t,n,i,l,a,u,c,m,g){g=g||[NaN,NaN];for(let p=0,y=t.length;p<y;++p){const x=t[p];m=wh(r,e,x,n,i,l,a,u,c,m,g),e=x}return m}function gp(r,e,t,n,i,l,a,u,c,m,g){g=g||[NaN,NaN];for(let p=0,y=t.length;p<y;++p){const x=t[p];m=Sh(r,e,x,n,i,l,a,u,c,m,g),e=x[x.length-1]}return m}function mp(r,e,t,n){for(let i=0,l=t.length;i<l;++i)r[e++]=t[i];return e}function Zl(r,e,t,n){for(let i=0,l=t.length;i<l;++i){const a=t[i];for(let u=0;u<n;++u)r[e++]=a[u]}return e}function io(r,e,t,n,i){i=i||[];let l=0;for(let a=0,u=t.length;a<u;++a){const c=Zl(r,e,t[a],n);i[l++]=c,e=c}return i.length=l,i}function $f(r,e,t,n,i){i=i||[];let l=0;for(let a=0,u=t.length;a<u;++a){const c=io(r,e,t[a],n,i[l]);c.length===0&&(c[0]=e),i[l++]=c,e=c[c.length-1]}return i.length=l,i}function Vl(r,e,t,n,i,l,a){const u=(t-e)/n;if(u<3){for(;e<t;e+=n)l[a++]=r[e],l[a++]=r[e+1];return a}const c=new Array(u);c[0]=1,c[u-1]=1;const m=[e,t-n];let g=0;for(;m.length>0;){const p=m.pop(),y=m.pop();let x=0;const v=r[y],C=r[y+1],w=r[p],S=r[p+1];for(let R=y+n;R<p;R+=n){const P=r[R],L=r[R+1],M=T_(P,L,v,C,w,S);M>x&&(g=R,x=M)}x>i&&(c[(g-e)/n]=1,y+n<g&&m.push(y,g),g+n<p&&m.push(g,p))}for(let p=0;p<u;++p)c[p]&&(l[a++]=r[e+p*n],l[a++]=r[e+p*n+1]);return a}function eg(r,e,t,n,i,l,a,u){for(let c=0,m=t.length;c<m;++c){const g=t[c];a=Vl(r,e,g,n,i,l,a),u.push(a),e=g}return a}function qi(r,e){return e*Math.round(r/e)}function _p(r,e,t,n,i,l,a){if(e==t)return a;let u=qi(r[e],i),c=qi(r[e+1],i);e+=n,l[a++]=u,l[a++]=c;let m,g;do if(m=qi(r[e],i),g=qi(r[e+1],i),e+=n,e==t)return l[a++]=m,l[a++]=g,a;while(m==u&&g==c);for(;e<t;){const p=qi(r[e],i),y=qi(r[e+1],i);if(e+=n,p==m&&y==g)continue;const x=m-u,v=g-c,C=p-u,w=y-c;if(x*w==v*C&&(x<0&&C<x||x==C||x>0&&C>x)&&(v<0&&w<v||v==w||v>0&&w>v)){m=p,g=y;continue}l[a++]=m,l[a++]=g,u=m,c=g,m=p,g=y}return l[a++]=m,l[a++]=g,a}function Rh(r,e,t,n,i,l,a,u){for(let c=0,m=t.length;c<m;++c){const g=t[c];a=_p(r,e,g,n,i,l,a),u.push(a),e=g}return a}function pp(r,e,t,n,i,l,a,u){for(let c=0,m=t.length;c<m;++c){const g=t[c],p=[];a=Rh(r,e,g,n,i,l,a,p),u.push(p),e=g[g.length-1]}return a}function Ri(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=e;a<t;a+=n)i[l++]=r.slice(a,a+n);return i.length=l,i}function js(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=0,u=t.length;a<u;++a){const c=t[a];i[l++]=Ri(r,e,c,n,i[l]),e=c}return i.length=l,i}function bu(r,e,t,n,i){i=i!==void 0?i:[];let l=0;for(let a=0,u=t.length;a<u;++a){const c=t[a];i[l++]=c.length===1&&c[0]===e?[]:js(r,e,c,n,i[l]),e=c[c.length-1]}return i.length=l,i}function tg(r,e,t,n){let i=0;const l=r[t-n],a=r[t-n+1];let u=0,c=0;for(;e<t;e+=n){const m=r[e]-l,g=r[e+1]-a;i+=c*m-u*g,u=m,c=g}return i/2}function ng(r,e,t,n){let i=0;for(let l=0,a=t.length;l<a;++l){const u=t[l];i+=tg(r,e,u,n),e=u}return i}function yp(r,e,t,n){let i=0;for(let l=0,a=t.length;l<a;++l){const u=t[l];i+=ng(r,e,u,n),e=u[u.length-1]}return i}class Us extends lr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Us(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,i){return i<sr(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,i))}getArea(){return tg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Vl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Us(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zl(this.flatCoordinates,0,e,this.stride),this.changed()}}class Zr extends lr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Zr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){const l=this.flatCoordinates,a=tr(e,t,l[0],l[1]);if(a<i){const u=this.stride;for(let c=0;c<u;++c)n[c]=l[c];return n.length=u,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Xf(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return ch(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mp(this.flatCoordinates,0,e,this.stride),this.changed()}}function xp(r,e,t,n,i){return!Uf(i,function(a){return!Ji(r,e,t,n,a[0],a[1])})}function Ji(r,e,t,n,i,l){let a=0,u=r[t-n],c=r[t-n+1];for(;e<t;e+=n){const m=r[e],g=r[e+1];c<=l?g>l&&(m-u)*(l-c)-(i-u)*(g-c)>0&&a++:g<=l&&(m-u)*(l-c)-(i-u)*(g-c)<0&&a--,u=m,c=g}return a!==0}function Ih(r,e,t,n,i,l){if(t.length===0||!Ji(r,e,t[0],n,i,l))return!1;for(let a=1,u=t.length;a<u;++a)if(Ji(r,t[a-1],t[a],n,i,l))return!1;return!0}function Ep(r,e,t,n,i,l){if(t.length===0)return!1;for(let a=0,u=t.length;a<u;++a){const c=t[a];if(Ih(r,e,c,n,i,l))return!0;e=c[c.length-1]}return!1}function Th(r,e,t,n,i,l,a){let u,c,m,g,p,y,x;const v=i[l+1],C=[];for(let R=0,P=t.length;R<P;++R){const L=t[R];for(g=r[L-n],y=r[L-n+1],u=e;u<L;u+=n)p=r[u],x=r[u+1],(v<=y&&x<=v||y<=v&&v<=x)&&(m=(v-y)/(x-y)*(p-g)+g,C.push(m)),g=p,y=x}let w=NaN,S=-1/0;for(C.sort(Jn),g=C[0],u=1,c=C.length;u<c;++u){p=C[u];const R=Math.abs(p-g);R>S&&(m=(g+p)/2,Ih(r,e,t,n,m,v)&&(w=m,S=R)),g=p}return isNaN(w)&&(w=i[l]),a?(a.push(w,v,S),a):[w,v,S]}function ig(r,e,t,n,i){let l=[];for(let a=0,u=t.length;a<u;++a){const c=t[a];l=Th(r,e,c,n,i,2*a,l),e=c[c.length-1]}return l}function rg(r,e,t,n,i){let l;for(e+=n;e<t;e+=n)if(l=i(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function bl(r,e,t,n,i){const l=jf(rn(),r,e,t,n);return Dt(i,l)?Qi(i,l)||l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3]?!0:rg(r,e,t,n,function(a,u){return U_(i,a,u)}):!1}function vp(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){if(bl(r,e,t[l],n,i))return!0;e=t[l]}return!1}function sg(r,e,t,n,i){return!!(bl(r,e,t,n,i)||Ji(r,e,t,n,i[0],i[1])||Ji(r,e,t,n,i[0],i[3])||Ji(r,e,t,n,i[2],i[1])||Ji(r,e,t,n,i[2],i[3]))}function og(r,e,t,n,i){if(!sg(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(let l=1,a=t.length;l<a;++l)if(xp(r,t[l-1],t[l],n,i)&&!bl(r,t[l-1],t[l],n,i))return!1;return!0}function Cp(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];if(og(r,e,u,n,i))return!0;e=u[u.length-1]}return!1}function wp(r,e,t,n){for(;e<t-n;){for(let i=0;i<n;++i){const l=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=l}e+=n,t-=n}}function Ph(r,e,t,n){let i=0,l=r[t-n],a=r[t-n+1];for(;e<t;e+=n){const u=r[e],c=r[e+1];i+=(u-l)*(c+a),l=u,a=c}return i===0?void 0:i>0}function Lh(r,e,t,n,i){i=i!==void 0?i:!1;for(let l=0,a=t.length;l<a;++l){const u=t[l],c=Ph(r,e,u,n);if(l===0){if(i&&c||!i&&!c)return!1}else if(i&&!c||!i&&c)return!1;e=u}return!0}function lg(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l){const u=t[l];if(!Lh(r,e,u,n,i))return!1;u.length&&(e=u[u.length-1])}return!0}function Sl(r,e,t,n,i){i=i!==void 0?i:!1;for(let l=0,a=t.length;l<a;++l){const u=t[l],c=Ph(r,e,u,n);(l===0?i&&c||!i&&!c:i&&!c||!i&&c)&&wp(r,e,u,n),e=u}return e}function Hu(r,e,t,n,i){for(let l=0,a=t.length;l<a;++l)e=Sl(r,e,t[l],n,i);return e}function Sp(r,e){const t=[];let n=0,i=0,l;for(let a=0,u=e.length;a<u;++a){const c=e[a],m=Ph(r,n,c,2);if(l===void 0&&(l=m),m===l)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,n=c}return t}class Mi extends lr{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?kn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Mi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<sr(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ch(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return Ih(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return ng(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Sl(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,js(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Li(this.getExtent());this.flatInteriorPoint_=Th(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Zr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Us(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,i=[];let l=0;for(let a=0,u=n.length;a<u;++a){const c=n[a],m=new Us(t.slice(l,c),e);i.push(m),l=c}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Lh(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Sl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Rh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Mi(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return og(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=io(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function bd(r){if(Kl(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],i=r[3],l=[e,t,e,i,n,i,n,t,e,t];return new Mi(l,"XY",[l.length])}const Su=0;class Mn extends En{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=_h(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&b_(),e.center&&(e.center=Vn(e.center,this.projection_)),e.extent&&(e.extent=Si(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const u in mn)delete t[u];this.setProperties(t,!0);const n=Ip(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const i=Rp(e),l=n.constraint,a=Tp(e);this.constraints_={center:i,resolution:l,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const i=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),a=l/2*(i[3]-t[3]+t[1]-i[1]),u=l/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([n[0]+a,n[1]-u])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let i=arguments[n];i.center&&(i=Object.assign({},i),i.center=Vn(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Vn(i.anchor,this.getProjection())),t[n]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const g=arguments[i];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(i===t){n&&hl(n,!0);return}let l=Date.now(),a=this.targetCenter_.slice(),u=this.targetResolution_,c=this.targetRotation_;const m=[];for(;i<t;++i){const g=arguments[i],p={start:l,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||sp,callback:n};if(g.center&&(p.sourceCenter=a,p.targetCenter=g.center.slice(),a=p.targetCenter),g.zoom!==void 0?(p.sourceResolution=u,p.targetResolution=this.getResolutionForZoom(g.zoom),u=p.targetResolution):g.resolution&&(p.sourceResolution=u,p.targetResolution=g.resolution,u=p.targetResolution),g.rotation!==void 0){p.sourceRotation=c;const y=Yr(g.rotation-c+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=c+y,c=p.targetRotation}Pp(p)?p.complete=!0:l+=p.duration,m.push(p)}this.animations_.push(m),this.setHint(pt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[pt.ANIMATING]>0}getInteracting(){return this.hints_[pt.INTERACTING]>0}cancelAnimations(){this.setHint(pt.ANIMATING,-this.hints_[pt.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const i=this.animations_[t];if(i[0].callback&&hl(i[0].callback,!1),!e)for(let l=0,a=i.length;l<a;++l){const u=i[l];if(!u.complete){e=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let l=!0;for(let a=0,u=i.length;a<u;++a){const c=i[a];if(c.complete)continue;const m=e-c.start;let g=c.duration>0?m/c.duration:1;g>=1?(c.complete=!0,g=1):l=!1;const p=c.easing(g);if(c.sourceCenter){const y=c.sourceCenter[0],x=c.sourceCenter[1],v=c.targetCenter[0],C=c.targetCenter[1];this.nextCenter_=c.targetCenter;const w=y+p*(v-y),S=x+p*(C-x);this.targetCenter_=[w,S]}if(c.sourceResolution&&c.targetResolution){const y=p===1?c.targetResolution:c.sourceResolution+p*(c.targetResolution-c.sourceResolution);if(c.anchor){const x=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(v,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const y=p===1?Yr(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+p*(c.targetRotation-c.sourceRotation);if(c.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(l){this.animations_[n]=null,this.setHint(pt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&hl(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const i=this.getCenterInternal();return i!==void 0&&(n=[i[0]-t[0],i[1]-t[1]],gh(n,e-this.getRotation()),B_(n,t)),n}calculateCenterZoom(e,t){let n;const i=this.getCenterInternal(),l=this.getResolution();if(i!==void 0&&l!==void 0){const a=t[0]-e*(t[0]-i[0])/l,u=t[1]-e*(t[1]-i[1])/l;n=[a,u]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],i=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Vu(e,this.getProjection())}getCenterInternal(){return this.get(mn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return bf(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();xe(t,"The view center is not defined");const n=this.getResolution();xe(n!==void 0,"The view resolution is not defined");const i=this.getRotation();return xe(i!==void 0,"The view rotation is not defined"),Ku(t,n,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(mn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Si(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Ce(e)/t[0],i=yt(e)/t[1];return Math.max(n,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*i)}}getRotation(){return this.get(mn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,l=Math.log(n/i)/t;return function(a){return Math.log(n/a)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const l=this.padding_;if(l){const a=this.getViewportSizeMinusPadding_();i=Ru(i,this.getViewportSize_(),[a[0]/2+l[3],a[1]/2+l[0]],t,n)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,i;if(this.resolutions_){const l=oh(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?i=2:i=n/this.resolutions_[l+1]}else n=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(n/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Ge(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Ge(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(xe(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){xe(!Kl(e),"Cannot fit empty extent provided as `geometry`");const i=Si(e,this.getProjection());n=bd(i)}else if(e.getType()==="Circle"){const i=Si(e.getExtent(),this.getProjection());n=bd(i),n.rotate(this.getRotation(),Li(i))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),i=Math.sin(-t),l=e.getFlatCoordinates(),a=e.getStride();let u=1/0,c=1/0,m=-1/0,g=-1/0;for(let p=0,y=l.length;p<y;p+=a){const x=l[p]*n-l[p+1]*i,v=l[p]*i+l[p+1]*n;u=Math.min(u,x),c=Math.min(c,v),m=Math.max(m,x),g=Math.max(g,v)}return[u,c,m,g]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const u=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(u,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);c=isNaN(c)?a:Math.max(c,a),c=this.getConstrainedResolution(c,l?0:1);const m=this.getRotation(),g=Math.sin(m),p=Math.cos(m),y=Li(u);y[0]+=(i[1]-i[3])/2*c,y[1]+=(i[0]-i[2])/2*c;const x=y[0]*p-y[1]*g,v=y[1]*p+y[0]*g,C=this.getConstrainedCenter([x,v],c),w=t.callback?t.callback:Br;t.duration!==void 0?this.animateInternal({resolution:c,center:C,duration:t.duration,easing:t.easing},w):(this.targetResolution_=c,this.targetCenter_=C,this.applyTargetState_(!1,!0),hl(w,!0))}centerOn(e,t,n){this.centerOnInternal(Vn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Ru(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,i){let l;const a=this.padding_;if(a&&e){const u=this.getViewportSizeMinusPadding_(-n),c=Ru(e,i,[u[0]/2+a[3],u[1]/2+a[0]],t,n);l=[e[0]-c[0],e[1]-c[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Vu(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Vn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,i,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Vn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Vn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,l,n),u=this.constraints_.center(this.targetCenter_,a,l,n,this.calculateCenterShift(this.targetCenter_,a,i,l));this.get(mn.ROTATION)!==i&&this.set(mn.ROTATION,i),this.get(mn.RESOLUTION)!==a&&(this.set(mn.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(mn.CENTER)||!wl(this.get(mn.CENTER),u))&&this.set(mn.CENTER,u),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const i=t||0,l=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(l),u=this.constraints_.resolution(this.targetResolution_,i,a),c=this.constraints_.center(this.targetCenter_,u,a,!1,this.calculateCenterShift(this.targetCenter_,u,l,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=l,this.targetCenter_=c,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==l||!this.getCenterInternal()||!wl(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:c,resolution:u,duration:e,easing:Qr,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(pt.INTERACTING,1)}endInteraction(e,t,n){n=n&&Vn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(pt.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function hl(r,e){setTimeout(function(){r(e)},0)}function Rp(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Yd(r.extent,r.constrainOnlyCenter,t)}const e=_h(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Yd(t,!1,!1)}return ep}function Ip(r){let e,t,n,a=r.minZoom!==void 0?r.minZoom:Su,u=r.maxZoom!==void 0?r.maxZoom:28;const c=r.zoomFactor!==void 0?r.zoomFactor:2,m=r.multiWorld!==void 0?r.multiWorld:!1,g=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,p=r.showFullExtent!==void 0?r.showFullExtent:!1,y=_h(r.projection,"EPSG:3857"),x=y.getExtent();let v=r.constrainOnlyCenter,C=r.extent;if(!m&&!C&&y.isGlobal()&&(v=!1,C=x),r.resolutions!==void 0){const w=r.resolutions;t=w[a],n=w[u]!==void 0?w[u]:w[w.length-1],r.constrainResolution?e=tp(w,g,!v&&C,p):e=jd(t,n,g,!v&&C,p)}else{const S=(x?Math.max(Ce(x),yt(x)):360*uh.degrees/y.getMetersPerUnit())/ah/Math.pow(2,Su),R=S/Math.pow(2,28-Su);t=r.maxResolution,t!==void 0?a=0:t=S/Math.pow(c,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(c,u):n=S/Math.pow(c,u):n=R),u=a+Math.floor(Math.log(t/n)/Math.log(c)),n=t/Math.pow(c,u-a),r.constrainResolution?e=np(c,t,n,g,!v&&C,p):e=jd(t,n,g,!v&&C,p)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:c}}function Tp(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?rp():t===!1?Ud:typeof t=="number"?ip(t):Ud}return Eh}function Pp(r){return!(r.sourceCenter&&r.targetCenter&&!wl(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Ru(r,e,t,n,i){const l=Math.cos(-i);let a=Math.sin(-i),u=r[0]*l-r[1]*a,c=r[1]*l+r[0]*a;u+=(e[0]/2-t[0])*n,c+=(t[1]-e[1]/2)*n,a=-a;const m=u*l-c*a,g=c*l+u*a;return[m,g]}class Hl extends zf{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Se.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Se.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Re(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=me(e,re.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Mn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let i;t.layerStatesArray?i=t.layerStatesArray.find(a=>a.layer===this):i=this.getLayerState();const l=this.getExtent();return Mh(i,t.viewState)&&(!l||Dt(l,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const n=e instanceof Mn?e.getViewStateAndExtent():e;let i=t(n);return Array.isArray(i)||(i=[i]),i}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Se.MAP,e)}getMapInternal(){return this.get(Se.MAP)}setMap(e){this.mapPrecomposeKey_&&(Re(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Re(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=me(e,nn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=me(this,re.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);xe(!t.some(i=>i.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Se.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Mh(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function ag(r,e,t=0,n=r.length-1,i=Lp){for(;n>t;){if(n-t>600){const c=n-t+1,m=e-t+1,g=Math.log(c),p=.5*Math.exp(2*g/3),y=.5*Math.sqrt(g*p*(c-p)/c)*(m-c/2<0?-1:1),x=Math.max(t,Math.floor(e-m*p/c+y)),v=Math.min(n,Math.floor(e+(c-m)*p/c+y));ag(r,e,x,v,i)}const l=r[e];let a=t,u=n;for(Ts(r,t,e),i(r[n],l)>0&&Ts(r,t,n);a<u;){for(Ts(r,a,u),a++,u--;i(r[a],l)<0;)a++;for(;i(r[u],l)>0;)u--}i(r[t],l)===0?Ts(r,t,u):(u++,Ts(r,u,n)),u<=e&&(t=u+1),e<=u&&(n=u-1)}}function Ts(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function Lp(r,e){return r<e?-1:r>e?1:0}let ug=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!dl(e,t))return n;const i=this.toBBox,l=[];for(;t;){for(let a=0;a<t.children.length;a++){const u=t.children[a],c=t.leaf?i(u):u;dl(e,c)&&(t.leaf?n.push(u):Tu(e,c)?this._all(u,n):l.push(u))}t=l.pop()}return n}collides(e){let t=this.data;if(!dl(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const l=t.children[i],a=t.leaf?this.toBBox(l):l;if(dl(e,a)){if(t.leaf||Tu(e,a))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=kr([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),l=[],a=[];let u,c,m;for(;n||l.length;){if(n||(n=l.pop(),c=l[l.length-1],u=a.pop(),m=!0),n.leaf){const g=Mp(e,n.children,t);if(g!==-1)return n.children.splice(g,1),l.push(n),this._condense(l),this}!m&&!n.leaf&&Tu(n,i)?(l.push(n),a.push(u),u=0,c=n,n=n.children[0]):c?(u++,n=c.children[u],m=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const l=n-t+1;let a=this._maxEntries,u;if(l<=a)return u=kr(e.slice(t,n+1)),Pr(u,this.toBBox),u;i||(i=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,i-1))),u=kr([]),u.leaf=!1,u.height=i;const c=Math.ceil(l/a),m=c*Math.ceil(Math.sqrt(a));Hd(e,t,n,m,this.compareMinX);for(let g=t;g<=n;g+=m){const p=Math.min(g+m-1,n);Hd(e,g,p,c,this.compareMinY);for(let y=g;y<=p;y+=c){const x=Math.min(y+c-1,p);u.children.push(this._build(e,y,x,i-1))}}return Pr(u,this.toBBox),u}_chooseSubtree(e,t,n,i){for(;i.push(t),!(t.leaf||i.length-1===n);){let l=1/0,a=1/0,u;for(let c=0;c<t.children.length;c++){const m=t.children[c],g=Iu(m),p=Fp(e,m)-g;p<a?(a=p,l=g<l?g:l,u=m):p===a&&g<l&&(l=g,u=m)}t=u||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),l=[],a=this._chooseSubtree(i,this.data,t,l);for(a.children.push(e),Os(a,i);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(i,l,t)}_split(e,t){const n=e[t],i=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,i);const a=this._chooseSplitIndex(n,l,i),u=kr(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,Pr(n,this.toBBox),Pr(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(n,u)}_splitRoot(e,t){this.data=kr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Pr(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,l=1/0,a=1/0;for(let u=t;u<=n-t;u++){const c=As(e,0,u,this.toBBox),m=As(e,u,n,this.toBBox),g=Dp(c,m),p=Iu(c)+Iu(m);g<l?(l=g,i=u,a=p<a?p:a):g===l&&p<a&&(a=p,i=u)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:Ap,l=e.leaf?this.compareMinY:Op,a=this._allDistMargin(e,t,n,i),u=this._allDistMargin(e,t,n,l);a<u&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const l=this.toBBox,a=As(e,0,t,l),u=As(e,n-t,n,l);let c=cl(a)+cl(u);for(let m=t;m<n-t;m++){const g=e.children[m];Os(a,e.leaf?l(g):g),c+=cl(a)}for(let m=n-t-1;m>=t;m--){const g=e.children[m];Os(u,e.leaf?l(g):g),c+=cl(u)}return c}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)Os(t[i],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Pr(e[t],this.toBBox)}};function Mp(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function Pr(r,e){As(r,0,r.children.length,e,r)}function As(r,e,t,n,i){i||(i=kr(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let l=e;l<t;l++){const a=r.children[l];Os(i,r.leaf?n(a):a)}return i}function Os(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function Ap(r,e){return r.minX-e.minX}function Op(r,e){return r.minY-e.minY}function Iu(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function cl(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Fp(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function Dp(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),i=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,l-n)}function Tu(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function dl(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function kr(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Hd(r,e,t,n,i){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;ag(r,a,e,t,i),l.push(e,a,a,t)}}const he={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function qd(r){return r[0]>0&&r[1]>0}function kp(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Nt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class ql{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Nt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ql({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ie()}getImage(e){return ie()}getHitDetectionImage(){return ie()}getPixelRatio(e){return 1}getImageState(){return ie()}getImageSize(){return ie()}getOrigin(){return ie()}getSize(){return ie()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Nt(e)}listenImageChange(e){ie()}load(){ie()}unlistenImageChange(e){ie()}ready(){return Promise.resolve()}}const Bs={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var at={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};at.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};at.max=at.whitepoint[2].D65;at.rgb=function(r,e){e=e||at.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],i=r[2]/e[2],l,a,u;return l=t*3.240969941904521+n*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+i*.041555057407175,u=t*.055630079696993+n*-.20397695888897+i*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,l=Math.min(Math.max(0,l),1),a=Math.min(Math.max(0,a),1),u=Math.min(Math.max(0,u),1),[l*255,a*255,u*255]};Bs.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,i=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var l=t*.41239079926595+n*.35758433938387+i*.18048078840183,a=t*.21263900587151+n*.71516867876775+i*.072192315360733,u=t*.019330818715591+n*.11919477979462+i*.95053215224966;return e=e||at.whitepoint[2].E,[l*e[0],a*e[1],u*e[2]]};const Ah={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,i,l,a,u,c,m,g,p,y,x,v,C;if(l=r[0],a=r[1],u=r[2],l===0)return[0,0,0];var w=.0011070564598794539;return e=e||"D65",t=t||2,p=at.whitepoint[t][e][0],y=at.whitepoint[t][e][1],x=at.whitepoint[t][e][2],v=4*p/(p+15*y+3*x),C=9*y/(p+15*y+3*x),n=a/(13*l)+v||0,i=u/(13*l)+C||0,m=l>8?y*Math.pow((l+16)/116,3):y*l*w,c=m*9*n/(4*i)||0,g=m*(12-3*n-20*i)/(4*i)||0,[c,m,g]}};at.luv=function(r,e,t){var n,i,l,a,u,c,m,g,p,y,x,v,C,w=.008856451679035631,S=903.2962962962961;e=e||"D65",t=t||2,p=at.whitepoint[t][e][0],y=at.whitepoint[t][e][1],x=at.whitepoint[t][e][2],v=4*p/(p+15*y+3*x),C=9*y/(p+15*y+3*x),c=r[0],m=r[1],g=r[2],n=4*c/(c+15*m+3*g)||0,i=9*m/(c+15*m+3*g)||0;var R=m/y;return l=R<=w?S*R:116*Math.pow(R,1/3)-16,a=13*l*(n-v),u=13*l*(i-C),[l,a,u]};var hg={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],i,l,a;return a=n/360*2*Math.PI,i=t*Math.cos(a),l=t*Math.sin(a),[e,i,l]},xyz:function(r){return Ah.xyz(hg.luv(r))}};Ah.lchuv=function(r){var e=r[0],t=r[1],n=r[2],i=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),a=l*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};at.lchuv=function(r){return Ah.lchuv(at.luv(r))};const Qd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Jd={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Np(r){var e,t=[],n=1,i;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),Qd[r])t=Qd[r].slice(),i="rgb";else if(r==="transparent")n=0,i="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),a=l.length,u=a<=4;n=1,u?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],a===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],a===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var c=e[1];i=c.replace(/a$/,"");var m=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(g,p){if(g[g.length-1]==="%")return g=parseFloat(g)/100,p===3?g:i==="rgb"?g*255:i[0]==="h"||i[0]==="l"&&!p?g*100:i==="lab"?g*125:i==="lch"?p<2?g*150:g*360:i[0]==="o"&&!p?g:i==="oklab"?g*.4:i==="oklch"?p<2?g*.4:g*360:g;if(i[p]==="h"||p===2&&i[i.length-1]==="h"){if(Jd[g]!==void 0)return Jd[g];if(g.endsWith("deg"))return parseFloat(g);if(g.endsWith("turn"))return parseFloat(g)*360;if(g.endsWith("grad"))return parseFloat(g)*360/400;if(g.endsWith("rad"))return parseFloat(g)*180/Math.PI}return g==="none"?0:parseFloat(g)}),n=t.length>m?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),i=r.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:i,values:t,alpha:n}}const Pu={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,l,a,u,c,m=0;if(t===0)return c=n*255,[c,c,c];for(l=n<.5?n*(1+t):n+t-n*t,i=2*n-l,u=[0,0,0];m<3;)a=e+1/3*-(m-1),a<0?a++:a>1&&a--,c=6*a<1?i+(l-i)*6*a:2*a<1?l:3*a<2?i+(l-i)*(2/3-a)*6:i,u[m++]=c*255;return u}};Bs.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),l=Math.max(e,t,n),a=l-i,u,c,m;return l===i?u=0:e===l?u=(t-n)/a:t===l?u=2+(n-e)/a:n===l&&(u=4+(e-t)/a),u=Math.min(u*60,360),u<0&&(u+=360),m=(i+l)/2,l===i?c=0:m<=.5?c=a/(l+i):c=a/(2-l-i),[u,c*100,m*100]};function zp(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=Np(r);if(!t.space)return[];const n=t.space[0]==="h"?Pu.min:Bs.min,i=t.space[0]==="h"?Pu.max:Bs.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),i[2]),t.space[0]==="h"&&(e=Pu.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Oh=[NaN,NaN,NaN,0];function Gp(r){return typeof r=="string"?r:Dh(r)}const Wp=1024,Ps={};let Lu=0;function Xp(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function $d(r){const e=at.lchuv(Bs.xyz(r));return e[3]=r[3],e}function Yp(r){const e=at.rgb(hg.xyz(r));return e[3]=r[3],e}function Fh(r){if(r==="none")return Oh;if(Ps.hasOwnProperty(r))return Ps[r];if(Lu>=Wp){let t=0;for(const n in Ps)t++&3||(delete Ps[n],--Lu)}const e=zp(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return cg(e),Ps[r]=e,++Lu,e}function Ks(r){return Array.isArray(r)?r:Fh(r)}function cg(r){return r[0]=Ge(r[0]+.5|0,0,255),r[1]=Ge(r[1]+.5|0,0,255),r[2]=Ge(r[2]+.5|0,0,255),r[3]=Ge(r[3],0,1),r}function Dh(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const i=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+i+")"}const Ai=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",jp=Ai.includes("firefox"),Up=Ai.includes("safari")&&!Ai.includes("chrom");Up&&(Ai.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ai));const Bp=Ai.includes("webkit")&&!Ai.includes("edge"),dg=Ai.includes("macintosh"),fg=typeof devicePixelRatio<"u"?devicePixelRatio:1,gg=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,mg=typeof Image<"u"&&Image.prototype.decode,_g=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function Ye(r,e,t,n){let i;return t&&t.length?i=t.shift():gg?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}let Mu;function Rl(){return Mu||(Mu=Ye(1,1)),Mu}function Vr(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function Kp(r){let e=r.offsetWidth;const t=getComputedStyle(r);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Zp(r){let e=r.offsetHeight;const t=getComputedStyle(r);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function ef(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function pg(r){for(;r.lastChild;)r.lastChild.remove()}function Vp(r,e){const t=r.childNodes;for(let n=0;;++n){const i=t[n],l=e[n];if(!i&&!l)break;if(i!==l){if(!i){r.appendChild(l);continue}if(!l){r.removeChild(i),--n;continue}r.insertBefore(l,i)}}}function bp(r,e,t){const n=r;let i=!0,l=!1,a=!1;const u=[vl(n,re.LOAD,function(){a=!0,l||e()})];return n.src&&mg?(l=!0,n.decode().then(function(){i&&e()}).catch(function(c){i&&(a?e():t())})):u.push(vl(n,re.ERROR,t)),function(){i=!1,u.forEach(Re)}}function Hp(r,e){return new Promise((t,n)=>{function i(){a(),t(r)}function l(){a(),n(new Error("Image load error"))}function a(){r.removeEventListener("load",i),r.removeEventListener("error",l)}r.addEventListener("load",i),r.addEventListener("error",l)})}function qp(r,e){return e&&(r.src=e),r.src&&mg?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(i=>r.complete&&r.width?t(r):n(i))):Hp(r)}class Qp{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const i=Au(e,t,n);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,n){const i=Au(e,t,n);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,n,i,l){const a=Au(e,t,n),u=a in this.cache_;this.cache_[a]=i,l&&(i.getImageState()===he.IDLE&&i.load(),i.getImageState()===he.LOADING?i.ready().then(()=>{this.patternCache_[a]=Rl().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Rl().createPattern(i.getImage(1),"repeat")),u||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Au(r,e,t){const n=t?Ks(t):"null";return e+":"+r+":"+n}const On=new Qp;let Ls=null;class Jp extends Yl{constructor(e,t,n,i,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=i===void 0?he.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===he.LOADED){Ls||(Ls=Ye(1,1,void 0,{willReadFrequently:!0})),Ls.drawImage(this.image_,0,0);try{Ls.getImageData(0,0,1,1),this.tainted_=!1}catch{Ls=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(re.CHANGE)}handleImageError_(){this.imageState_=he.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=he.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Ye(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===he.IDLE){this.image_||this.initializeImage_(),this.imageState_=he.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&qp(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==he.LOADED)return;const t=this.image_,n=Ye(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Gp(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===he.LOADED||this.imageState_===he.ERROR)e();else{const t=()=>{(this.imageState_===he.LOADED||this.imageState_===he.ERROR)&&(this.removeEventListener(re.CHANGE,t),e())};this.addEventListener(re.CHANGE,t)}})),this.ready_}}function kh(r,e,t,n,i,l){let a=e===void 0?void 0:On.get(e,t,i);return a||(a=new Jp(r,r&&"src"in r?r.src||void 0:e,t,n,i),On.set(e,t,i,a,l)),l&&a&&!On.getPattern(e,t,i)&&On.set(e,t,i,a,l),a}function Fn(r){return r?Array.isArray(r)?Dh(r):typeof r=="object"&&"src"in r?$p(r):r:null}function $p(r){if(!r.offset||!r.size)return On.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=On.getPattern(e,void 0,r.color);if(t)return t;const n=On.get(r.src,"anonymous",null);if(n.getImageState()!==he.LOADED)return null;const i=Ye(r.size[0],r.size[1]);return i.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),kh(i.canvas,e,void 0,he.LOADED,r.color,!0),On.getPattern(e,void 0,r.color)}const fl="ol-hidden",e0="ol-selectable",Ql="ol-unselectable",Nh="ol-control",tf="ol-collapsed",t0=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),nf=["style","variant","weight","size","lineHeight","family"],yg=function(r){const e=r.match(t0);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,i=nf.length;n<i;++n){const l=e[n+1];l!==void 0&&(t[nf[n]]=l)}return t.families=t.family.split(/,\s?/),t},xg="10px sans-serif",At="#000",br="round",$n=[],ei=0,Hr="round",Zs=10,Vs="#000",bs="center",Il="middle",$i=[0,0,0,0],Hs=1,bn=new En;let Nr=null,qu;const Qu={},n0=function(){const e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10";let l,a;function u(m,g,p){let y=!0;for(let x=0;x<n;++x){const v=t[x];if(a=Tl(m+" "+g+" "+e+v,i),p!=v){const C=Tl(m+" "+g+" "+e+p+","+v,i);y=y&&C!=a}}return!!y}function c(){let m=!0;const g=bn.getKeys();for(let p=0,y=g.length;p<y;++p){const x=g[p];if(bn.get(x)<100){const[v,C,w]=x.split(`
`);u(v,C,w)?($s(Qu),Nr=null,qu=void 0,bn.set(x,100)):(bn.set(x,bn.get(x)+1,!0),m=!1)}}m&&(clearInterval(l),l=void 0)}return function(m){const g=yg(m);if(!g)return;const p=g.families;for(let y=0,x=p.length;y<x;++y){const v=p[y],C=g.style+`
`+g.weight+`
`+v;bn.get(C)===void 0&&(bn.set(C,100,!0),u(g.style,g.weight,v)||(bn.set(C,0,!0),l===void 0&&(l=setInterval(c,32))))}}}(),i0=function(){let r;return function(e){let t=Qu[e];if(t==null){if(gg){const n=yg(e),i=Eg(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);Qu[e]=t}return t}}();function Eg(r,e){return Nr||(Nr=Ye(1,1)),r!=qu&&(Nr.font=r,qu=Nr.font),Nr.measureText(e)}function Tl(r,e){return Eg(r,e).width}function rf(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((i,l)=>Math.max(i,Tl(r,l)),0);return t[e]=n,n}function r0(r,e){const t=[],n=[],i=[];let l=0,a=0,u=0,c=0;for(let m=0,g=e.length;m<=g;m+=2){const p=e[m];if(p===`
`||m===g){l=Math.max(l,a),i.push(a),a=0,u+=c,c=0;continue}const y=e[m+1]||r.font,x=Tl(y,p);t.push(x),a+=x;const v=i0(y);n.push(v),c=Math.max(c,v)}return{width:l,height:u,widths:t,heights:n,lineWidths:i}}function s0(r,e,t,n,i,l,a,u,c,m,g){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=p=>p.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(c,m),r.scale(g[0],g[1]),o0(n,r)):g[0]<0||g[1]<0?(r.translate(c,m),r.scale(g[0],g[1]),r.drawImage(n,i,l,a,u,0,0,a,u)):r.drawImage(n,i,l,a,u,c,m,a*g[0],u*g[1]),r.restore()}function o0(r,e){const t=r.contextInstructions;for(let n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class Jl extends ql{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?he.LOADING:he.LOADED,this.imageState_===he.LOADING&&this.ready().then(()=>this.imageState_=he.LOADED),this.render()}clone(){const e=this.getScale(),t=new Jl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,i=Ye(n.size*e,n.size*e);this.draw_(n,i,e),t=i.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,l=this.radius2_===void 0?i:this.radius2_;if(i<l){const G=i;i=l,l=G}const a=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/a,c=l*Math.sin(u),m=Math.sqrt(l*l-c*c),g=i-m,p=Math.sqrt(c*c+g*g),y=p/c;if(e==="miter"&&y<=n)return y*t;const x=t/2/y,v=t/2*(g/p),w=Math.sqrt((i+x)*(i+x)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const S=i*Math.sin(u),R=Math.sqrt(i*i-S*S),P=l-R,M=Math.sqrt(S*S+P*P)/S;if(M<=n){const G=M*t/2-l-i;return 2*Math.max(w,G)}return w*2}createRenderOptions(){let e=br,t=Hr,n=0,i=null,l=0,a,u=0;this.stroke_&&(a=Fn(this.stroke_.getColor()??Vs),u=this.stroke_.getWidth()??Hs,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Hr,e=this.stroke_.getLineCap()??br,n=this.stroke_.getMiterLimit()??Zs);const c=this.calculateLineJoinSize_(t,u,n),m=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*m+c);return{strokeStyle:a,strokeWidth:u,size:g,lineCap:e,lineDash:i,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=At),t.fillStyle=Fn(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),i=0;typeof n=="string"&&(n=Ks(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0&&(t=Ye(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const i=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let u=0;u<t;u++){const c=l+u*a,m=u%2===0?n:i;e.lineTo(m*Math.cos(c),m*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=At,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class $l extends Jl{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new $l({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ro{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ro({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=kh(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===he.IDLE&&t.load(),t.getImageState()===he.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class ea{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new ea({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class nr{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=sf,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new nr({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=sf,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function l0(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(xe(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let Ou=null;function vg(r,e){if(!Ou){const t=new ro({color:"rgba(255,255,255,0.4)"}),n=new ea({color:"#3399CC",width:1.25});Ou=[new nr({image:new $l({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Ou}function sf(r){return r.getGeometry()}function of(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class ta extends ql{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let u=e.src;xe(!(u!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&a&&(u=a.src||we(a)),xe(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),xe(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=he.IDLE:a!==void 0&&("complete"in a?a.complete?c=a.src?he.LOADED:he.IDLE:c=he.LOADING:c=he.LOADED),this.color_=e.color!==void 0?Ks(e.color):null,this.iconImage_=kh(a,u,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let m,g;if(e.size)[m,g]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)m=p.width,g=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(of(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}m!==void 0&&this.setScale(of(m,g,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ta({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==he.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==he.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(re.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(re.CHANGE,e)}ready(){return this.iconImage_.ready()}}const a0="#333";class zh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Nt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ro({color:a0}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new zh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Nt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let ur=0;const vt=1<<ur++,ge=1<<ur++,Ot=1<<ur++,_n=1<<ur++,rr=1<<ur++,Fs=1<<ur++,gl=Math.pow(2,ur)-1,Gh={[vt]:"boolean",[ge]:"number",[Ot]:"string",[_n]:"color",[rr]:"number[]",[Fs]:"size"},u0=Object.keys(Gh).map(Number).sort(Jn);function h0(r){return r in Gh}function Ds(r){const e=[];for(const t of u0)ks(r,t)&&e.push(Gh[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function ks(r,e){return(r&e)===e}function pi(r,e){return r===e}class qe{constructor(e,t){if(!h0(e))throw new Error(`literal expressions must have a specific type, got ${Ds(e)}`);this.type=e,this.value=t}}class c0{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function Cg(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function ut(r,e,t){switch(typeof r){case"boolean":{if(pi(e,Ot))return new qe(Ot,r?"true":"false");if(!ks(e,vt))throw new Error(`got a boolean, but expected ${Ds(e)}`);return new qe(vt,r)}case"number":{if(pi(e,Fs))return new qe(Fs,Nt(r));if(pi(e,vt))return new qe(vt,!!r);if(pi(e,Ot))return new qe(Ot,r.toString());if(!ks(e,ge))throw new Error(`got a number, but expected ${Ds(e)}`);return new qe(ge,r)}case"string":{if(pi(e,_n))return new qe(_n,Fh(r));if(pi(e,vt))return new qe(vt,!!r);if(!ks(e,Ot))throw new Error(`got a string, but expected ${Ds(e)}`);return new qe(Ot,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return C0(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(pi(e,Fs)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new qe(Fs,r)}if(pi(e,_n)){if(r.length===3)return new qe(_n,[...r,1]);if(r.length===4)return new qe(_n,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!ks(e,rr))throw new Error(`got an array of numbers, but expected ${Ds(e)}`);return new qe(rr,r)}const D={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},d0={[D.Get]:ne(ae(1,1/0),lf),[D.Var]:ne(ae(1,1),f0),[D.Has]:ne(ae(1,1/0),lf),[D.Id]:ne(g0,Lr),[D.Concat]:ne(ae(2,1/0),ve(Ot)),[D.GeometryType]:ne(m0,Lr),[D.LineMetric]:ne(Lr),[D.Resolution]:ne(Lr),[D.Zoom]:ne(Lr),[D.Time]:ne(Lr),[D.Any]:ne(ae(2,1/0),ve(vt)),[D.All]:ne(ae(2,1/0),ve(vt)),[D.Not]:ne(ae(1,1),ve(vt)),[D.Equal]:ne(ae(2,2),ve(gl)),[D.NotEqual]:ne(ae(2,2),ve(gl)),[D.GreaterThan]:ne(ae(2,2),ve(ge)),[D.GreaterThanOrEqualTo]:ne(ae(2,2),ve(ge)),[D.LessThan]:ne(ae(2,2),ve(ge)),[D.LessThanOrEqualTo]:ne(ae(2,2),ve(ge)),[D.Multiply]:ne(ae(2,1/0),af),[D.Coalesce]:ne(ae(2,1/0),af),[D.Divide]:ne(ae(2,2),ve(ge)),[D.Add]:ne(ae(2,1/0),ve(ge)),[D.Subtract]:ne(ae(2,2),ve(ge)),[D.Clamp]:ne(ae(3,3),ve(ge)),[D.Mod]:ne(ae(2,2),ve(ge)),[D.Pow]:ne(ae(2,2),ve(ge)),[D.Abs]:ne(ae(1,1),ve(ge)),[D.Floor]:ne(ae(1,1),ve(ge)),[D.Ceil]:ne(ae(1,1),ve(ge)),[D.Round]:ne(ae(1,1),ve(ge)),[D.Sin]:ne(ae(1,1),ve(ge)),[D.Cos]:ne(ae(1,1),ve(ge)),[D.Atan]:ne(ae(1,2),ve(ge)),[D.Sqrt]:ne(ae(1,1),ve(ge)),[D.Match]:ne(ae(4,1/0),uf,p0),[D.Between]:ne(ae(3,3),ve(ge)),[D.Interpolate]:ne(ae(6,1/0),uf,y0),[D.Case]:ne(ae(3,1/0),_0,x0),[D.In]:ne(ae(2,2),E0),[D.Number]:ne(ae(1,1/0),ve(gl)),[D.String]:ne(ae(1,1/0),ve(gl)),[D.Array]:ne(ae(1,1/0),ve(ge)),[D.Color]:ne(ae(1,4),ve(ge)),[D.Band]:ne(ae(1,3),ve(ge)),[D.Palette]:ne(ae(2,2),v0),[D.ToString]:ne(ae(1,1),ve(vt|ge|Ot|_n))};function lf(r,e,t){const n=r.length-1,i=new Array(n);for(let l=0;l<n;++l){const a=r[l+1];switch(typeof a){case"number":{i[l]=new qe(ge,a);break}case"string":{i[l]=new qe(Ot,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}l===0&&t.properties.add(String(a))}return i}function f0(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new qe(Ot,n)]}function g0(r,e,t){t.featureId=!0}function m0(r,e,t){t.geometryType=!0}function Lr(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function ae(r,e){return function(t,n,i){const l=t[0],a=t.length-1;if(r===e){if(a!==r){const u=r===1?"":"s";throw new Error(`expected ${r} argument${u} for ${l}, got ${a}`)}}else if(a<r||a>e){const u=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${u} arguments for ${l}, got ${a}`)}}}function af(r,e,t){const n=r.length-1,i=new Array(n);for(let l=0;l<n;++l){const a=ut(r[l+1],e,t);i[l]=a}return i}function ve(r){return function(e,t,n){const i=e.length-1,l=new Array(i);for(let a=0;a<i;++a){const u=ut(e[a+1],r,n);l[a]=u}return l}}function _0(r,e,t){const n=r[0],i=r.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${i} instead`)}function uf(r,e,t){const n=r[0],i=r.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${i} instead`)}function p0(r,e,t){const n=r.length-1,i=Ot|ge|vt,l=ut(r[1],i,t),a=ut(r[r.length-1],e,t),u=new Array(n-2);for(let c=0;c<n-2;c+=2){try{const m=ut(r[c+2],l.type,t);u[c]=m}catch(m){throw new Error(`failed to parse argument ${c+1} of match expression: ${m.message}`)}try{const m=ut(r[c+3],a.type,t);u[c+1]=m}catch(m){throw new Error(`failed to parse argument ${c+2} of match expression: ${m.message}`)}}return[l,...u,a]}function y0(r,e,t){const n=r[1];let i;switch(n[0]){case"linear":i=1;break;case"exponential":const c=n[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);i=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new qe(ge,i);let a;try{a=ut(r[2],ge,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const u=new Array(r.length-3);for(let c=0;c<u.length;c+=2){try{const m=ut(r[c+3],ge,t);u[c]=m}catch(m){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${m.message}`)}try{const m=ut(r[c+4],e,t);u[c+1]=m}catch(m){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${m.message}`)}}return[l,a,...u]}function x0(r,e,t){const n=ut(r[r.length-1],e,t),i=new Array(r.length-1);for(let l=0;l<i.length-1;l+=2){try{const a=ut(r[l+1],vt,t);i[l]=a}catch(a){throw new Error(`failed to parse argument ${l} of case expression: ${a.message}`)}try{const a=ut(r[l+2],n.type,t);i[l+1]=a}catch(a){throw new Error(`failed to parse argument ${l+1} of case expression: ${a.message}`)}}return i[i.length-1]=n,i}function E0(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],i=Ot}else i=ge;const l=new Array(n.length);for(let u=0;u<l.length;u++)try{const c=ut(n[u],i,t);l[u]=c}catch(c){throw new Error(`failed to parse haystack item ${u} for "in" expression: ${c.message}`)}return[ut(r[1],i,t),...l]}function v0(r,e,t){let n;try{n=ut(r[1],ge,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=r[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const l=new Array(i.length);for(let a=0;a<l.length;a++){let u;try{u=ut(i[a],_n,t)}catch(c){throw new Error(`failed to parse color at index ${a} in palette expression: ${c.message}`)}if(!(u instanceof qe))throw new Error(`the palette color at index ${a} must be a literal value`);l[a]=u}return[n,...l]}function ne(...r){return function(e,t,n){const i=e[0];let l;for(let a=0;a<r.length;a++){const u=r[a](e,t,n);if(a==r.length-1){if(!u)throw new Error("expected last argument validator to return the parsed args");l=u}}return new c0(t,i,...l)}}function C0(r,e,t){const n=r[0],i=d0[n];if(!i)throw new Error(`unknown operator: ${n}`);return i(r,e,t)}function wg(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return wg(r.getGeometries()[0]);default:return""}}function Sg(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ri(r,e,t){const n=ut(r,e,t);return xn(n)}function xn(r,e){if(r instanceof qe){if(r.type===_n&&typeof r.value=="string"){const n=Fh(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case D.Number:case D.String:case D.Coalesce:return w0(r);case D.Get:case D.Var:case D.Has:return S0(r);case D.Id:return n=>n.featureId;case D.GeometryType:return n=>n.geometryType;case D.Concat:{const n=r.args.map(i=>xn(i));return i=>"".concat(...n.map(l=>l(i).toString()))}case D.Resolution:return n=>n.resolution;case D.Any:case D.All:case D.Between:case D.In:case D.Not:return I0(r);case D.Equal:case D.NotEqual:case D.LessThan:case D.LessThanOrEqualTo:case D.GreaterThan:case D.GreaterThanOrEqualTo:return R0(r);case D.Multiply:case D.Divide:case D.Add:case D.Subtract:case D.Clamp:case D.Mod:case D.Pow:case D.Abs:case D.Floor:case D.Ceil:case D.Round:case D.Sin:case D.Cos:case D.Atan:case D.Sqrt:return T0(r);case D.Case:return P0(r);case D.Match:return L0(r);case D.Interpolate:return M0(r);case D.ToString:return A0(r);default:throw new Error(`Unsupported operator ${t}`)}}function w0(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=xn(r.args[l]);switch(t){case D.Coalesce:return l=>{for(let a=0;a<n;++a){const u=i[a](l);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case D.Number:case D.String:return l=>{for(let a=0;a<n;++a){const u=i[a](l);if(typeof u===t)return u}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function S0(r,e){const n=r.args[0].value;switch(r.operator){case D.Get:return i=>{const l=r.args;let a=i.properties[n];for(let u=1,c=l.length;u<c;++u){const g=l[u].value;a=a[g]}return a};case D.Var:return i=>i.variables[n];case D.Has:return i=>{const l=r.args;if(!(n in i.properties))return!1;let a=i.properties[n];for(let u=1,c=l.length;u<c;++u){const g=l[u].value;if(!a||!Object.hasOwn(a,g))return!1;a=a[g]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function R0(r,e){const t=r.operator,n=xn(r.args[0]),i=xn(r.args[1]);switch(t){case D.Equal:return l=>n(l)===i(l);case D.NotEqual:return l=>n(l)!==i(l);case D.LessThan:return l=>n(l)<i(l);case D.LessThanOrEqualTo:return l=>n(l)<=i(l);case D.GreaterThan:return l=>n(l)>i(l);case D.GreaterThanOrEqualTo:return l=>n(l)>=i(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function I0(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=xn(r.args[l]);switch(t){case D.Any:return l=>{for(let a=0;a<n;++a)if(i[a](l))return!0;return!1};case D.All:return l=>{for(let a=0;a<n;++a)if(!i[a](l))return!1;return!0};case D.Between:return l=>{const a=i[0](l),u=i[1](l),c=i[2](l);return a>=u&&a<=c};case D.In:return l=>{const a=i[0](l);for(let u=1;u<n;++u)if(a===i[u](l))return!0;return!1};case D.Not:return l=>!i[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function T0(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=xn(r.args[l]);switch(t){case D.Multiply:return l=>{let a=1;for(let u=0;u<n;++u)a*=i[u](l);return a};case D.Divide:return l=>i[0](l)/i[1](l);case D.Add:return l=>{let a=0;for(let u=0;u<n;++u)a+=i[u](l);return a};case D.Subtract:return l=>i[0](l)-i[1](l);case D.Clamp:return l=>{const a=i[0](l),u=i[1](l);if(a<u)return u;const c=i[2](l);return a>c?c:a};case D.Mod:return l=>i[0](l)%i[1](l);case D.Pow:return l=>Math.pow(i[0](l),i[1](l));case D.Abs:return l=>Math.abs(i[0](l));case D.Floor:return l=>Math.floor(i[0](l));case D.Ceil:return l=>Math.ceil(i[0](l));case D.Round:return l=>Math.round(i[0](l));case D.Sin:return l=>Math.sin(i[0](l));case D.Cos:return l=>Math.cos(i[0](l));case D.Atan:return n===2?l=>Math.atan2(i[0](l),i[1](l)):l=>Math.atan(i[0](l));case D.Sqrt:return l=>Math.sqrt(i[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function P0(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=xn(r.args[i]);return i=>{for(let l=0;l<t-1;l+=2)if(n[l](i))return n[l+1](i);return n[t-1](i)}}function L0(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=xn(r.args[i]);return i=>{const l=n[0](i);for(let a=1;a<t;a+=2)if(l===n[a](i))return n[a+1](i);return n[t-1](i)}}function M0(r,e){const t=r.args.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=xn(r.args[i]);return i=>{const l=n[0](i),a=n[1](i);let u,c;for(let m=2;m<t;m+=2){const g=n[m](i);let p=n[m+1](i);const y=Array.isArray(p);if(y&&(p=Xp(p)),g>=a)return m===2?p:y?O0(l,a,u,c,g,p):Ns(l,a,u,c,g,p);u=g,c=p}return c}}function A0(r,e){const t=r.operator,n=r.args.length,i=new Array(n);for(let l=0;l<n;++l)i[l]=xn(r.args[l]);switch(t){case D.ToString:return l=>{const a=i[0](l);return r.args[0].type===_n?Dh(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ns(r,e,t,n,i,l){const a=i-t;if(a===0)return n;const u=e-t,c=r===1?u/a:(Math.pow(r,u)-1)/(Math.pow(r,a)-1);return n+c*(l-n)}function O0(r,e,t,n,i,l){if(i-t===0)return n;const u=$d(n),c=$d(l);let m=c[2]-u[2];m>180?m-=360:m<-180&&(m+=360);const g=[Ns(r,e,t,u[0],i,c[0]),Ns(r,e,t,u[1],i,c[1]),u[2]+Ns(r,e,t,0,i,m),Ns(r,e,t,n[3],i,l[3])];return cg(Yp(g))}function F0(r){return!0}function D0(r){const e=Cg(),t=k0(r,e),n=Sg();return function(i,l){if(n.properties=i.getPropertiesInternal(),n.resolution=l,e.featureId){const a=i.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=wg(i.getGeometry())),t(n)}}function hf(r){const e=Cg(),t=r.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=Ju(r[a],e);const i=Sg(),l=new Array(t);return function(a,u){if(i.properties=a.getPropertiesInternal(),i.resolution=u,e.featureId){const m=a.getId();m!==void 0?i.featureId=m:i.featureId=null}let c=0;for(let m=0;m<t;++m){const g=n[m](i);g&&(l[c]=g,c+=1)}return l.length=c,l}}function k0(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i){const l=r[i],a="filter"in l?ri(l.filter,vt,e):F0;let u;if(Array.isArray(l.style)){const c=l.style.length;u=new Array(c);for(let m=0;m<c;++m)u[m]=Ju(l.style[m],e)}else u=[Ju(l.style,e)];n[i]={filter:a,styles:u}}return function(i){const l=[];let a=!1;for(let u=0;u<t;++u){const c=n[u].filter;if(c(i)&&!(r[u].else&&a)){a=!0;for(const m of n[u].styles){const g=m(i);g&&l.push(g)}}}return l}}function Ju(r,e){const t=qs(r,"",e),n=Qs(r,"",e),i=N0(r,e),l=z0(r,e),a=kt(r,"z-index",e);if(!t&&!n&&!i&&!l&&!ir(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const u=new nr;return function(c){let m=!0;if(t){const g=t(c);g&&(m=!1),u.setFill(g)}if(n){const g=n(c);g&&(m=!1),u.setStroke(g)}if(i){const g=i(c);g&&(m=!1),u.setText(g)}if(l){const g=l(c);g&&(m=!1),u.setImage(g)}return a&&u.setZIndex(a(c)),m?null:u}}function qs(r,e,t){let n;if(e+"fill-pattern-src"in r)n=Y0(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Wh(r,e+"fill-color",t)}if(!n)return null;const i=new ro;return function(l){const a=n(l);return a===Oh?null:(i.setColor(a),i)}}function Qs(r,e,t){const n=kt(r,e+"stroke-width",t),i=Wh(r,e+"stroke-color",t);if(!n&&!i)return null;const l=qn(r,e+"stroke-line-cap",t),a=qn(r,e+"stroke-line-join",t),u=Rg(r,e+"stroke-line-dash",t),c=kt(r,e+"stroke-line-dash-offset",t),m=kt(r,e+"stroke-miter-limit",t),g=new ea;return function(p){if(i){const y=i(p);if(y===Oh)return null;g.setColor(y)}if(n&&g.setWidth(n(p)),l){const y=l(p);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(y)}if(a){const y=a(p);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(y)}return u&&g.setLineDash(u(p)),c&&g.setLineDashOffset(c(p)),m&&g.setMiterLimit(m(p)),g}}function N0(r,e){const t="text-",n=qn(r,t+"value",e);if(!n)return null;const i=qs(r,t,e),l=qs(r,t+"background-",e),a=Qs(r,t,e),u=Qs(r,t+"background-",e),c=qn(r,t+"font",e),m=kt(r,t+"max-angle",e),g=kt(r,t+"offset-x",e),p=kt(r,t+"offset-y",e),y=Js(r,t+"overflow",e),x=qn(r,t+"placement",e),v=kt(r,t+"repeat",e),C=na(r,t+"scale",e),w=Js(r,t+"rotate-with-view",e),S=kt(r,t+"rotation",e),R=qn(r,t+"align",e),P=qn(r,t+"justify",e),L=qn(r,t+"baseline",e),M=Rg(r,t+"padding",e),G=ia(r,t+"declutter-mode"),N=new zh({declutterMode:G});return function(k){if(N.setText(n(k)),i&&N.setFill(i(k)),l&&N.setBackgroundFill(l(k)),a&&N.setStroke(a(k)),u&&N.setBackgroundStroke(u(k)),c&&N.setFont(c(k)),m&&N.setMaxAngle(m(k)),g&&N.setOffsetX(g(k)),p&&N.setOffsetY(p(k)),y&&N.setOverflow(y(k)),x){const z=x(k);if(z!=="point"&&z!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(z)}if(v&&N.setRepeat(v(k)),C&&N.setScale(C(k)),w&&N.setRotateWithView(w(k)),S&&N.setRotation(S(k)),R){const z=R(k);if(z!=="left"&&z!=="center"&&z!=="right"&&z!=="end"&&z!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(z)}if(P){const z=P(k);if(z!=="left"&&z!=="right"&&z!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(z)}if(L){const z=L(k);if(z!=="bottom"&&z!=="top"&&z!=="middle"&&z!=="alphabetic"&&z!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(z)}return M&&N.setPadding(M(k)),N}}function z0(r,e){return"icon-src"in r?G0(r,e):"shape-points"in r?W0(r,e):"circle-radius"in r?X0(r,e):null}function G0(r,e){const t="icon-",n=t+"src",i=Ig(r[n],n),l=Pl(r,t+"anchor",e),a=na(r,t+"scale",e),u=kt(r,t+"opacity",e),c=Pl(r,t+"displacement",e),m=kt(r,t+"rotation",e),g=Js(r,t+"rotate-with-view",e),p=df(r,t+"anchor-origin"),y=ff(r,t+"anchor-x-units"),x=ff(r,t+"anchor-y-units"),v=K0(r,t+"color"),C=U0(r,t+"cross-origin"),w=B0(r,t+"offset"),S=df(r,t+"offset-origin"),R=Ll(r,t+"width"),P=Ll(r,t+"height"),L=j0(r,t+"size"),M=ia(r,t+"declutter-mode"),G=new ta({src:i,anchorOrigin:p,anchorXUnits:y,anchorYUnits:x,color:v,crossOrigin:C,offset:w,offsetOrigin:S,height:P,width:R,size:L,declutterMode:M});return function(N){return u&&G.setOpacity(u(N)),c&&G.setDisplacement(c(N)),m&&G.setRotation(m(N)),g&&G.setRotateWithView(g(N)),a&&G.setScale(a(N)),l&&G.setAnchor(l(N)),G}}function W0(r,e){const t="shape-",n=t+"points",i=t+"radius",l=$u(r[n],n),a=$u(r[i],i),u=qs(r,t,e),c=Qs(r,t,e),m=na(r,t+"scale",e),g=Pl(r,t+"displacement",e),p=kt(r,t+"rotation",e),y=Js(r,t+"rotate-with-view",e),x=Ll(r,t+"radius2"),v=Ll(r,t+"angle"),C=ia(r,t+"declutter-mode"),w=new Jl({points:l,radius:a,radius2:x,angle:v,declutterMode:C});return function(S){return u&&w.setFill(u(S)),c&&w.setStroke(c(S)),g&&w.setDisplacement(g(S)),p&&w.setRotation(p(S)),y&&w.setRotateWithView(y(S)),m&&w.setScale(m(S)),w}}function X0(r,e){const t="circle-",n=qs(r,t,e),i=Qs(r,t,e),l=kt(r,t+"radius",e),a=na(r,t+"scale",e),u=Pl(r,t+"displacement",e),c=kt(r,t+"rotation",e),m=Js(r,t+"rotate-with-view",e),g=ia(r,t+"declutter-mode"),p=new $l({radius:5,declutterMode:g});return function(y){return l&&p.setRadius(l(y)),n&&p.setFill(n(y)),i&&p.setStroke(i(y)),u&&p.setDisplacement(u(y)),c&&p.setRotation(c(y)),m&&p.setRotateWithView(m(y)),a&&p.setScale(a(y)),p}}function kt(r,e,t){if(!(e in r))return;const n=ri(r[e],ge,t);return function(i){return $u(n(i),e)}}function qn(r,e,t){if(!(e in r))return null;const n=ri(r[e],Ot,t);return function(i){return Ig(n(i),e)}}function Y0(r,e,t){const n=qn(r,e+"pattern-src",t),i=cf(r,e+"pattern-offset",t),l=cf(r,e+"pattern-size",t),a=Wh(r,e+"color",t);return function(u){return{src:n(u),offset:i&&i(u),size:l&&l(u),color:a&&a(u)}}}function Js(r,e,t){if(!(e in r))return null;const n=ri(r[e],vt,t);return function(i){const l=n(i);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Wh(r,e,t){if(!(e in r))return null;const n=ri(r[e],_n,t);return function(i){return Tg(n(i),e)}}function Rg(r,e,t){if(!(e in r))return null;const n=ri(r[e],rr,t);return function(i){return so(n(i),e)}}function Pl(r,e,t){if(!(e in r))return null;const n=ri(r[e],rr,t);return function(i){const l=so(n(i),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function cf(r,e,t){if(!(e in r))return null;const n=ri(r[e],rr,t);return function(i){return Pg(n(i),e)}}function na(r,e,t){if(!(e in r))return null;const n=ri(r[e],rr|ge,t);return function(i){return Z0(n(i),e)}}function Ll(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function j0(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Nt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function U0(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function df(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ff(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function B0(r,e){const t=r[e];if(t!==void 0)return so(t,e)}function ia(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function K0(r,e){const t=r[e];if(t!==void 0)return Tg(t,e)}function so(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function Ig(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function $u(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function Tg(r,e){if(typeof r=="string")return r;const t=so(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Pg(r,e){const t=so(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Z0(r,e){return typeof r=="number"?r:Pg(r,e)}const gf={RENDER_ORDER:"renderOrder"};class Lg extends Hl{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(gf.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new ug(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(gf.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?vg:e;const t=V0(e);this.styleFunction_=e===null?void 0:l0(t),this.changed()}}function V0(r){if(r===void 0)return vg;if(!r)return null;if(typeof r=="function"||r instanceof nr)return r;if(!Array.isArray(r))return hf([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof nr){const i=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!(a instanceof nr))throw new Error("Expected a list of style instances");i[l]=a}return i}if("style"in t){const i=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[l]=a}return D0(i)}return hf(r)}const Q={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ml=[Q.FILL],Ii=[Q.STROKE],er=[Q.BEGIN_PATH],mf=[Q.CLOSE_PATH];class Mg{drawCustom(e,t,n,i,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class oo extends Mg{constructor(e,t,n,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let a=l.length;for(let u=0,c=e.length;u<c;u+=t)i[0]=e[u],i[1]=e[u+1],Kr(n,i)&&(l[a++]=i[0],l[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,n,i,l,a){const u=this.coordinates;let c=u.length;const m=this.getBufferedMaxExtent();a&&(t+=i);let g=e[t],p=e[t+1];const y=this.tmpCoordinate_;let x=!0,v,C,w;for(v=t+i;v<n;v+=i)y[0]=e[v],y[1]=e[v+1],w=Bu(m,y),w!==C?(x&&(u[c++]=g,u[c++]=p,x=!1),u[c++]=y[0],u[c++]=y[1]):w===nt.INTERSECTING?(u[c++]=y[0],u[c++]=y[1],x=!1):x=!0,g=y[0],p=y[1],C=w;return(l&&x||v===t+i)&&(u[c++]=g,u[c++]=p),c}drawCustomCoordinates_(e,t,n,i,l){for(let a=0,u=n.length;a<u;++a){const c=n[a],m=this.appendFlatLineCoordinates(e,t,c,i,!1,!1);l.push(m),t=c}return t}drawCustom(e,t,n,i,l){this.beginGeometry(e,t,l);const a=e.getType(),u=e.getStride(),c=this.coordinates.length;let m,g,p,y,x;switch(a){case"MultiPolygon":m=e.getOrientedFlatCoordinates(),y=[];const v=e.getEndss();x=0;for(let C=0,w=v.length;C<w;++C){const S=[];x=this.drawCustomCoordinates_(m,x,v[C],u,S),y.push(S)}this.instructions.push([Q.CUSTOM,c,y,e,n,bu,l]),this.hitDetectionInstructions.push([Q.CUSTOM,c,y,e,i||n,bu,l]);break;case"Polygon":case"MultiLineString":p=[],m=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(m,0,e.getEnds(),u,p),this.instructions.push([Q.CUSTOM,c,p,e,n,js,l]),this.hitDetectionInstructions.push([Q.CUSTOM,c,p,e,i||n,js,l]);break;case"LineString":case"Circle":m=e.getFlatCoordinates(),g=this.appendFlatLineCoordinates(m,0,m.length,u,!1,!1),this.instructions.push([Q.CUSTOM,c,g,e,n,Ri,l]),this.hitDetectionInstructions.push([Q.CUSTOM,c,g,e,i||n,Ri,l]);break;case"MultiPoint":m=e.getFlatCoordinates(),g=this.appendFlatPointCoordinates(m,u),g>c&&(this.instructions.push([Q.CUSTOM,c,g,e,n,Ri,l]),this.hitDetectionInstructions.push([Q.CUSTOM,c,g,e,i||n,Ri,l]));break;case"Point":m=e.getFlatCoordinates(),this.coordinates.push(m[0],m[1]),g=this.coordinates.length,this.instructions.push([Q.CUSTOM,c,g,e,n,void 0,l]),this.hitDetectionInstructions.push([Q.CUSTOM,c,g,e,i||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[Q.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Q.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let i,l,a=-1;for(t=0;t<n;++t)i=e[t],l=i[0],l==Q.END_GEOMETRY?a=t:l==Q.BEGIN_GEOMETRY&&(i[2]=t,C_(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const i=e.getColor();n.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,n.fillStyle=Fn(i||At)}else n.fillStyle=void 0;if(t){const i=t.getColor();n.strokeStyle=Fn(i||Vs);const l=t.getLineCap();n.lineCap=l!==void 0?l:br;const a=t.getLineDash();n.lineDash=a?a.slice():$n;const u=t.getLineDashOffset();n.lineDashOffset=u||ei;const c=t.getLineJoin();n.lineJoin=c!==void 0?c:Hr;const m=t.getWidth();n.lineWidth=m!==void 0?m:Hs;const g=t.getMiterLimit();n.miterLimit=g!==void 0?g:Zs,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Q.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Q.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,i=e.lineCap,l=e.lineDash,a=e.lineDashOffset,u=e.lineJoin,c=e.lineWidth,m=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=i||l!=e.currentLineDash&&!Oi(e.currentLineDash,l)||e.currentLineDashOffset!=a||e.currentLineJoin!=u||e.currentLineWidth!=c||e.currentMiterLimit!=m)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=i,e.currentLineDash=l,e.currentLineDashOffset=a,e.currentLineJoin=u,e.currentLineWidth=c,e.currentMiterLimit=m)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Q.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Wf(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;hh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class b0 extends oo{constructor(e,t,n,i){super(e,t,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Kr(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),l=e.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(i,l);this.instructions.push([Q.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const i=e.getFlatCoordinates(),l=[];for(let c=0,m=i.length;c<m;c+=e.getStride())(!this.maxExtent||Kr(this.maxExtent,i.slice(c,c+2)))&&l.push(i[c],i[c+1]);const a=this.coordinates.length,u=this.appendFlatPointCoordinates(l,2);this.instructions.push([Q.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),i=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class H0 extends oo{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinates_(e,t,n,i){const l=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,i,!1,!1),u=[Q.MOVE_TO_LINE_TO,l,a];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n}drawLineString(e,t,n){const i=this.state,l=i.strokeStyle,a=i.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$n,ei],er);const u=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(u,0,u.length,c),this.hitDetectionInstructions.push(Ii),this.endGeometry(t)}drawMultiLineString(e,t,n){const i=this.state,l=i.strokeStyle,a=i.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$n,ei],er);const u=e.getEnds(),c=e.getFlatCoordinates(),m=e.getStride();let g=0;for(let p=0,y=u.length;p<y;++p)g=this.drawFlatCoordinates_(c,g,u[p],m);this.hitDetectionInstructions.push(Ii),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ii),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ii),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(er)}}class _f extends oo{constructor(e,t,n,i){super(e,t,n,i)}drawFlatCoordinatess_(e,t,n,i){const l=this.state,a=l.fillStyle!==void 0,u=l.strokeStyle!==void 0,c=n.length;this.instructions.push(er),this.hitDetectionInstructions.push(er);for(let m=0;m<c;++m){const g=n[m],p=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,g,i,!0,!u),x=[Q.MOVE_TO_LINE_TO,p,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),u&&(this.instructions.push(mf),this.hitDetectionInstructions.push(mf)),t=g}return a&&(this.instructions.push(ml),this.hitDetectionInstructions.push(ml)),u&&(this.instructions.push(Ii),this.hitDetectionInstructions.push(Ii)),t}drawCircle(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,At]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$n,ei]);const u=e.getFlatCoordinates(),c=e.getStride(),m=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,c,!1,!1);const g=[Q.CIRCLE,m];this.instructions.push(er,g),this.hitDetectionInstructions.push(er,g),i.fillStyle!==void 0&&(this.instructions.push(ml),this.hitDetectionInstructions.push(ml)),i.strokeStyle!==void 0&&(this.instructions.push(Ii),this.hitDetectionInstructions.push(Ii)),this.endGeometry(t)}drawPolygon(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,At]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$n,ei]);const u=e.getEnds(),c=e.getOrientedFlatCoordinates(),m=e.getStride();this.drawFlatCoordinatess_(c,0,u,m),this.endGeometry(t)}drawMultiPolygon(e,t,n){const i=this.state,l=i.fillStyle,a=i.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,At]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$n,ei]);const u=e.getEndss(),c=e.getOrientedFlatCoordinates(),m=e.getStride();let g=0;for(let p=0,y=u.length;p<y;++p)g=this.drawFlatCoordinatess_(c,g,u[p],m);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,i=t.length;n<i;++n)t[n]=qi(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function q0(r,e,t,n,i){const l=[];let a=t,u=0,c=e.slice(t,2);for(;u<r&&a+i<n;){const[m,g]=c.slice(-2),p=e[a+i],y=e[a+i+1],x=Math.sqrt((p-m)*(p-m)+(y-g)*(y-g));if(u+=x,u>=r){const v=(r-u+x)/x,C=Yt(m,p,v),w=Yt(g,y,v);c.push(C,w),l.push(c),c=[C,w],u==r&&(a+=i),u=0}else if(u<r)c.push(e[a+i],e[a+i+1]),a+=i;else{const v=x-u,C=Yt(m,p,v/x),w=Yt(g,y,v/x);c.push(C,w),l.push(c),c=[C,w],u=0,a+=i}}return u>0&&l.push(c),l}function Q0(r,e,t,n,i){let l=t,a=t,u=0,c=0,m=t,g,p,y,x,v,C,w,S,R,P;for(p=t;p<n;p+=i){const L=e[p],M=e[p+1];v!==void 0&&(R=L-v,P=M-C,x=Math.sqrt(R*R+P*P),w!==void 0&&(c+=y,g=Math.acos((w*R+S*P)/(y*x)),g>r&&(c>u&&(u=c,l=m,a=p),c=0,m=p-i)),y=x,w=R,S=P),v=L,C=M}return c+=x,c>u?[m,p]:[l,a]}const Ml={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class J0 extends oo{constructor(e,t,n,i){super(e,t,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[At]={fillStyle:At},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const i=this.textFillState_,l=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!l)return;const u=this.coordinates;let c=u.length;const m=e.getType();let g=null,p=e.getStride();if(a.placement==="line"&&(m=="LineString"||m=="MultiLineString"||m=="Polygon"||m=="MultiPolygon")){if(!Dt(this.maxExtent,e.getExtent()))return;let y;if(g=e.getFlatCoordinates(),m=="LineString")y=[g.length];else if(m=="MultiLineString")y=e.getEnds();else if(m=="Polygon")y=e.getEnds().slice(0,1);else if(m=="MultiPolygon"){const w=e.getEndss();y=[];for(let S=0,R=w.length;S<R;++S)y.push(w[S][0])}this.beginGeometry(e,t,n);const x=a.repeat,v=x?void 0:a.textAlign;let C=0;for(let w=0,S=y.length;w<S;++w){let R;x?R=q0(x*this.resolution,g,C,y[w],p):R=[g.slice(C,y[w])];for(let P=0,L=R.length;P<L;++P){const M=R[P];let G=0,N=M.length;if(v==null){const z=Q0(a.maxAngle,M,0,M.length,2);G=z[0],N=z[1]}for(let z=G;z<N;z+=p)u.push(M[z],M[z+1]);const k=u.length;C=y[w],this.drawChars_(c,k),c=k}}this.endGeometry(t)}else{let y=a.overflow?null:[];switch(m){case"Point":case"MultiPoint":g=e.getFlatCoordinates();break;case"LineString":g=e.getFlatMidpoint();break;case"Circle":g=e.getCenter();break;case"MultiLineString":g=e.getFlatMidpoints(),p=2;break;case"Polygon":g=e.getFlatInteriorPoint(),a.overflow||y.push(g[2]/this.resolution),p=3;break;case"MultiPolygon":const R=e.getFlatInteriorPoints();g=[];for(let P=0,L=R.length;P<L;P+=3)a.overflow||y.push(R[P+2]/this.resolution),g.push(R[P],R[P+1]);if(g.length===0)return;p=2;break}const x=this.appendFlatPointCoordinates(g,p);if(x===c)return;if(y&&(x-c)/2!==g.length/p){let R=c/2;y=y.filter((P,L)=>{const M=u[(R+L)*2]===g[L*p]&&u[(R+L)*2+1]===g[L*p+1];return M||--R,M})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let v=a.padding;if(v!=$i&&(a.scale[0]<0||a.scale[1]<0)){let R=a.padding[0],P=a.padding[1],L=a.padding[2],M=a.padding[3];a.scale[0]<0&&(P=-P,M=-M),a.scale[1]<0&&(R=-R,L=-L),v=[R,P,L,M]}const C=this.pixelRatio;this.instructions.push([Q.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==$i?$i:v.map(function(R){return R*C}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const w=1/C,S=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=At,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Q.DRAW_IMAGE,c,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?At:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),a.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||bs,justify:t.justify,textBaseline:t.textBaseline||Il,scale:t.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,i=this.textState_,l=this.strokeKey_,a=this.textKey_,u=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,m=Ml[i.textBaseline],g=this.textOffsetY_*c,p=this.text_,y=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Q.DRAW_CHARS,e,t,m,i.overflow,u,i.maxAngle,c,g,l,y*c,p,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([Q.DRAW_CHARS,e,t,m,i.overflow,u&&At,i.maxAngle,c,g,l,y*c,p,a,1/c,this.declutterMode_])}setTextStyle(e,t){let n,i,l;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Fn(a.getColor()||At)):(i=null,this.textFillState_=i);const u=e.getStroke();if(!u)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const v=u.getLineDash(),C=u.getLineDashOffset(),w=u.getWidth(),S=u.getMiterLimit();l.lineCap=u.getLineCap()||br,l.lineDash=v?v.slice():$n,l.lineDashOffset=C===void 0?ei:C,l.lineJoin=u.getLineJoin()||Hr,l.lineWidth=w===void 0?Hs:w,l.miterLimit=S===void 0?Zs:S,l.strokeStyle=Fn(u.getColor()||Vs)}n=this.textState_;const c=e.getFont()||xg;n0(c);const m=e.getScaleArray();n.overflow=e.getOverflow(),n.font=c,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Il,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||$i,n.scale=m===void 0?[1,1]:m;const g=e.getOffsetX(),p=e.getOffsetY(),y=e.getRotateWithView(),x=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=y===void 0?!1:y,this.textRotation_=x===void 0?0:x,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:we(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+we(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const $0={Circle:_f,Default:oo,Image:b0,LineString:H0,Polygon:_f,Text:J0};class ey{constructor(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const i in n){const l=n[i].finish();e[t][i]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);let l=i[t];if(l===void 0){const a=$0[t];l=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=l}return l}}const ty=5;class ny extends eo{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ty}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ie()}getData(e){return null}prepareFrame(e){return ie()}renderFrame(e,t){return ie()}forEachFeatureAtCoordinate(e,t,n,i,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===he.LOADED||t.getState()===he.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=he.LOADED&&t!=he.ERROR&&e.addEventListener(re.CHANGE,this.boundHandleImageChange_),t==he.IDLE&&(e.load(),t=e.getState()),t==he.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Ag extends ii{constructor(e,t,n,i){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=i}}class Og{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Rl(),{get:(e,t)=>{if(typeof Rl()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,i=t.length;n<i;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const a=t[++n];if(typeof e[l]=="function")e[l](...a);else{if(typeof a=="function"){e[l]=a(e);continue}e[l]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const pf=[];let zr=null;function iy(){zr=Ye(1,1,void 0,{willReadFrequently:!0})}class Fg extends ny{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=yn(),this.pixelTransform=yn(),this.inversePixelTransform=yn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){zr||iy(),zr.clearRect(0,0,1,1);let i;try{zr.drawImage(e,t,n,1,1,0,0,1,1),i=zr.getImageData(0,0,1,1).data}catch{return zr=null,null}return i}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const i=this.getLayer().getClassName();let l,a;if(e&&e.className===i&&(!n||e&&e.style.backgroundColor&&Oi(Ks(e.style.backgroundColor),Ks(n)))){const u=e.firstElementChild;u instanceof HTMLCanvasElement&&(a=u.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=i;let u=l.style;u.position="absolute",u.width="100%",u.height="100%",a=Ye();const c=a.canvas;l.appendChild(c),u=c.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=l,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const i=or(n),l=Bl(n),a=Ul(n),u=jl(n);lt(t.coordinateToPixelTransform,i),lt(t.coordinateToPixelTransform,l),lt(t.coordinateToPixelTransform,a),lt(t.coordinateToPixelTransform,u);const c=this.inversePixelTransform;lt(c,i),lt(c,l),lt(c,a),lt(c,u),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.clip()}prepareContainer(e,t){const n=e.extent,i=e.viewState.resolution,l=e.viewState.rotation,a=e.pixelRatio,u=Math.round(Ce(n)/i*a),c=Math.round(yt(n)/i*a);ni(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-u/2,-c/2),qf(this.inversePixelTransform,this.pixelTransform);const m=up(this.pixelTransform);if(this.useContainer(t,m,this.getBackground(e)),!this.containerReused){const g=this.context.canvas;g.width!=u||g.height!=c?(g.width=u,g.height=c):this.context.clearRect(0,0,u,c),m!==g.style.transform&&(g.style.transform=m)}}dispatchRenderEvent_(e,t,n){const i=this.getLayer();if(i.hasListener(e)){const l=new Ag(e,this.inversePixelTransform,n,t);i.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(nn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(nn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Og),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(nn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(nn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,i,l,a,u){const c=l/2,m=a/2,g=i/t,p=-g,y=-e[0]+u,x=-e[1];return ni(this.tempTransform,c,m,g,p,-n,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function ry(r,e,t,n,i,l,a,u,c,m,g,p){let y=r[e],x=r[e+1],v=0,C=0,w=0,S=0;function R(){v=y,C=x,e+=n,y=r[e],x=r[e+1],S+=w,w=Math.sqrt((y-v)*(y-v)+(x-C)*(x-C))}do R();while(e<t-n&&S+w<l);let P=w===0?0:(l-S)/w;const L=Yt(v,y,P),M=Yt(C,x,P),G=e-n,N=S,k=l+u*c(m,i,g);for(;e<t-n&&S+w<k;)R();P=w===0?0:(k-S)/w;const z=Yt(v,y,P),te=Yt(C,x,P);let H;if(p){const Y=[L,M,z,te];Qf(Y,0,4,2,p,Y,Y),H=Y[0]>Y[2]}else H=L>z;const b=Math.PI,$=[],j=G+n===e;e=G,w=0,S=N,y=r[e],x=r[e+1];let q;if(j){R(),q=Math.atan2(x-C,y-v),H&&(q+=q>0?-b:b);const Y=(z+L)/2,ce=(te+M)/2;return $[0]=[Y,ce,(k-l)/2,q,i],$}i=i.replace(/\n/g," ");for(let Y=0,ce=i.length;Y<ce;){R();let de=Math.atan2(x-C,y-v);if(H&&(de+=de>0?-b:b),q!==void 0){let X=de-q;if(X+=X>b?-2*b:X<-b?2*b:0,Math.abs(X)>a)return null}q=de;const Ie=Y;let ee=0;for(;Y<ce;++Y){const X=H?ce-Y-1:Y,Qe=u*c(m,i[X],g);if(e+n<t&&S+w<l+ee+Qe/2)break;ee+=Qe}if(Y===Ie)continue;const se=H?i.substring(ce-Ie,ce-Y):i.substring(Ie,Y);P=w===0?0:(l+ee/2-S)/w;const Ee=Yt(v,y,P),je=Yt(C,x,P);$.push([Ee,je,ee/2,de,se]),l+=ee}return $}function Dg(r,e,t,n){let i=r[e],l=r[e+1],a=0;for(let u=e+n;u<t;u+=n){const c=r[u],m=r[u+1];a+=Math.sqrt((c-i)*(c-i)+(m-l)*(m-l)),i=c,l=m}return a}const Mr=rn(),yi=[],Kn=[],Zn=[],xi=[];function yf(r){return r[3].declutterBox}const xf=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Fu(r,e){return e==="start"?e=xf.test(r)?"right":"left":e==="end"&&(e=xf.test(r)?"left":"right"),Ml[e]}function sy(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class oy{constructor(e,t,n,i,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=yn(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new Og:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,i){const l=e+t+n+i;if(this.labels_[l])return this.labels_[l];const a=i?this.strokeStates[i]:null,u=n?this.fillStates[n]:null,c=this.textStates[t],m=this.pixelRatio,g=[c.scale[0]*m,c.scale[1]*m],p=c.justify?Ml[c.justify]:Fu(Array.isArray(e)?e[0]:e,c.textAlign||bs),y=i&&a.lineWidth?a.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(sy,[]),{width:v,height:C,widths:w,heights:S,lineWidths:R}=r0(c,x),P=v+y,L=[],M=(P+2)*g[0],G=(C+y)*g[1],N={width:M<0?Math.floor(M):Math.ceil(M),height:G<0?Math.floor(G):Math.ceil(G),contextInstructions:L};(g[0]!=1||g[1]!=1)&&L.push("scale",g),i&&(L.push("strokeStyle",a.strokeStyle),L.push("lineWidth",y),L.push("lineCap",a.lineCap),L.push("lineJoin",a.lineJoin),L.push("miterLimit",a.miterLimit),L.push("setLineDash",[a.lineDash]),L.push("lineDashOffset",a.lineDashOffset)),n&&L.push("fillStyle",u.fillStyle),L.push("textBaseline","middle"),L.push("textAlign","center");const k=.5-p;let z=p*P+k*y;const te=[],H=[];let b=0,$=0,j=0,q=0,Y;for(let ce=0,de=x.length;ce<de;ce+=2){const Ie=x[ce];if(Ie===`
`){$+=b,b=0,z=p*P+k*y,++q;continue}const ee=x[ce+1]||c.font;ee!==Y&&(i&&te.push("font",ee),n&&H.push("font",ee),Y=ee),b=Math.max(b,S[j]);const se=[Ie,z+k*w[j]+p*(w[j]-R[q]),.5*(y+b)+$];z+=w[j],i&&te.push("strokeText",se),n&&H.push("fillText",se),++j}return Array.prototype.push.apply(L,te),Array.prototype.push.apply(L,H),this.labels_[l]=N,N}replayTextBackground_(e,t,n,i,l,a,u){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,l),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),u&&(this.setStrokeStyle_(e,u),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,i,l,a,u,c,m,g,p,y,x,v,C,w){u*=y[0],c*=y[1];let S=n-u,R=i-c;const P=l+m>e?e-m:l,L=a+g>t?t-g:a,M=v[3]+P*y[0]+v[1],G=v[0]+L*y[1]+v[2],N=S-v[3],k=R-v[0];(C||p!==0)&&(yi[0]=N,xi[0]=N,yi[1]=k,Kn[1]=k,Kn[0]=N+M,Zn[0]=Kn[0],Zn[1]=k+G,xi[1]=Zn[1]);let z;return p!==0?(z=ni(yn(),n,i,1,1,p,-n,-i),lt(z,yi),lt(z,Kn),lt(z,Zn),lt(z,xi),Pi(Math.min(yi[0],Kn[0],Zn[0],xi[0]),Math.min(yi[1],Kn[1],Zn[1],xi[1]),Math.max(yi[0],Kn[0],Zn[0],xi[0]),Math.max(yi[1],Kn[1],Zn[1],xi[1]),Mr)):Pi(Math.min(N,N+M),Math.min(k,k+G),Math.max(N,N+M),Math.max(k,k+G),Mr),x&&(S=Math.round(S),R=Math.round(R)),{drawImageX:S,drawImageY:R,drawImageW:P,drawImageH:L,originX:m,originY:g,declutterBox:{minX:Mr[0],minY:Mr[1],maxX:Mr[2],maxY:Mr[3],value:w},canvasTransform:z,scale:y}}replayImageOrLabel_(e,t,n,i,l,a,u){const c=!!(a||u),m=i.declutterBox,g=u?u[2]*i.scale[0]/2:0;return m.minX-g<=t[0]&&m.maxX+g>=0&&m.minY-g<=t[1]&&m.maxY+g>=0&&(c&&this.replayTextBackground_(e,yi,Kn,Zn,xi,a,u),s0(e,i.canvasTransform,l,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=lt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,i){const l=this.textStates[t],a=this.createLabel(e,t,i,n),u=this.strokeStates[n],c=this.pixelRatio,m=Fu(Array.isArray(e)?e[0]:e,l.textAlign||bs),g=Ml[l.textBaseline||Il],p=u&&u.lineWidth?u.lineWidth:0,y=a.width/c-2*l.scale[0],x=m*y+2*(.5-m)*p,v=g*a.height/c+2*(.5-g)*p;return{label:a,anchorX:x,anchorY:v}}execute_(e,t,n,i,l,a,u,c){const m=this.zIndexContext_;let g;this.pixelCoordinates_&&Oi(n,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Ti(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),lp(this.renderedTransform_,n));let p=0;const y=i.length;let x=0,v,C,w,S,R,P,L,M,G,N,k,z,te,H=0,b=0,$=null,j=null;const q=this.coordinateCache_,Y=this.viewRotation_,ce=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,de={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},Ie=this.instructions!=i||this.overlaps?0:200;let ee,se,Ee,je;for(;p<y;){const X=i[p];switch(X[0]){case Q.BEGIN_GEOMETRY:ee=X[1],je=X[3],ee.getGeometry()?u!==void 0&&!Dt(u,je.getExtent())?p=X[2]+1:++p:p=X[2],m&&(m.zIndex=X[4]);break;case Q.BEGIN_PATH:H>Ie&&(this.fill_(e),H=0),b>Ie&&(e.stroke(),b=0),!H&&!b&&(e.beginPath(),R=NaN,P=NaN),++p;break;case Q.CIRCLE:x=X[1];const Ue=g[x],We=g[x+1],Ut=g[x+2],zt=g[x+3],it=Ut-Ue,Ne=zt-We,vn=Math.sqrt(it*it+Ne*Ne);e.moveTo(Ue+vn,We),e.arc(Ue,We,vn,0,2*Math.PI,!0),++p;break;case Q.CLOSE_PATH:e.closePath(),++p;break;case Q.CUSTOM:x=X[1],v=X[2];const rt=X[3],$r=X[4],Fi=X[5];de.geometry=rt,de.feature=ee,p in q||(q[p]=[]);const Nn=q[p];Fi?Fi(g,x,v,2,Nn):(Nn[0]=g[x],Nn[1]=g[x+1],Nn.length=2),m&&(m.zIndex=X[6]),$r(Nn,de),++p;break;case Q.DRAW_IMAGE:x=X[1],v=X[2],G=X[3],C=X[4],w=X[5];let Ct=X[6];const Bt=X[7],si=X[8],Kt=X[9],Di=X[10];let zn=X[11];const oi=X[12];let Zt=X[13];S=X[14]||"declutter";const Be=X[15];if(!G&&X.length>=20){N=X[19],k=X[20],z=X[21],te=X[22];const wt=this.drawLabelWithPointPlacement_(N,k,z,te);G=wt.label,X[3]=G;const sn=X[23];C=(wt.anchorX-sn)*this.pixelRatio,X[4]=C;const xt=X[24];w=(wt.anchorY-xt)*this.pixelRatio,X[5]=w,Ct=G.height,X[6]=Ct,Zt=G.width,X[13]=Zt}let es;X.length>25&&(es=X[25]);let ts,cr,dr;X.length>17?(ts=X[16],cr=X[17],dr=X[18]):(ts=$i,cr=!1,dr=!1),Di&&ce?zn+=Y:!Di&&!ce&&(zn-=Y);let la=0;for(;x<v;x+=2){if(es&&es[la++]<Zt/this.pixelRatio)continue;const wt=this.calculateImageOrLabelDimensions_(G.width,G.height,g[x],g[x+1],Zt,Ct,C,w,si,Kt,zn,oi,l,ts,cr||dr,ee),sn=[e,t,G,wt,Bt,cr?$:null,dr?j:null];if(c){let xt,Gt,St;if(Be){const Le=v-x;if(!Be[Le]){Be[Le]={args:sn,declutterMode:S};continue}const Ve=Be[Le];xt=Ve.args,Gt=Ve.declutterMode,delete Be[Le],St=yf(xt)}let on,ln;if(xt&&(Gt!=="declutter"||!c.collides(St))&&(on=!0),(S!=="declutter"||!c.collides(wt.declutterBox))&&(ln=!0),Gt==="declutter"&&S==="declutter"){const Le=on&&ln;on=Le,ln=Le}on&&(Gt!=="none"&&c.insert(St),this.replayImageOrLabel_.apply(this,xt)),ln&&(S!=="none"&&c.insert(wt.declutterBox),this.replayImageOrLabel_.apply(this,sn))}else this.replayImageOrLabel_.apply(this,sn)}++p;break;case Q.DRAW_CHARS:const ho=X[1],co=X[2],ns=X[3],aa=X[4];te=X[5];const ua=X[6],fo=X[7],is=X[8];z=X[9];const rs=X[10];N=X[11],k=X[12];const go=[X[13],X[13]];S=X[14]||"declutter";const ss=this.textStates[k],ki=ss.font,Ni=[ss.scale[0]*fo,ss.scale[1]*fo];let zi;ki in this.widths_?zi=this.widths_[ki]:(zi={},this.widths_[ki]=zi);const os=Dg(g,ho,co,2),ls=Math.abs(Ni[0])*rf(ki,N,zi);if(aa||ls<=os){const wt=this.textStates[k].textAlign,sn=(os-ls)*Fu(N,wt),xt=ry(g,ho,co,2,N,sn,ua,Math.abs(Ni[0]),rf,ki,zi,ce?0:this.viewRotation_);e:if(xt){const Gt=[];let St,on,ln,Le,Ve;if(z)for(St=0,on=xt.length;St<on;++St){Ve=xt[St],ln=Ve[4],Le=this.createLabel(ln,k,"",z),C=Ve[2]+(Ni[0]<0?-rs:rs),w=ns*Le.height+(.5-ns)*2*rs*Ni[1]/Ni[0]-is;const an=this.calculateImageOrLabelDimensions_(Le.width,Le.height,Ve[0],Ve[1],Le.width,Le.height,C,w,0,0,Ve[3],go,!1,$i,!1,ee);if(c&&S==="declutter"&&c.collides(an.declutterBox))break e;Gt.push([e,t,Le,an,1,null,null])}if(te)for(St=0,on=xt.length;St<on;++St){Ve=xt[St],ln=Ve[4],Le=this.createLabel(ln,k,te,""),C=Ve[2],w=ns*Le.height-is;const an=this.calculateImageOrLabelDimensions_(Le.width,Le.height,Ve[0],Ve[1],Le.width,Le.height,C,w,0,0,Ve[3],go,!1,$i,!1,ee);if(c&&S==="declutter"&&c.collides(an.declutterBox))break e;Gt.push([e,t,Le,an,1,null,null])}c&&S!=="none"&&c.load(Gt.map(yf));for(let an=0,ha=Gt.length;an<ha;++an)this.replayImageOrLabel_.apply(this,Gt[an])}}++p;break;case Q.END_GEOMETRY:if(a!==void 0){ee=X[1];const wt=a(ee,je,S);if(wt)return wt}++p;break;case Q.FILL:Ie?H++:this.fill_(e),++p;break;case Q.MOVE_TO_LINE_TO:for(x=X[1],v=X[2],se=g[x],Ee=g[x+1],e.moveTo(se,Ee),R=se+.5|0,P=Ee+.5|0,x+=2;x<v;x+=2)se=g[x],Ee=g[x+1],L=se+.5|0,M=Ee+.5|0,(x==v-2||L!==R||M!==P)&&(e.lineTo(se,Ee),R=L,P=M);++p;break;case Q.SET_FILL_STYLE:$=X,this.alignAndScaleFill_=X[2],H&&(this.fill_(e),H=0,b&&(e.stroke(),b=0)),e.fillStyle=X[1],++p;break;case Q.SET_STROKE_STYLE:j=X,b&&(e.stroke(),b=0),this.setStrokeStyle_(e,X),++p;break;case Q.STROKE:Ie?b++:e.stroke(),++p;break;default:++p;break}}H&&this.fill_(e),b&&e.stroke()}execute(e,t,n,i,l,a){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,l,void 0,void 0,a)}executeHitDetection(e,t,n,i,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,l)}}const Xr=["Polygon","Circle","LineString","Image","Text","Default"],kg=["Image","Text"],ly=Xr.filter(r=>!kg.includes(r));class ay{constructor(e,t,n,i,l,a,u){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=yn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,u)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const l=e[n];for(const a in l){const u=l[a];i[a]=new oy(this.resolution_,this.pixelRatio_,this.overlaps_,u,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let i=0,l=e.length;i<l;++i)if(e[i]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,i,l,a){i=Math.round(i);const u=i*2+1,c=ni(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),m=!this.hitDetectionContext_;m&&(this.hitDetectionContext_=Ye(u,u,void 0,{willReadFrequently:!0}));const g=this.hitDetectionContext_;g.canvas.width!==u||g.canvas.height!==u?(g.canvas.width=u,g.canvas.height=u):m||g.clearRect(0,0,u,u);let p;this.renderBuffer_!==void 0&&(p=rn(),zs(p,e),hh(p,t*(this.renderBuffer_+i),p));const y=uy(i);let x;function v(M,G,N){const k=g.getImageData(0,0,u,u).data;for(let z=0,te=y.length;z<te;z++)if(k[y[z]]>0){if(!a||N==="none"||x!=="Image"&&x!=="Text"||a.includes(M)){const H=(y[z]-3)/4,b=i-H%u,$=i-(H/u|0),j=l(M,G,b*b+$*$);if(j)return j}g.clearRect(0,0,u,u);break}}const C=Object.keys(this.executorsByZIndex_).map(Number);C.sort(Jn);let w,S,R,P,L;for(w=C.length-1;w>=0;--w){const M=C[w].toString();for(R=this.executorsByZIndex_[M],S=Xr.length-1;S>=0;--S)if(x=Xr[S],P=R[x],P!==void 0&&(L=P.executeHitDetection(g,c,n,v,p),L))return L}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],i=t[1],l=t[2],a=t[3],u=[n,i,n,a,l,a,l,i];return Ti(u,0,8,2,e,u),u}isEmpty(){return ir(this.executorsByZIndex_)}execute(e,t,n,i,l,a,u){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(Jn),a=a||Xr;const m=Xr.length;let g,p,y,x,v;for(u&&c.reverse(),g=0,p=c.length;g<p;++g){const C=c[g].toString();for(v=this.executorsByZIndex_[C],y=0,x=a.length;y<x;++y){const w=a[y],S=v[w];if(S!==void 0){const R=u===null?void 0:S.getZIndexContext(),P=R?R.getContext():e,L=this.maxExtent_&&w!=="Image"&&w!=="Text";if(L&&(P.save(),this.clip(P,n)),!R||w==="Text"||w==="Image"?S.execute(P,t,n,i,l,u):R.pushFunction(M=>S.execute(M,t,n,i,l,u)),L&&P.restore(),R){R.offset();const M=c[g]*m+y;this.deferredZIndexContexts_[M]||(this.deferredZIndexContexts_[M]=[]),this.deferredZIndexContexts_[M].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Jn);for(let n=0,i=t.length;n<i;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const Du={};function uy(r){if(Du[r]!==void 0)return Du[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let a=0;a<=r;++a){const u=l*l+a*a;if(u>t)break;let c=n[u];c||(c=[],n[u]=c),c.push(((r+l)*e+(r+a))*4+3),l>0&&c.push(((r-l)*e+(r+a))*4+3),a>0&&(c.push(((r+l)*e+(r-a))*4+3),l>0&&c.push(((r-l)*e+(r-a))*4+3))}const i=[];for(let l=0,a=n.length;l<a;++l)n[l]&&i.push(...n[l]);return Du[r]=i,i}class hy extends Mg{constructor(e,t,n,i,l,a,u){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=i,this.transformRotation_=i?lh(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=a,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=yn()}drawImages_(e,t,n,i){if(!this.image_)return;const l=Ti(e,t,n,i,this.transform_,this.pixelCoordinates_),a=this.context_,u=this.tmpLocalTransform_,c=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=c*this.imageOpacity_);let m=this.imageRotation_;this.transformRotation_===0&&(m-=this.viewRotation_),this.imageRotateWithView_&&(m+=this.viewRotation_);for(let g=0,p=l.length;g<p;g+=2){const y=l[g]-this.imageAnchorX_,x=l[g+1]-this.imageAnchorY_;if(m!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=y+this.imageAnchorX_,C=x+this.imageAnchorY_;ni(u,v,C,1,1,m,-v,-C),a.save(),a.transform.apply(a,u),a.translate(v,C),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=c)}drawText_(e,t,n,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Ti(e,t,n,i,this.transform_,this.pixelCoordinates_),a=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);t<n;t+=i){const c=l[t]+this.textOffsetX_,m=l[t+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(c-this.textOffsetX_,m-this.textOffsetY_),a.rotate(u),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,c,m),this.textFillState_&&a.fillText(this.text_,c,m))}}moveToLineTo_(e,t,n,i,l){const a=this.context_,u=Ti(e,t,n,i,this.transform_,this.pixelCoordinates_);a.moveTo(u[0],u[1]);let c=u.length;l&&(c-=2);for(let m=2;m<c;m+=2)a.lineTo(u[m],u[m+1]);return l&&a.closePath(),n}drawRings_(e,t,n,i){for(let l=0,a=n.length;l<a;++l)t=this.moveToLineTo_(e,t,n[l],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Dt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=dp(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],i=t[3]-t[1],l=Math.sqrt(n*n+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,i=t.length;n<i;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Dt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Dt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();let l=0;const a=e.getEnds(),u=e.getStride();n.beginPath();for(let c=0,m=a.length;c<m;++c)l=this.moveToLineTo_(i,l,a[c],u,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Dt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Dt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let i=0;const l=e.getEndss(),a=e.getStride();t.beginPath();for(let u=0,c=l.length;u<c;++u){const m=l[u];i=this.drawRings_(n,i,m,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Oi(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,i=e.textAlign?e.textAlign:bs;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=i&&(n.textAlign=i,t.textAlign=i),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Fn(n||At)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),i=t.getLineCap(),l=t.getLineDash(),a=t.getLineDashOffset(),u=t.getLineJoin(),c=t.getWidth(),m=t.getMiterLimit(),g=l||$n;this.strokeState_={lineCap:i!==void 0?i:br,lineDash:this.pixelRatio_===1?g:g.map(p=>p*this.pixelRatio_),lineDashOffset:(a||ei)*this.pixelRatio_,lineJoin:u!==void 0?u:Hr,lineWidth:(c!==void 0?c:Hs)*this.pixelRatio_,miterLimit:m!==void 0?m:Zs,strokeStyle:Fn(n||Vs)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Fn(x||At)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const x=n.getColor(),v=n.getLineCap(),C=n.getLineDash(),w=n.getLineDashOffset(),S=n.getLineJoin(),R=n.getWidth(),P=n.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:br,lineDash:C||$n,lineDashOffset:w||ei,lineJoin:S!==void 0?S:Hr,lineWidth:R!==void 0?R:Hs,miterLimit:P!==void 0?P:Zs,strokeStyle:Fn(x||Vs)}}const i=e.getFont(),l=e.getOffsetX(),a=e.getOffsetY(),u=e.getRotateWithView(),c=e.getRotation(),m=e.getScaleArray(),g=e.getText(),p=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:i!==void 0?i:xg,textAlign:p!==void 0?p:bs,textBaseline:y!==void 0?y:Il},this.text_=g!==void 0?Array.isArray(g)?g.reduce((x,v,C)=>x+=C%2?" ":v,""):g:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*m[0],this.pixelRatio_*m[1]]}}}const An=.5;function cy(r,e,t,n,i,l,a,u,c){const m=i,g=r[0]*An,p=r[1]*An,y=Ye(g,p);y.imageSmoothingEnabled=!1;const x=y.canvas,v=new hy(y,An,i,null,a,u,null),C=t.length,w=Math.floor((256*256*256-1)/C),S={};for(let P=1;P<=C;++P){const L=t[P-1],M=L.getStyleFunction()||n;if(!M)continue;let G=M(L,l);if(!G)continue;Array.isArray(G)||(G=[G]);const k=(P*w).toString(16).padStart(7,"#00000");for(let z=0,te=G.length;z<te;++z){const H=G[z],b=H.getGeometryFunction()(L);if(!b||!Dt(m,b.getExtent()))continue;const $=H.clone(),j=$.getFill();j&&j.setColor(k);const q=$.getStroke();q&&(q.setColor(k),q.setLineDash(null)),$.setText(void 0);const Y=H.getImage();if(Y){const ee=Y.getImageSize();if(!ee)continue;const se=Ye(ee[0],ee[1],void 0,{alpha:!1}),Ee=se.canvas;se.fillStyle=k,se.fillRect(0,0,Ee.width,Ee.height),$.setImage(new ta({img:Ee,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}const ce=$.getZIndex()||0;let de=S[ce];de||(de={},S[ce]=de,de.Polygon=[],de.Circle=[],de.LineString=[],de.Point=[]);const Ie=b.getType();if(Ie==="GeometryCollection"){const ee=b.getGeometriesArrayRecursive();for(let se=0,Ee=ee.length;se<Ee;++se){const je=ee[se];de[je.getType().replace("Multi","")].push(je,$)}}else de[Ie.replace("Multi","")].push(b,$)}}const R=Object.keys(S).map(Number).sort(Jn);for(let P=0,L=R.length;P<L;++P){const M=S[R[P]];for(const G in M){const N=M[G];for(let k=0,z=N.length;k<z;k+=2){v.setStyle(N[k+1]);for(let te=0,H=e.length;te<H;++te)v.setTransform(e[te]),v.drawGeometry(N[k])}}}return y.getImageData(0,0,x.width,x.height)}function dy(r,e,t){const n=[];if(t){const i=Math.floor(Math.round(r[0])*An),l=Math.floor(Math.round(r[1])*An),a=(Ge(i,0,t.width-1)+Ge(l,0,t.height-1)*t.width)*4,u=t.data[a],c=t.data[a+1],g=t.data[a+2]+256*(c+256*u),p=Math.floor((256*256*256-1)/e.length);g&&g%p===0&&n.push(e[g/p-1])}return n}const fy=.5,Ng={Point:vy,LineString:yy,Polygon:wy,MultiPoint:Cy,MultiLineString:xy,MultiPolygon:Ey,GeometryCollection:py,Circle:my};function gy(r,e){return parseInt(we(r),10)-parseInt(we(e),10)}function Ef(r,e){const t=zg(r,e);return t*t}function zg(r,e){return fy*r/e}function my(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(l||a){const c=r.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(l,a),c.drawCircle(e,n,i)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n)}}function vf(r,e,t,n,i,l,a,u){const c=[],m=t.getImage();if(m){let y=!0;const x=m.getImageState();x==he.LOADED||x==he.ERROR?y=!1:x==he.IDLE&&m.load(),y&&c.push(m.ready())}const g=t.getFill();g&&g.loading()&&c.push(g.ready());const p=c.length>0;return p&&Promise.all(c).then(()=>i(null)),_y(r,e,t,n,l,a,u),p}function _y(r,e,t,n,i,l,a){const u=t.getGeometryFunction()(e);if(!u)return;const c=u.simplifyTransformed(n,i);if(t.getRenderer())Gg(r,c,t,e,a);else{const g=Ng[c.getType()];g(r,c,t,e,a,l)}}function Gg(r,e,t,n,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let u=0,c=a.length;u<c;++u)Gg(r,a[u],t,n,i);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),i)}function py(r,e,t,n,i,l){const a=e.getGeometriesArray();let u,c;for(u=0,c=a.length;u<c;++u){const m=Ng[a[u].getType()];m(r,a[u],t,n,i,l)}}function yy(r,e,t,n,i){const l=t.getStroke();if(l){const u=r.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawLineString(e,n,i)}const a=t.getText();if(a&&a.getText()){const u=r.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,i)}}function xy(r,e,t,n,i){const l=t.getStroke();if(l){const u=r.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,l),u.drawMultiLineString(e,n,i)}const a=t.getText();if(a&&a.getText()){const u=r.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a),u.drawText(e,n,i)}}function Ey(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(a||l){const c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(l,a),c.drawMultiPolygon(e,n,i)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,i)}}function vy(r,e,t,n,i,l){const a=t.getImage(),u=t.getText(),c=u&&u.getText(),m=l&&a&&c?{}:void 0;if(a){if(a.getImageState()!=he.LOADED)return;const g=r.getBuilder(t.getZIndex(),"Image");g.setImageStyle(a,m),g.drawPoint(e,n,i)}if(c){const g=r.getBuilder(t.getZIndex(),"Text");g.setTextStyle(u,m),g.drawText(e,n,i)}}function Cy(r,e,t,n,i,l){const a=t.getImage(),u=a&&a.getOpacity()!==0,c=t.getText(),m=c&&c.getText(),g=l&&u&&m?{}:void 0;if(u){if(a.getImageState()!=he.LOADED)return;const p=r.getBuilder(t.getZIndex(),"Image");p.setImageStyle(a,g),p.drawMultiPoint(e,n,i)}if(m){const p=r.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,g),p.drawText(e,n,i)}}function wy(r,e,t,n,i){const l=t.getFill(),a=t.getStroke();if(l||a){const c=r.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(l,a),c.drawPolygon(e,n,i)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,i)}}class Sy extends Fg{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=rn(),this.wrappedRenderedExtent_=rn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const i=t.extent,l=t.viewState,a=l.center,u=l.resolution,c=l.projection,m=l.rotation,g=c.getExtent(),p=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,v=t.viewHints,C=!(v[pt.ANIMATING]||v[pt.INTERACTING]),w=this.context,S=Math.round(Ce(i)/u*x),R=Math.round(yt(i)/u*x),P=p.getWrapX()&&c.canWrapX(),L=P?Ce(g):null,M=P?Math.ceil((i[2]-g[2])/L)+1:1;let G=P?Math.floor((i[0]-g[0])/L):0;do{let N=this.getRenderTransform(a,u,0,x,S,R,G*L);t.declutter&&(N=N.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],N,m,C,n===void 0?Xr:n?kg:ly,n?y&&t.declutter[y]:void 0)}while(++G<M)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ye(this.context.canvas.width,this.context.canvas.height,pf))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Vr(this.context),pf.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const i=e.viewState;this.prepareContainer(e,t);const l=this.context,a=this.replayGroup_;let u=a&&!a.isEmpty();if(!u&&!(this.getLayer().hasListener(nn.PRERENDER)||this.getLayer().hasListener(nn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),i.projection,this.clipped_=!1,u&&n.extent&&this.clipping){const c=Si(n.extent);u=Dt(c,e.extent),this.clipped_=u&&!Qi(c,e.extent),this.clipped_&&this.clipUnrotated(l,e,c)}return u&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),i=this.renderedCenter_,l=this.renderedResolution_,a=this.renderedRotation_,u=this.renderedProjection_,c=this.wrappedRenderedExtent_,m=this.getLayer(),g=[],p=n[0]*An,y=n[1]*An;g.push(this.getRenderTransform(i,l,a,An,p,y,0).slice());const x=m.getSource(),v=u.getExtent();if(x.getWrapX()&&u.canWrapX()&&!Qi(v,c)){let C=c[0];const w=Ce(v);let S=0,R;for(;C<v[0];)--S,R=w*S,g.push(this.getRenderTransform(i,l,a,An,p,y,R).slice()),C+=w;for(S=0,C=c[2];C>v[2];)++S,R=w*S,g.push(this.getRenderTransform(i,l,a,An,p,y,R).slice()),C-=w}this.hitDetectionImageData_=cy(n,g,this.renderedFeatures_,m.getStyleFunction(),c,l,a,Ef(l,this.renderedPixelRatio_))}t(dy(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,i,l){if(!this.replayGroup_)return;const a=t.viewState.resolution,u=t.viewState.rotation,c=this.getLayer(),m={},g=function(v,C,w){const S=we(v),R=m[S];if(R){if(R!==!0&&w<R.distanceSq){if(w===0)return m[S]=!0,l.splice(l.lastIndexOf(R),1),i(v,c,C);R.geometry=C,R.distanceSq=w}}else{if(w===0)return m[S]=!0,i(v,c,C);l.push(m[S]={feature:v,layer:c,geometry:C,distanceSq:w,callback:i})}};let p;const y=[this.replayGroup_],x=this.getLayer().getDeclutter();return y.some(v=>p=v.forEachFeatureAtCoordinate(e,a,u,n,g,x&&t.declutter[x]?t.declutter[x].all().map(C=>C.value):null)),p}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const i=e.viewHints[pt.ANIMATING],l=e.viewHints[pt.INTERACTING],a=t.getUpdateWhileAnimating(),u=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!u&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,m=e.viewState,g=m.projection,p=m.resolution,y=e.pixelRatio,x=t.getRevision(),v=t.getRenderBuffer();let C=t.getRenderOrder();C===void 0&&(C=gy);const w=m.center.slice(),S=hh(c,v*p),R=S.slice(),P=[S.slice()],L=g.getExtent();if(n.getWrapX()&&g.canWrapX()&&!Qi(L,e.extent)){const j=Ce(L),q=Math.max(Ce(S)/2,j);S[0]=L[0]-q,S[2]=L[2]+q,Kf(w,g);const Y=Bf(P[0],g);Y[0]<L[0]&&Y[2]<L[2]?P.push([Y[0]+j,Y[1],Y[2]+j,Y[3]]):Y[0]>L[0]&&Y[2]>L[2]&&P.push([Y[0]-j,Y[1],Y[2]-j,Y[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==x&&this.renderedRenderOrder_==C&&this.renderedFrameDeclutter_===!!e.declutter&&Qi(this.wrappedRenderedExtent_,S))return Oi(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new ey(zg(p,y),S,p,y);let G;for(let j=0,q=P.length;j<q;++j)n.loadFeatures(P[j],p,g);const N=Ef(p,y);let k=!0;const z=(j,q)=>{let Y;const ce=j.getStyleFunction()||t.getStyleFunction();if(ce&&(Y=ce(j,p)),Y){const de=this.renderFeature(j,N,Y,M,G,this.getLayer().getDeclutter(),q);k=k&&!de}},te=bf(S),H=n.getFeaturesInExtent(te);C&&H.sort(C);for(let j=0,q=H.length;j<q;++j)z(H[j],j);this.renderedFeatures_=H,this.ready=k;const b=M.finish(),$=new ay(S,p,y,n.getOverlaps(),b,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=p,this.renderedRevision_=x,this.renderedRenderOrder_=C,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=S,this.renderedCenter_=w,this.renderedProjection_=g,this.renderedPixelRatio_=y,this.replayGroup_=$,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,i,l,a,u){if(!n)return!1;let c=!1;if(Array.isArray(n))for(let m=0,g=n.length;m<g;++m)c=vf(i,e,n[m],t,this.boundHandleStyleImageChange_,l,a,u)||c;else c=vf(i,e,n,t,this.boundHandleStyleImageChange_,l,a,u);return c}}class Ry extends Lg{constructor(e){super(e)}createRenderer(){return new Sy(this)}}const lo="data-source",Xh="popup";function Iy(r){const e=Ry;return Qn.createElement(lo,{...r,layerConstructor:e})}const Ft={ADD:"add",REMOVE:"remove"},Cf={LENGTH:"length"};class _l extends ii{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Dn extends En{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Cf.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new _l(Ft.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,i=t.length;n<i;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new _l(Ft.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new _l(Ft.REMOVE,i,e)),this.dispatchEvent(new _l(Ft.ADD,t,e))}updateLength_(){this.set(Cf.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}class ra extends En{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new ra(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Re(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=me(e,re.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Ty(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Ty(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(xe(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}function Al(r,e,t,n,i,l,a){let u,c;const m=(t-e)/n;if(m===1)u=e;else if(m===2)u=e,c=i;else if(m!==0){let g=r[e],p=r[e+1],y=0;const x=[0];for(let w=e+n;w<t;w+=n){const S=r[w],R=r[w+1];y+=Math.sqrt((S-g)*(S-g)+(R-p)*(R-p)),x.push(y),g=S,p=R}const v=i*y,C=v_(x,v);C<0?(c=(v-x[-C-2])/(x[-C-1]-x[-C-2]),u=e+(-C-2)*n):u=e+C*n}a=a>1?a:2,l=l||new Array(a);for(let g=0;g<a;++g)l[g]=u===void 0?NaN:c===void 0?r[u+g]:Yt(r[u+g],r[u+n+g],c);return l}function eh(r,e,t,n,i,l){if(t==e)return null;let a;if(i<r[e+n-1])return l?(a=r.slice(e,e+n),a[n-1]=i,a):null;if(r[t-1]<i)return l?(a=r.slice(t-n,t),a[n-1]=i,a):null;if(i==r[e+n-1])return r.slice(e,e+n);let u=e/n,c=t/n;for(;u<c;){const y=u+c>>1;i<r[(y+1)*n-1]?c=y:u=y+1}const m=r[u*n-1];if(i==m)return r.slice((u-1)*n,(u-1)*n+n);const g=r[(u+1)*n-1],p=(i-m)/(g-m);a=[];for(let y=0;y<n-1;++y)a.push(Yt(r[(u-1)*n+y],r[u*n+y],p));return a.push(i),a}function Py(r,e,t,n,i,l,a){if(a)return eh(r,e,t[t.length-1],n,i,l);let u;if(i<r[n-1])return l?(u=r.slice(0,n),u[n-1]=i,u):null;if(r[r.length-1]<i)return l?(u=r.slice(r.length-n),u[n-1]=i,u):null;for(let c=0,m=t.length;c<m;++c){const g=t[c];if(e!=g){if(i<r[e+n-1])return null;if(i<=r[g-1])return eh(r,e,g,n,i,!1);e=g}}return null}class qr extends lr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){kn(this.flatCoordinates,e),this.changed()}clone(){const e=new qr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<sr(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,i))}forEachSegment(e){return rg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,eh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Al(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Dg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Vl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new qr(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return bl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zl(this.flatCoordinates,0,e,this.stride),this.changed()}}class wf{constructor(e){this.rbush_=new ug(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[we(t)]=n}load(e,t){const n=new Array(t.length);for(let i=0,l=t.length;i<l;i++){const a=e[i],u=t[i],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:u};n[i]=c,this.items_[we(u)]=c}this.rbush_.load(n)}remove(e){const t=we(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[we(t)],i=[n.minX,n.minY,n.maxX,n.maxY];Ws(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let i=0,l=e.length;i<l;i++)if(n=t(e[i]),n)return n;return n}isEmpty(){return ir(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Pi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ol extends Jf{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Re),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(me(e[t],re.CHANGE,this.changed,this))}clone(){const e=new Ol(ku(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<sr(this.getExtent(),e,t))return i;const l=this.geometries_;for(let a=0,u=l.length;a<u;++a)i=l[a].closestPointXY(e,t,n,i);return i}containsXY(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)if(n[i].containsXY(e,t))return!0;return!1}computeExtent(e){no(e);const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)Yf(e,t[n].getExtent());return e}getGeometries(){return ku(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let i=!1;for(let l=0,a=n.length;l<a;++l){const u=n[l],c=u.getSimplifiedGeometry(e);t.push(c),c!==u&&(i=!0)}return i?new Ol(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Li(this.getExtent()));const i=this.geometries_;for(let l=0,a=i.length;l<a;++l)i[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(ku(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,i=t.length;n<i;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let i=0,l=n.length;i<l;++i)n[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ku(r){return r.map(e=>e.clone())}class Fl extends lr{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const i=e,l=[],a=[];for(let c=0,m=i.length;c<m;++c){const g=i[c];kn(l,g.getFlatCoordinates()),a.push(l.length)}const u=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(u,l),this.ends_=a}}appendLineString(e){kn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,i){return i<sr(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ch(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,i))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,Py(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return js(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new qr(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,i=[];let l=0;for(let a=0,u=t.length;a<u;++a){const c=t[a],m=new qr(e.slice(l,c),n);i.push(m),l=c}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const i=this.ends_,l=this.stride;for(let a=0,u=i.length;a<u;++a){const c=i[a],m=Al(t,n,c,l,.5);kn(e,m),n=c}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=eg(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new Fl(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return vp(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=io(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class sa extends lr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){kn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new sa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,i){if(i<sr(this.getExtent(),e,t))return i;const l=this.flatCoordinates,a=this.stride;for(let u=0,c=l.length;u<c;u+=a){const m=tr(e,t,l[u],l[u+1]);if(m<i){i=m;for(let g=0;g<a;++g)n[g]=l[u+g];n.length=a}}return i}getCoordinates(){return Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Zr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,i=[];for(let l=0,a=e.length;l<a;l+=n){const u=new Zr(e.slice(l,l+n),t);i.push(u)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let i=0,l=t.length;i<l;i+=n){const a=t[i],u=t[i+1];if(ch(e,a,u))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zl(this.flatCoordinates,0,e,this.stride),this.changed()}}function Wg(r,e,t,n){const i=[];let l=rn();for(let a=0,u=t.length;a<u;++a){const c=t[a];l=dh(r,e,c[0],n),i.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=c[c.length-1]}return i}class Dl extends lr{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const i=e,l=[],a=[];for(let u=0,c=i.length;u<c;++u){const m=i[u],g=l.length,p=m.getEnds();for(let y=0,x=p.length;y<x;++y)p[y]+=g;kn(l,m.getFlatCoordinates()),a.push(p)}t=i.length===0?this.getLayout():i[0].getLayout(),e=l,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;kn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,l=t.length;i<l;++i)t[i]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const n=new Dl(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,i){return i<sr(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fp(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,i))}containsXY(e,t){return Ep(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return yp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Hu(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,bu(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Wg(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ig(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new sa(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;lg(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Hu(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=pp(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new Dl(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),i=n[n.length-1];if(t!==0)for(let l=0,a=n.length;l<a;++l)n[l]-=t;return new Mi(this.flatCoordinates.slice(t,i),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,i=[];let l=0;for(let a=0,u=n.length;a<u;++a){const c=n[a].slice(),m=c[c.length-1];if(l!==0)for(let p=0,y=c.length;p<y;++p)c[p]-=l;const g=new Mi(t.slice(l,m),e,c);i.push(g),l=m}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return Cp(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=$f(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const i=n[n.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const Sf=yn();class jt{constructor(e,t,n,i,l,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Xf(this.flatCoordinates_):dh(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Li(this.getExtent());this.flatInteriorPoints_=Th(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Sp(this.flatCoordinates_,this.ends_),t=Wg(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=ig(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Al(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let i=0,l=n.length;i<l;++i){const a=n[i],u=Al(e,t,a,2,.5);kn(this.flatMidpoints_,u),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ze(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const i=yt(n)/yt(t);ni(Sf,n[0],n[3],i,-i,0,0,0),Ti(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Sf,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new jt(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Nf((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Vl(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=eg(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,i);break;case"Polygon":i=[],n.length=Rh(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,i);break}return i&&(this.simplifiedGeometry_=new jt(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}jt.prototype.getFlatCoordinates=jt.prototype.getOrientedFlatCoordinates;class Xg extends En{constructor(e){super(),this.projection=Ze(e.projection),this.attributions_=Rf(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,i){t.viewResolver=n,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Rf(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Rf(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const tn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Ly(r,e){return[[-1/0,-1/0,1/0,1/0]]}let My=!1;function Ay(r,e,t,n,i,l,a){const u=new XMLHttpRequest;u.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=My,u.onload=function(c){if(!u.status||u.status>=200&&u.status<300){const m=e.getType();try{let g;m=="text"||m=="json"?g=u.responseText:m=="xml"?g=u.responseXML||u.responseText:m=="arraybuffer"&&(g=u.response),g?l(e.readFeatures(g,{extent:t,featureProjection:i}),e.readProjection(g)):a()}catch{a()}}else a()},u.onerror=a,u.send()}function If(r,e){return function(t,n,i,l,a){const u=this;Ay(r,e,t,n,i,function(c,m){u.addFeatures(c),l!==void 0&&l(c)},a||Br)}}class Ei extends ii{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Oy extends Xg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Br,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(xe(this.format_,"`format` must be set when `url` is set"),this.loader_=If(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Ly;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new wf:null,this.loadedExtentsRtree_=new wf,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,i;Array.isArray(e.features)?i=e.features:e.features&&(n=e.features,i=n.getArray()),!t&&n===void 0&&(n=new Dn(i)),i!==void 0&&this.addFeaturesInternal(i),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=we(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Ei(tn.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof jt||(this.featureChangeKeys_[e]=[me(t,re.CHANGE,this.handleFeatureChange_,this),me(t,Ur.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof jt){const l=this.idIndex_[i];l instanceof jt?Array.isArray(l)?l.push(t):this.idIndex_[i]=[l,t]:n=!1}else n=!1}return n&&(xe(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],i=[];for(let l=0,a=e.length;l<a;l++){const u=e[l],c=we(u);this.addToIndex_(c,u)&&n.push(u)}for(let l=0,a=n.length;l<a;l++){const u=n[l],c=we(u);this.setupChangeEvents_(c,u);const m=u.getGeometry();if(m){const g=m.getExtent();t.push(g),i.push(u)}else this.nullGeometryFeatures_[c]=u}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(tn.ADDFEATURE))for(let l=0,a=n.length;l<a;l++)this.dispatchEvent(new Ei(tn.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(tn.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(tn.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Ft.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Ft.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Re);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(n);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Ei(tn.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(i){const l=i.getGeometry();if(l instanceof jt||l.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const i=n.getGeometry();if(i instanceof jt||i.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ir(this.nullGeometryFeatures_)||kn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=fh(e,t);return[].concat(...i.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],i=e[1];let l=null;const a=[NaN,NaN];let u=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||Gs,this.featuresRtree_.forEachInExtent(c,function(m){if(t(m)){const g=m.getGeometry(),p=u;if(u=g instanceof jt?0:g.closestPointXY(n,i,a,u),u<p){l=m;const y=Math.sqrt(u);c[0]=n-y,c[1]=i-y,c[2]=n+y,c[3]=i+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=we(t),i=t.getGeometry();if(!i)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const l=t.getId();if(l!==void 0){const a=l.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Ei(tn.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:we(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ir(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const i=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let a=0,u=l.length;a<u;++a){const c=l[a];i.forEachInExtent(c,function(g){return Qi(g.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ei(tn.FEATURESLOADSTART)),this.loader_.call(this,c,t,n,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ei(tn.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ei(tn.FEATURESLOADERROR))}),i.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(i){if(Ws(i.extent,e))return n=i,!0}),n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,i=e.length;n<i;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=we(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Re),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const l=i.toString(),a=this.idIndex_[l];a===e?delete this.idIndex_[l]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[l]=a[0]))}return delete this.uidIndex_[t],this.hasListener(tn.REMOVEFEATURE)&&this.dispatchEvent(new Ei(tn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){xe(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(If(e,this.format_))}}const K={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Yh extends Yl{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(re.CHANGE)}release(){this.state===K.ERROR&&this.setState(K.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==K.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ie()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const i=t-n+1e3/60;return i>=this.transition_?1:Hf(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Yg extends Yh{constructor(e,t,n,i,l,a){super(e,t,a),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=K.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=K.ERROR,this.unlistenImage_(),this.image_=Fy(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=K.LOADED:this.state=K.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==K.ERROR&&(this.state=K.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==K.IDLE&&(this.state=K.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bp(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Fy(){const r=Ye(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class Dy{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const i=this.points_[t+2]-this.points_[n+2];if(i<1e3/60)return!1;const l=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class ky extends Wl{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ie()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;ni(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),qf(i,n)}forEachFeatureAtCoordinate(e,t,n,i,l,a,u,c){let m;const g=t.viewState;function p(L,M,G,N){return l.call(a,M,L?G:null,N)}const y=g.projection,x=Kf(e.slice(),y),v=[[0,0]];if(y.canWrapX()&&i){const L=y.getExtent(),M=Ce(L);v.push([-M,0],[M,0])}const C=t.layerStatesArray,w=C.length,S=[],R=[];for(let L=0;L<v.length;L++)for(let M=w-1;M>=0;--M){const G=C[M],N=G.layer;if(N.hasRenderer()&&Mh(G,g)&&u.call(c,N)){const k=N.getRenderer(),z=N.getSource();if(k&&z){const te=z.getWrapX()?x:e,H=p.bind(null,G.managed);R[0]=te[0]+v[L][0],R[1]=te[1]+v[L][1],m=k.forEachFeatureAtCoordinate(R,t,n,H,S)}if(m)return m}}if(S.length===0)return;const P=1/S.length;return S.forEach((L,M)=>L.distanceSq+=M*P),S.sort((L,M)=>L.distanceSq-M.distanceSq),S.some(L=>m=L.callback(L.feature,L.layer,L.geometry)),m}hasFeatureAtCoordinate(e,t,n,i,l,a){return this.forEachFeatureAtCoordinate(e,t,n,i,Gs,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){ie()}scheduleExpireIconCache(e){On.canExpireCache()&&e.postRenderFunctions.push(Ny)}}function Ny(r,e){On.expire()}class zy extends ky{constructor(e){super(e),this.fontChangeListenerKey_=me(bn,Ur.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ql+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const i=new Ag(e,void 0,t);n.dispatchEvent(i)}}disposeInternal(){Re(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(nn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,c)=>u.zIndex-c.zIndex);t.some(u=>u.layer instanceof Lg&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const l=[];let a=null;for(let u=0,c=t.length;u<c;++u){const m=t[u];e.layerIndex=u;const g=m.layer,p=g.getSourceState();if(!Mh(m,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const y=g.render(e,a);y&&(y!==a&&(this.children_.push(y),a=y),l.push(m))}this.declutter(e,l),Vp(this.element_,this.children_),this.dispatchRenderEvent(nn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const i=t[n],l=i.layer;l.getDeclutter()&&l.renderDeclutter(e,i)}t.forEach(n=>n.layer.renderDeferred(e))}}}class wi extends ii{constructor(e,t){super(e),this.layer=t}}const Nu={LAYERS:"layers"};class Jr extends zf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Nu.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Dn(n.slice(),{unique:!0}):xe(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Dn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Re),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(me(e,Ft.ADD,this.handleLayersAdd_,this),me(e,Ft.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Re);$s(this.listenerKeys_);const t=e.getArray();for(let n=0,i=t.length;n<i;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new wi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[me(e,Ur.PROPERTYCHANGE,this.handleLayerChange_,this),me(e,re.CHANGE,this.handleLayerChange_,this)];e instanceof Jr&&t.push(me(e,"addlayer",this.handleLayerGroupAdd_,this),me(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[we(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new wi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new wi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new wi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=we(t);this.listenerKeys_[n].forEach(Re),delete this.listenerKeys_[n],this.dispatchEvent(new wi("removelayer",t)),this.changed()}getLayers(){return this.get(Nu.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let i=0,l=n.length;i<l;++i)this.dispatchEvent(new wi("removelayer",n[i]))}this.set(Nu.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let l=i.zIndex;!e&&i.zIndex===void 0&&(l=0);for(let a=n,u=t.length;a<u;a++){const c=t[a];c.opacity*=i.opacity,c.visible=c.visible&&i.visible,c.maxResolution=Math.min(c.maxResolution,i.maxResolution),c.minResolution=Math.max(c.minResolution,i.minResolution),c.minZoom=Math.max(c.minZoom,i.minZoom),c.maxZoom=Math.min(c.maxZoom,i.maxZoom),i.extent!==void 0&&(c.extent!==void 0?c.extent=pn(c.extent,i.extent):c.extent=i.extent),c.zIndex===void 0&&(c.zIndex=l)}return t}getSourceState(){return"ready"}}class Gr extends ii{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Ci extends Gr{constructor(e,t,n,i,l,a){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ze={SINGLECLICK:"singleclick",CLICK:re.CLICK,DBLCLICK:re.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},th={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Gy extends Yl{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=me(n,th.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=me(n,th.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_,_g?{passive:!1}:!1)}emulateClick_(e){let t=new Ci(ze.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ci(ze.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Ci(ze.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==ze.POINTERUP||t.type==ze.POINTERCANCEL){delete this.trackedTouches_[n];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==ze.POINTERDOWN||t.type==ze.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ci(ze.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Re),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Ci(ze.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(me(n,ze.POINTERMOVE,this.handlePointerMove_,this),me(n,ze.POINTERUP,this.handlePointerUp_,this),me(this.element_,ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(me(this.element_.getRootNode(),ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ci(ze.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ci(ze.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Re(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Re(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Re),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Hn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},_t={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},kl=1/0;class Wy{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$s(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(e){xe(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=kl?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,i=t.length,l=t[e],a=n[e],u=e;for(;e<i>>1;){const c=this.getLeftChildIndex_(e),m=this.getRightChildIndex_(e),g=m<i&&n[m]<n[c]?m:c;t[e]=t[g],n[e]=n[g],e=g}t[e]=l,n[e]=a,this.siftDown_(u,e)}siftDown_(e,t){const n=this.elements_,i=this.priorities_,l=n[t],a=i[t];for(;t>e;){const u=this.getParentIndex_(t);if(i[u]>a)n[t]=n[u],i[t]=i[u],t=u;else break}n[t]=l,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let i=0;const l=t.length;let a,u,c;for(u=0;u<l;++u)a=t[u],c=e(a),c==kl?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=c,t[i++]=a);t.length=i,n.length=i,this.heapify_()}}class Xy extends Wy{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(re.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===K.LOADED||n===K.ERROR||n===K.EMPTY){n!==K.ERROR&&t.removeEventListener(re.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const i=this.dequeue()[0],l=i.getKey();i.getState()===K.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,i.load())}}}function Yy(r,e,t,n,i){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return kl;const l=r.viewState.center,a=n[0]-l[0],u=n[1]-l[1];return 65536*Math.log(i)+Math.sqrt(a*a+u*u)/i}class jh extends En{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)Re(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Br&&this.listenerKeys.push(me(e,Hn.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class jy extends jh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const u=e.label!==void 0?e.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=i):this.label_=u;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const m=t+" "+Ql+" "+Nh+(this.collapsed_&&this.collapsible_?" "+tf:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=m,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>n.add(i)):n.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(l=>l.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>S_(()=>i))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Oi(t,this.renderedAttributions_)){pg(this.ulElement_);for(let i=0,l=t.length;i<l;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(tf),this.collapsed_?ef(this.collapseLabel_,this.label_):ef(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Uy extends jh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Ql+" "+Nh,c=this.element;c.className=u,c.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(fl)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Qr}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const i="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(fl);!l&&n===0?this.element.classList.add(fl):l&&n!==0&&this.element.classList.remove(fl)}this.label_.style.transform=i}this.rotation_=n}}class By extends jh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",u=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",m=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=i,g.setAttribute("type","button"),g.title=c,g.appendChild(typeof a=="string"?document.createTextNode(a):a),g.addEventListener(re.CLICK,this.handleClick_.bind(this,n),!1);const p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=m,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(re.CLICK,this.handleClick_.bind(this,-n),!1);const y=t+" "+Ql+" "+Nh,x=this.element;x.className=y,x.appendChild(g),x.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const i=n.getZoom();if(i!==void 0){const l=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:Qr})):n.setZoom(l)}}}function Ky(r){r=r||{};const e=new Dn;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new By(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new Uy(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new jy(r.attributionOptions)),e}const Tf={ACTIVE:"active"};class ao extends En{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Tf.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Tf.ACTIVE,e)}setMap(e){this.map_=e}}function Zy(r,e,t){const n=r.getCenterInternal();if(n){const i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:op,center:r.getConstrainedCenter(i)})}}function Uh(r,e,t,n){const i=r.getZoom();if(i===void 0)return;const l=r.getConstrainedZoom(i+e),a=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:Qr})}class Vy extends ao{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==ze.DBLCLICK){const n=e.originalEvent,i=e.map,l=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,u=i.getView();Uh(u,a,l,this.duration_),n.preventDefault(),t=!0}return!t}}class uo extends ao{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ze.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ze.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==ze.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==ze.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Bh(r){const e=r.length;let t=0,n=0;for(let i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return{clientX:t/e,clientY:n/e}}function nh(r){const e=arguments;return function(t){let n=!0;for(let i=0,l=e.length;i<l&&(n=n&&e[i](t),!!n);++i);return n}}const by=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Hy=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},jg=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Hy(r):!0},qy=Gs,Ug=function(r){const e=r.originalEvent;return e.button==0&&!(Bp&&dg&&e.ctrlKey)},Bg=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Qy=function(r){const e=r.originalEvent;return dg?e.metaKey:e.ctrlKey},Jy=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Kg=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},zu=function(r){const e=r.originalEvent;return xe(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},$y=function(r){const e=r.originalEvent;return xe(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class e1 extends uo{constructor(e){super({stopDown:Xl}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:nh(Bg,$y);this.condition_=e.onFocusOnly?nh(jg,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,i=t.getEventPixel(Bh(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const l=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],u=e.map.getView();K_(l,u.getResolution()),gh(l,u.getRotation()),u.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=t.getPixelFromCoordinateInternal(a),c=t.getCoordinateFromPixelInternal([u[0]-i*Math.cos(l),u[1]-i*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:Qr})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class t1 extends uo{constructor(e){e=e||{},super({stopDown:Xl}),this.condition_=e.condition?e.condition:by,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!zu(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Eh)return;const i=t.getSize(),l=e.pixel,a=Math.atan2(i[1]/2-l[1],l[0]-i[0]/2);if(this.lastAngle_!==void 0){const u=a-this.lastAngle_;n.adjustRotationInternal(-u)}this.lastAngle_=a}handleUpEvent(e){return zu(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return zu(e)&&Ug(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class n1 extends Wl{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Mi([i])}getGeometry(){return this.geometry_}}const Ar={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ms extends ii{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class i1 extends uo{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new n1(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Ug,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const i=n[0]-t[0],l=n[1]-t[1];return i*i+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ms(Ar.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Ms(t?Ar.BOXEND:Ar.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ms(Ar.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ms(Ar.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ms(Ar.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class r1 extends i1{constructor(e){e=e||{};const t=e.condition?e.condition:Jy;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let i=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(i),a=n.getResolutionForExtentInternal(l),u=n.getResolution()/a;i=i.clone(),i.scale(u*u)}n.fitInternal(i,{duration:this.duration_,easing:Qr})}}const Hi={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class s1 extends ao{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Bg(t)&&Kg(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==Hi.DOWN||i==Hi.LEFT||i==Hi.RIGHT||i==Hi.UP)){const a=e.map.getView(),u=a.getResolution()*this.pixelDelta_;let c=0,m=0;i==Hi.DOWN?m=-u:i==Hi.LEFT?c=-u:i==Hi.RIGHT?c=u:m=u;const g=[c,m];gh(g,a.getRotation()),Zy(a,g,this.duration_),n.preventDefault(),t=!0}}return!t}}class o1 extends ao{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Qy(t)&&Kg(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN||e.type==re.KEYPRESS){const n=e.originalEvent,i=n.key;if(this.condition_(e)&&(i==="+"||i==="-")){const l=e.map,a=i==="+"?this.delta_:-this.delta_,u=l.getView();Uh(u,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class l1 extends ao{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:qy;this.condition_=e.onFocusOnly?nh(jg,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==re.WHEEL)return!0;const n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==re.WHEEL&&(l=i.deltaY,jp&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=fg),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const u=n.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ge(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Uh(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class a1 extends uo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Xl),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],i=this.targetPointers[1],l=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){const c=l-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=l;const a=e.map,u=a.getView();u.getConstraints().rotation!==Eh&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Bh(this.targetPointers))),this.rotating_&&(a.render(),u.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class u1 extends uo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Xl),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],i=this.targetPointers[1],l=n.clientX-i.clientX,a=n.clientY-i.clientY,u=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/u),this.lastDistance_=u;const c=e.map,m=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(Bh(this.targetPointers))),c.render(),m.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function h1(r){r=r||{};const e=new Dn,t=new Dy(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new t1),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new Vy({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new e1({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new a1),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new u1({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new s1),e.push(new o1({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new l1({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new r1({duration:r.zoomDuration})),e}function Zg(r){if(r instanceof Hl){r.setMapInternal(null);return}r instanceof Jr&&r.getLayers().forEach(Zg)}function Vg(r,e){if(r instanceof Hl){r.setMapInternal(e);return}if(r instanceof Jr){const t=r.getLayers().getArray();for(let n=0,i=t.length;n<i;++n)Vg(t[n],e)}}let oa=class extends En{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=c1(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:fg,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=yn(),this.pixelToCoordinateTransform_=yn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Ky(),this.interactions=t.interactions||h1({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Xy(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(_t.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(_t.VIEW,this.handleViewChanged_),this.addChangeListener(_t.SIZE,this.handleSizeChanged_),this.addChangeListener(_t.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Mn)&&e.view.then(function(i){n.setView(new Mn(i))}),this.controls.addEventListener(Ft.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Ft.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Ft.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Ft.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Ft.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Ft.REMOVE,i=>{const l=i.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Vg(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:Gs,u=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,l,u,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(i){i instanceof Jr?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Gs,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),i=this.getSize(),l=n.width/i[0],a=n.height/i[1],u="changedTouches"in e?e.changedTouches[0]:e;return[(u.clientX-n.left)/l,(u.clientY-n.top)/a]}getTarget(){return this.get(_t.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Vu(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?lt(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(_t.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Dn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t];if(!i.visible)continue;const l=i.layer.getRenderer();if(l&&!l.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Vn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?lt(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(_t.SIZE)}getView(){return this.get(_t.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,i){return Yy(this.frameState_,e,t,n,i)}handleBrowserEvent(e,t){t=t||e.type;const n=new Ci(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===th.POINTERDOWN||n===re.WHEEL||n===re.KEYDOWN){const i=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,u=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===i?i.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!u.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let l=i.length-1;l>=0;l--){const a=i[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,l=i;if(e){const a=e.viewHints;if(a[pt.ANIMATING]||a[pt.INTERACTING]){const u=Date.now()-e.time>8;i=u?0:8,l=u?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(nn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(nn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Gr(Hn.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Gr(Hn.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let i=0,l=n.length;i<l;++i)n[i](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,i=this.targetChangeHandlerKeys_.length;n<i;++n)Re(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(re.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new zy(this)),this.mapBrowserEventHandler_=new Gy(this,this.moveTolerance_);for(const l in ze)this.mapBrowserEventHandler_.addEventListener(ze[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(re.WHEEL,this.boundHandleBrowserEvent_,_g?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[me(n,re.KEYDOWN,this.handleBrowserEvent,this),me(n,re.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Re(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Re(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=me(e,Ur.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=me(e,re.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Re),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new wi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[me(e,Ur.PROPERTYCHANGE,this.render,this),me(e,re.CHANGE,this.render,this),me(e,"addlayer",this.handleLayerAdd_,this),me(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Zg(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),i=this.frameState_;let l=null;if(t!==void 0&&qd(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Ku(u.center,u.resolution,u.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:u,viewHints:a,wantedTiles:{},mapId:we(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;l.nextExtent=Ku(u.nextCenter,u.nextResolution,c,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),i&&(!this.previousExtent_||!Kl(this.previousExtent_)&&!Ws(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Gr(Hn.MOVESTART,this,i)),this.previousExtent_=no(this.previousExtent_)),this.previousExtent_&&!l.viewHints[pt.ANIMATING]&&!l.viewHints[pt.INTERACTING]&&!Ws(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Gr(Hn.MOVEEND,this,l)),Wf(l.extent,this.previousExtent_))),this.dispatchEvent(new Gr(Hn.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Hn.LOADSTART)||this.hasListener(Hn.LOADEND)||this.hasListener(nn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new wi("removelayer",t)),this.set(_t.LAYERGROUP,e)}setSize(e){this.set(_t.SIZE,e)}setTarget(e){this.set(_t.TARGET,e)}setView(e){if(!e||e instanceof Mn){this.set(_t.VIEW,e);return}this.set(_t.VIEW,new Mn);const t=this;e.then(function(n){t.setView(new Mn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),l=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!qd(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Zf("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Oi(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function c1(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Jr({layers:r.layers});t[_t.LAYERGROUP]=n,t[_t.TARGET]=r.target,t[_t.VIEW]=r.view instanceof Mn?r.view:new Mn;let i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Dn(r.controls.slice()):(xe(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Dn(r.interactions.slice()):(xe(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Dn(r.overlays.slice()):(xe(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=r.overlays):a=new Dn,{controls:i,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}const mt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class bg extends En{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+e0,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(mt.ELEMENT,this.handleElementChanged),this.addChangeListener(mt.MAP,this.handleMapChanged),this.addChangeListener(mt.OFFSET,this.handleOffsetChanged),this.addChangeListener(mt.POSITION,this.handlePositionChanged),this.addChangeListener(mt.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(mt.ELEMENT)}getId(){return this.id}getMap(){return this.get(mt.MAP)||null}getOffset(){return this.get(mt.OFFSET)}getPosition(){return this.get(mt.POSITION)}getPositioning(){return this.get(mt.POSITIONING)}handleElementChanged(){pg(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Re(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=me(e,Hn.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(mt.ELEMENT,e)}setMap(e){this.set(mt.MAP,e)}setOffset(e){this.set(mt.OFFSET,e)}setPosition(e){this.set(mt.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(mt.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),l=this.getRect(i,[Kp(i),Zp(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!Qi(n,l)){const u=l[0]-n[0],c=n[2]-l[2],m=l[1]-n[1],g=n[3]-l[3],p=[0,0];if(u<0?p[0]=u-a:c<0&&(p[0]=Math.abs(c)+a),m<0?p[1]=m-a:g<0&&(p[1]=Math.abs(g)+a),p[0]!==0||p[1]!==0){const y=t.getView().getCenterInternal(),x=t.getPixelFromCoordinateInternal(y);if(!x)return;const v=[x[0]+p[0],x[1]+p[1]],C=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:C.duration,easing:C.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,l=n.top+window.pageYOffset;return[i,l,i+t[0],l+t[1]]}setPositioning(e){this.set(mt.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(e,t){const n=this.element.style,i=this.getOffset(),l=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",u=Math.round(e[1]+i[1])+"px";let c="0%",m="0%";l=="bottom-right"||l=="center-right"||l=="top-right"?c="-100%":(l=="bottom-center"||l=="center-center"||l=="top-center")&&(c="-50%"),l=="bottom-left"||l=="bottom-center"||l=="bottom-right"?m="-100%":(l=="center-left"||l=="center-center"||l=="center-right")&&(m="-50%");const g=`translate(${c}, ${m}) translate(${a}, ${u})`;this.rendered.transform_!=g&&(this.rendered.transform_=g,n.transform=g)}getOptions(){return this.options}}class d1{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();){const t=this.pop();t instanceof Wl&&t.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return xe(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return xe(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){xe(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Nl(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function f1(r,e,t){return r+"/"+e+"/"+t}function g1(r){return m1(r[0],r[1],r[2])}function m1(r,e,t){return(e<<r)+t}function _1(r,e){const t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,i):!0}class Kh{constructor(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Or(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new Kh(r,e,t,n)}const pl={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class p1 extends Hl{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(pl.PRELOAD)}setPreload(e){this.set(pl.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(pl.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(pl.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function zl(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function y1(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const x1=new Error("disposed");let Fr=null;function E1(r){Fr||(Fr=Ye(r.width,r.height,void 0,{willReadFrequently:!0}));const e=Fr.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),Fr.clearRect(0,0,t,n),Fr.drawImage(r,0,0),Fr.getImageData(0,0,t,n).data}const v1=[256,256];class ih extends Yh{constructor(e){const t=K.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=zl(this.data_);return e?[e.width,e.height]:v1}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==K.IDLE&&this.state!==K.ERROR)return;this.state=K.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=K.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=K.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(x1),this.controller_=null),super.disposeInternal()}}const Hg=.5,C1=10,Pf=.25;class qg{constructor(e,t,n,i,l,a){this.sourceProj_=e,this.targetProj_=t;let u={};const c=Ys(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){const P=R[0]+"/"+R[1];return u[P]||(u[P]=c(R)),u[P]},this.maxSourceExtent_=i,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ce(i)>=Ce(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ce(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ce(this.targetProj_.getExtent()):null;const m=or(n),g=Bl(n),p=Ul(n),y=jl(n),x=this.transformInv_(m),v=this.transformInv_(g),C=this.transformInv_(p),w=this.transformInv_(y),S=C1+(a?Math.max(0,Math.ceil(Math.log2(Xs(n)/(a*a*256*256)))):0);if(this.addQuad_(m,g,p,y,x,v,C,w,S),this.wrapsXInSource_){let R=1/0;this.triangles_.forEach(function(P,L,M){R=Math.min(R,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-R>this.sourceWorldWidth_/2){const L=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];L[0][0]-R>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-R>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-R>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const M=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-M<this.sourceWorldWidth_/2&&(P.source=L)}})}u={}}addTriangle_(e,t,n,i,l,a){this.triangles_.push({source:[i,l,a],target:[e,t,n]})}addQuad_(e,t,n,i,l,a,u,c,m){const g=zd([l,a,u,c]),p=this.sourceWorldWidth_?Ce(g)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&p>.5&&p<1;let v=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=zd([e,t,n,i]);v=Ce(w)/this.targetWorldWidth_>Pf||v}!x&&this.sourceProj_.isGlobal()&&p&&(v=p>Pf||v)}if(!v&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!Dt(g,this.maxSourceExtent_))return;let C=0;if(!v&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1]))){if(m>0)v=!0;else if(C=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),C!=1&&C!=2&&C!=4&&C!=8)return}if(m>0){if(!v){const w=[(e[0]+n[0])/2,(e[1]+n[1])/2],S=this.transformInv_(w);let R;x?R=(Yr(l[0],y)+Yr(u[0],y))/2-Yr(S[0],y):R=(l[0]+u[0])/2-S[0];const P=(l[1]+u[1])/2-S[1];v=R*R+P*P>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const w=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.transformInv_(w),R=[(i[0]+e[0])/2,(i[1]+e[1])/2],P=this.transformInv_(R);this.addQuad_(e,t,w,R,l,a,S,P,m-1),this.addQuad_(R,w,n,i,P,S,u,c,m-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],S=this.transformInv_(w),R=[(n[0]+i[0])/2,(n[1]+i[1])/2],P=this.transformInv_(R);this.addQuad_(e,w,R,i,l,S,P,c,m-1),this.addQuad_(w,t,n,R,S,a,u,P,m-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}C&11||this.addTriangle_(e,n,i,l,u,c),C&14||this.addTriangle_(e,n,t,l,u,a),C&&(C&13||this.addTriangle_(t,i,e,a,c,l),C&7||this.addTriangle_(t,i,n,a,c,u))}calculateSourceExtent(){const e=rn();return this.triangles_.forEach(function(t,n,i){const l=t.source;zs(e,l[0]),zs(e,l[1]),zs(e,l[2])}),e}getTriangles(){return this.triangles_}}let Gu;const ti=[];function Lf(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function Wu(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function w1(){if(Gu===void 0){const r=Ye(6,6,ti);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Lf(r,4,5,4,0),Lf(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;Gu=Wu(e,0)||Wu(e,4)||Wu(e,8),Vr(r),ti.push(r.canvas)}return Gu}function Mf(r,e,t,n){const i=J_(t,e,r);let l=Wd(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const u=r.getMetersPerUnit();u!==void 0&&(l/=u);const c=r.getExtent();if(!c||Kr(c,i)){const m=Wd(r,l,i)/l;isFinite(m)&&m>0&&(l/=m)}return l}function Qg(r,e,t,n){const i=Li(t);let l=Mf(r,e,i,n);return(!isFinite(l)||l<=0)&&Uf(t,function(a){return l=Mf(r,e,a,n),isFinite(l)&&l>0}),l}function Jg(r,e,t,n,i,l,a,u,c,m,g,p,y,x){const v=Ye(Math.round(t*r),Math.round(t*e),ti);if(p||(v.imageSmoothingEnabled=!1),c.length===0)return v.canvas;v.scale(t,t);function C(M){return Math.round(M*t)/t}v.globalCompositeOperation="lighter";const w=rn();c.forEach(function(M,G,N){Yf(w,M.extent)});let S;const R=t/n,P=(p?1:1+Math.pow(2,-24))/R;if(!y||c.length!==1||m!==0){if(S=Ye(Math.round(Ce(w)*R),Math.round(yt(w)*R),ti),p||(S.imageSmoothingEnabled=!1),i&&x){const M=(i[0]-w[0])*R,G=-(i[3]-w[3])*R,N=Ce(i)*R,k=yt(i)*R;S.rect(M,G,N,k),S.clip()}c.forEach(function(M,G,N){if(M.image.width>0&&M.image.height>0){if(M.clipExtent){S.save();const b=(M.clipExtent[0]-w[0])*R,$=-(M.clipExtent[3]-w[3])*R,j=Ce(M.clipExtent)*R,q=yt(M.clipExtent)*R;S.rect(p?b:Math.round(b),p?$:Math.round($),p?j:Math.round(b+j)-Math.round(b),p?q:Math.round($+q)-Math.round($)),S.clip()}const k=(M.extent[0]-w[0])*R,z=-(M.extent[3]-w[3])*R,te=Ce(M.extent)*R,H=yt(M.extent)*R;S.drawImage(M.image,m,m,M.image.width-2*m,M.image.height-2*m,p?k:Math.round(k),p?z:Math.round(z),p?te:Math.round(k+te)-Math.round(k),p?H:Math.round(z+H)-Math.round(z)),M.clipExtent&&S.restore()}})}const L=or(a);return u.getTriangles().forEach(function(M,G,N){const k=M.source,z=M.target;let te=k[0][0],H=k[0][1],b=k[1][0],$=k[1][1],j=k[2][0],q=k[2][1];const Y=C((z[0][0]-L[0])/l),ce=C(-(z[0][1]-L[1])/l),de=C((z[1][0]-L[0])/l),Ie=C(-(z[1][1]-L[1])/l),ee=C((z[2][0]-L[0])/l),se=C(-(z[2][1]-L[1])/l),Ee=te,je=H;te=0,H=0,b-=Ee,$-=je,j-=Ee,q-=je;const X=[[b,$,0,0,de-Y],[j,q,0,0,ee-Y],[0,0,b,$,Ie-ce],[0,0,j,q,se-ce]],Qe=P_(X);if(!Qe)return;if(v.save(),v.beginPath(),w1()||!p){v.moveTo(de,Ie);const We=4,Ut=Y-de,zt=ce-Ie;for(let it=0;it<We;it++)v.lineTo(de+C((it+1)*Ut/We),Ie+C(it*zt/(We-1))),it!=We-1&&v.lineTo(de+C((it+1)*Ut/We),Ie+C((it+1)*zt/(We-1)));v.lineTo(ee,se)}else v.moveTo(de,Ie),v.lineTo(Y,ce),v.lineTo(ee,se);v.clip(),v.transform(Qe[0],Qe[2],Qe[1],Qe[3],Y,ce),v.translate(w[0]-Ee,w[3]-je);let Ue;if(S)Ue=S.canvas,v.scale(P,-P);else{const We=c[0],Ut=We.extent;Ue=We.image,v.scale(Ce(Ut)/Ue.width,-yt(Ut)/Ue.height)}v.drawImage(Ue,0,0),v.restore()}),S&&(Vr(S),ti.push(S.canvas)),g&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,u.getTriangles().forEach(function(M,G,N){const k=M.target,z=(k[0][0]-L[0])/l,te=-(k[0][1]-L[1])/l,H=(k[1][0]-L[0])/l,b=-(k[1][1]-L[1])/l,$=(k[2][0]-L[0])/l,j=-(k[2][1]-L[1])/l;v.beginPath(),v.moveTo(H,b),v.lineTo(z,te),v.lineTo($,j),v.closePath(),v.stroke()}),v.restore()),v.canvas}class S1 extends ih{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?pn(n,i):n:i;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let u=this.sourceTileGrid_.getExtent();const c=a?pn(l,a):l;if(Xs(c)===0){this.state=K.EMPTY;return}n&&(u?u=pn(u,n):u=n);const m=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),g=e.targetProj,p=Qg(t,g,c,m);if(!isFinite(p)||p<=0){this.state=K.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:Hg;if(this.triangulation_=new qg(t,g,c,u,p*y,m),this.triangulation_.getTriangles().length===0){this.state=K.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let x=this.triangulation_.calculateSourceExtent();if(u&&(t.canWrapX()?(x[1]=Ge(x[1],u[1],u[3]),x[3]=Ge(x[3],u[1],u[3])):x=pn(x,u)),!Xs(x))this.state=K.EMPTY;else{let v=0,C=0;t.canWrapX()&&(v=Ce(n),C=Math.floor((x[0]-n[0])/v)),fh(x.slice(),t,!0).forEach(S=>{const R=this.sourceTileGrid_.getTileRangeForExtentAndZ(S,this.sourceZ_),P=e.getTileFunction;for(let L=R.minX;L<=R.maxX;L++)for(let M=R.minY;M<=R.maxY;M++){const G=P(this.sourceZ_,L,M,this.pixelRatio_);if(G){const N=C*v;this.sourceTiles_.push({tile:G,offset:N})}}++C}),this.sourceTiles_.length===0&&(this.state=K.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(v=>{const C=v.tile;if(!C||C.getState()!==K.LOADED)return;const w=C.getSize(),S=this.gutter_;let R;const P=y1(C.getData());P?R=P:(t=!0,R=E1(zl(C.getData())));const L=[w[0]+2*S,w[1]+2*S],M=R instanceof Float32Array,G=L[0]*L[1],N=M?Float32Array:Uint8ClampedArray,k=new N(R.buffer),z=N.BYTES_PER_ELEMENT,te=z*k.length/G,H=k.byteLength/L[1],b=Math.floor(H/z/L[0]),$=G*b;let j=k;if(k.length!==$){j=new N($);let ce=0,de=0;const Ie=L[0]*b;for(let ee=0;ee<L[1];++ee){for(let se=0;se<Ie;++se)j[ce++]=k[de+se];de+=H/z}}const q=this.sourceTileGrid_.getTileCoordExtent(C.tileCoord);q[0]+=v.offset,q[2]+=v.offset;const Y=this.clipExtent_?.slice();Y&&(Y[0]+=v.offset,Y[2]+=v.offset),e.push({extent:q,clipExtent:Y,data:new Uint8ClampedArray(j.buffer),dataType:N,bytesPerPixel:te,pixelSize:L})}),this.sourceTiles_.length=0,e.length===0){this.state=K.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),l=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let g,p;const y=e[0].bytesPerPixel,x=Math.ceil(y/3);for(let v=x-1;v>=0;--v){const C=[];for(let M=0,G=e.length;M<G;++M){const N=e[M],k=N.data,z=N.pixelSize,te=z[0],H=z[1],b=Ye(te,H,ti),$=b.createImageData(te,H),j=$.data;let q=v*3;for(let Y=0,ce=j.length;Y<ce;Y+=4)j[Y]=k[q],j[Y+1]=k[q+1],j[Y+2]=k[q+2],j[Y+3]=255,q+=y;b.putImageData($,0,0),C.push({extent:N.extent,clipExtent:N.clipExtent,image:b.canvas})}const w=Jg(l,a,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,m,this.triangulation_,C,this.gutter_,!1,!1,!1);for(let M=0,G=C.length;M<G;++M){const k=C[M].image.getContext("2d");Vr(k),ti.push(k.canvas)}const S=w.getContext("2d"),R=S.getImageData(0,0,w.width,w.height);Vr(S),ti.push(w),g||(p=new Uint8ClampedArray(y*R.width*R.height),g=new e[0].dataType(p.buffer));const P=R.data;let L=v*3;for(let M=0,G=P.length;M<G;M+=4)P[M+3]===255?(p[L]=P[M],p[L+1]=P[M+1],p[L+2]=P[M+2]):(p[L]=0,p[L+1]=0,p[L+2]=0),L+=y}if(t){const v=Ye(l,a),C=new ImageData(g,l);v.putImageData(C,0,0),this.reprojData_=v.canvas}else this.reprojData_=g;this.reprojSize_=[Math.round(l*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=K.LOADED,this.changed()}load(){if(this.state!==K.IDLE&&this.state!==K.ERROR)return;this.state=K.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==K.IDLE&&n!==K.LOADING)return;e++;const i=me(t,re.CHANGE,()=>{const l=t.getState();(l==K.LOADED||l==K.ERROR||l==K.EMPTY)&&(Re(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==K.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Re),this.sourcesListenerKeys_=null}}class rh extends Yh{constructor(e,t,n,i,l,a,u,c,m,g,p,y){super(l,K.IDLE,y),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=u,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let C=this.sourceTileGrid_.getExtent();const w=v?pn(x,v):x;if(Xs(w)===0){this.state=K.EMPTY;return}const S=e.getExtent();S&&(C?C=pn(C,S):C=S);const R=i.getResolution(this.wrappedTileCoord_[0]),P=Qg(e,n,w,R);if(!isFinite(P)||P<=0){this.state=K.EMPTY;return}const L=g!==void 0?g:Hg;if(this.triangulation_=new qg(e,n,w,C,P*L,R),this.triangulation_.getTriangles().length===0){this.state=K.EMPTY;return}this.sourceZ_=t.getZForResolution(P);let M=this.triangulation_.calculateSourceExtent();if(C&&(e.canWrapX()?(M[1]=Ge(M[1],C[1],C[3]),M[3]=Ge(M[3],C[1],C[3])):M=pn(M,C)),!Xs(M))this.state=K.EMPTY;else{let G=0,N=0;e.canWrapX()&&(G=Ce(S),N=Math.floor((M[0]-S[0])/G)),fh(M.slice(),e,!0).forEach(z=>{const te=t.getTileRangeForExtentAndZ(z,this.sourceZ_);for(let H=te.minX;H<=te.maxX;H++)for(let b=te.minY;b<=te.maxY;b++){const $=m(this.sourceZ_,H,b,u);if($){const j=N*G;this.sourceTiles_.push({tile:$,offset:j})}}++N}),this.sourceTiles_.length===0&&(this.state=K.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&n.getState()==K.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const l=this.clipExtent_?.slice();l&&(l[0]+=t.offset,l[2]+=t.offset),e.push({extent:i,clipExtent:l,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=K.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),i=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Jg(i,l,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=K.LOADED}this.changed()}load(){if(this.state==K.IDLE){this.state=K.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==K.IDLE||n==K.LOADING){e++;const i=me(t,re.CHANGE,l=>{const a=t.getState();(a==K.LOADED||a==K.ERROR||a==K.EMPTY)&&(Re(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,i){t.getState()==K.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Re),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Vr(this.canvas_.getContext("2d")),ti.push(this.canvas_),this.canvas_=null),super.release()}}function Xu(r,e,t,n){return`${r},${f1(e,t,n)}`}function Yu(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],i=n.has(e);return i||n.add(e),!i}function R1(r,e,t){const n=r[t];return n?n.delete(e):!1}function Af(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=pn(e,Si(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(e=pn(e,i))}return e}class I1 extends Fg{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=rn(),this.tempTileRange_=new Kh(0,0,0,0),this.tempTileCoord_=Nl(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new d1(n),this.renderedProjection_=void 0,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,i){const l=this.tileCache_,u=this.getLayer().getSource(),c=Xu(u.getKey(),e,t,n);let m;if(l.containsKey(c))m=l.get(c);else{if(m=u.getTile(e,t,n,i.pixelRatio,i.viewState.projection),!m)return null;l.set(c,m)}return m}getTile(e,t,n,i){const l=this.getOrCreateTile(e,t,n,i);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),i=lt(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!Kr(l,i))return null;const a=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(a.projection),m=u.getTilePixelRatio(t.pixelRatio);for(let g=c.getZForResolution(a.resolution);g>=c.getMinZoom();--g){const p=c.getTileCoordForCoordAndZ(i,g),y=this.getTile(g,p[1],p[2],t);if(!y||y.getState()!==K.LOADED)continue;const x=c.getOrigin(g),v=Nt(c.getTileSize(g)),C=c.getResolution(g);let w;if(y instanceof Yg||y instanceof rh)w=y.getImage();else if(y instanceof ih){if(w=zl(y.getData()),!w)continue}else continue;const S=Math.floor(m*((i[0]-x[0])/C-p[1]*v[0])),R=Math.floor(m*((x[1]-i[1])/C-p[2]*v[1])),P=Math.round(m*u.getGutterForProjection(a.projection));return this.getImageData(w,S+P,R+P)}return null}prepareFrame(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,i,l){const a=e.viewState,u=this.getLayer(),c=u.getRenderSource(),m=c.getTileGridForProjection(a.projection),g=we(c);g in e.wantedTiles||(e.wantedTiles[g]={});const p=e.wantedTiles[g],y=u.getMapInternal(),x=Math.max(n-l,m.getMinZoom(),m.getZForResolution(Math.min(u.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):m.getResolution(0)),c.zDirection));for(let v=n;v>=x;--v){const C=m.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),w=m.getResolution(v);for(let S=C.minX;S<=C.maxX;++S)for(let R=C.minY;R<=C.maxY;++R){const P=this.getTile(v,S,R,e);if(!P||!Yu(i,P,v))continue;const M=P.getKey();if(p[M]=!0,P.getState()===K.IDLE&&!e.tileQueue.isKeyQueued(M)){const G=Nl(v,S,R,this.tempTileCoord_);e.tileQueue.enqueue([P,g,m.getTileCoordCenter(G),w])}}}}findStaleTile_(e,t){const n=this.tileCache_,i=e[0],l=e[1],a=e[2],u=this.getStaleKeys();for(let c=0;c<u.length;++c){const m=Xu(u[c],i,l,a);if(n.containsKey(m)){const g=n.get(m);if(g.getState()===K.LOADED)return g.endTransition(we(this)),Yu(t,g,i),!0}}return!1}findAltTiles_(e,t,n,i){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let a=!0;const u=this.tileCache_,m=this.getLayer().getRenderSource().getKey();for(let g=l.minX;g<=l.maxX;++g)for(let p=l.minY;p<=l.maxY;++p){const y=Xu(m,n,g,p);let x=!1;if(u.containsKey(y)){const v=u.get(y);v.getState()===K.LOADED&&(Yu(i,v,n),x=!0)}x||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],i=e.viewState,l=i.projection,a=i.resolution,u=i.center,c=e.pixelRatio,m=this.getLayer(),g=m.getSource(),p=g.getRevision(),y=g.getTileGridForProjection(l),x=y.getZForResolution(a,g.zDirection),v=y.getResolution(x),C=g.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let w=e.extent;const S=g.getTilePixelRatio(c);this.prepareContainer(e,t);const R=this.context.canvas.width,P=this.context.canvas.height,L=n.extent&&Si(n.extent);L&&(w=pn(w,Si(n.extent)));const M=v*R/2/S,G=v*P/2/S,N=[u[0]-M,u[1]-G,u[0]+M,u[1]+G],k={};this.renderedTiles.length=0;const z=m.getPreload();if(e.nextExtent){const ee=y.getZForResolution(i.nextResolution,g.zDirection),se=Af(e,e.nextExtent);this.enqueueTiles(e,se,ee,k,z)}const te=Af(e,w);if(this.enqueueTiles(e,te,x,k,0),z>0&&setTimeout(()=>{this.enqueueTiles(e,te,x-1,k,z-1)},0),!(x in k))return this.container;const H=we(this),b=e.time;for(const ee of k[x]){const se=ee.getState();if((ee instanceof rh||ee instanceof S1)&&se===K.EMPTY)continue;const Ee=ee.tileCoord;if(se===K.LOADED&&ee.getAlpha(H,b)===1){ee.endTransition(H);continue}if(this.renderComplete=!1,this.findStaleTile_(Ee,k)){R1(k,ee,x),e.animate=!0;continue}if(this.findAltTiles_(y,Ee,x+1,k))continue;const Qe=y.getMinZoom();for(let Ue=x-1;Ue>=Qe&&!this.findAltTiles_(y,Ee,Ue,k);--Ue);}const $=v/a*c/S,j=this.getRenderContext(e);ni(this.tempTransform,R/2,P/2,$,$,0,-R/2,-P/2),n.extent&&this.clipUnrotated(j,e,L),g.getInterpolate()||(j.imageSmoothingEnabled=!1),this.preRender(j,e);const q=Object.keys(k).map(Number);q.sort(Jn);let Y;const ce=[],de=[];for(let ee=q.length-1;ee>=0;--ee){const se=q[ee],Ee=g.getTilePixelSize(se,c,l),X=y.getResolution(se)/v,Qe=Ee[0]*X*$,Ue=Ee[1]*X*$,We=y.getTileCoordForCoordAndZ(or(N),se),Ut=y.getTileCoordExtent(We),zt=lt(this.tempTransform,[S*(Ut[0]-N[0])/v,S*(N[3]-Ut[3])/v]),it=S*g.getGutterForProjection(l);for(const Ne of k[se]){if(Ne.getState()!==K.LOADED)continue;const vn=Ne.tileCoord,rt=We[1]-vn[1],$r=Math.round(zt[0]-(rt-1)*Qe),Fi=We[2]-vn[2],Nn=Math.round(zt[1]-(Fi-1)*Ue),Ct=Math.round(zt[0]-rt*Qe),Bt=Math.round(zt[1]-Fi*Ue),si=$r-Ct,Kt=Nn-Bt,Di=q.length===1;let zn=!1;Y=[Ct,Bt,Ct+si,Bt,Ct+si,Bt+Kt,Ct,Bt+Kt];for(let oi=0,Zt=ce.length;oi<Zt;++oi)if(!Di&&se<de[oi]){const Be=ce[oi];Dt([Ct,Bt,Ct+si,Bt+Kt],[Be[0],Be[3],Be[4],Be[7]])&&(zn||(j.save(),zn=!0),j.beginPath(),j.moveTo(Y[0],Y[1]),j.lineTo(Y[2],Y[3]),j.lineTo(Y[4],Y[5]),j.lineTo(Y[6],Y[7]),j.moveTo(Be[6],Be[7]),j.lineTo(Be[4],Be[5]),j.lineTo(Be[2],Be[3]),j.lineTo(Be[0],Be[1]),j.clip())}ce.push(Y),de.push(se),this.drawTile(Ne,e,Ct,Bt,si,Kt,it,Di),zn&&j.restore(),this.renderedTiles.unshift(Ne),this.updateUsedTiles(e.usedTiles,g,Ne)}}this.renderedRevision=p,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Ws(this.renderedExtent_,N),this.renderedExtent_=N,this.renderedPixelRatio=c,this.renderedProjection=l,this.postRender(this.context,e),n.extent&&j.restore(),j.imageSmoothingEnabled=!0;const Ie=(ee,se)=>{const Ee=we(g),je=se.wantedTiles[Ee],X=je?Object.keys(je).length:0;this.updateCacheSize(X),this.tileCache_.expireCache()};return e.postRenderFunctions.push(Ie),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,i,l,a,u,c){let m;if(e instanceof ih){if(m=zl(e.getData()),!m)throw new Error("Rendering array data is not yet supported")}else m=this.getTileImage(e);if(!m)return;const g=this.getRenderContext(t),p=we(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(c?e.getAlpha(p,t.time):1),v=x!==g.globalAlpha;v&&(g.save(),g.globalAlpha=x),g.drawImage(m,u,u,m.width-2*u,m.height-2*u,n,i,l,a),v&&g.restore(),x!==y.opacity?t.animate=!0:c&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const i=we(t);i in e||(e[i]={}),e[i][n.getKey()]=!0}}class T1 extends p1{constructor(e){super(e)}createRenderer(){return new I1(this,{cacheSize:this.getCacheSize()})}}const ju={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Dr=[0,0,0],vi=5;class $g{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xe(w_(this.resolutions_,(i,l)=>l-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,l=this.resolutions_.length-1;i<l;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=or(n)),xe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:ah,xe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,l)=>{const a=new Kh(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const u=this.getTileRangeForExtentAndZ(n,l);a.minX=Math.max(u.minX,a.minX),a.maxX=Math.min(u.maxX,a.maxX),a.minY=Math.max(u.minY,a.minY),a.maxY=Math.min(u.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const i=this.getTileRangeForExtentAndZ(e,t);for(let l=i.minX,a=i.maxX;l<=a;++l)for(let u=i.minY,c=i.maxY;u<=c;++u)n([t,l,u])}forEachTileCoordParentTileRange(e,t,n,i){let l,a,u,c=null,m=e[0]-1;for(this.zoomFactor_===2?(a=e[1],u=e[2]):c=this.getTileCoordExtent(e,i);m>=this.minZoom;){if(a!==void 0&&u!==void 0?(a=Math.floor(a/2),u=Math.floor(u/2),l=Or(a,a,u,u,n)):l=this.getTileRangeForExtentAndZ(c,m,n),t(m,l))return!0;--m}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return Or(l,l+1,a,a+1,t)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],l=e[1],a=e[2];if(t===i)return Or(l,a,l,a,n);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-i),m=Math.floor(l*c),g=Math.floor(a*c);if(t<i)return Or(m,m,g,g,n);const p=Math.floor(c*(l+1))-1,y=Math.floor(c*(a+1))-1;return Or(m,p,g,y,n)}const u=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Dr);const i=Dr[1],l=Dr[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Dr);const a=Dr[1],u=Dr[2];return Or(i,a,l,u,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Nt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),l=Nt(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*l[0]*i,u=n[1]-(e[2]+1)*l[1]*i,c=a+l[0]*i,m=u+l[1]*i;return Pi(a,u,c,m,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,i,l){const a=this.getZForResolution(n),u=n/this.getResolution(a),c=this.getOrigin(a),m=Nt(this.getTileSize(a),this.tmpSize_);let g=u*(e-c[0])/n/m[0],p=u*(c[1]-t)/n/m[1];return i?(g=al(g,vi)-1,p=al(p,vi)-1):(g=ll(g,vi),p=ll(p,vi)),Nl(a,g,p,l)}getTileCoordForXYAndZ_(e,t,n,i,l){const a=this.getOrigin(n),u=this.getResolution(n),c=Nt(this.getTileSize(n),this.tmpSize_);let m=(e-a[0])/u/c[0],g=(a[1]-t)/u/c[1];return i?(m=al(m,vi)-1,g=al(g,vi)-1):(m=ll(m,vi),g=ll(g,vi)),Nl(n,m,g,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=oh(this.resolutions_,e,t||0);return Ge(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return sg(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}function em(r){let e=r.getDefaultTileGrid();return e||(e=A1(r),r.setDefaultTileGrid(e)),e}function P1(r,e,t){const n=e[0],i=r.getTileCoordCenter(e),l=Zh(t);if(!Kr(l,i)){const a=Ce(l),u=Math.ceil((l[0]-i[0])/a);return i[0]+=a*u,r.getTileCoordForCoordAndZ(i,n)}return e}function L1(r,e,t,n){n=n!==void 0?n:"top-left";const i=tm(r,e,t);return new $g({extent:r,origin:X_(r,n),resolutions:i,tileSize:t})}function M1(r){const e=r||{},t=e.extent||Ze("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:tm(t,e.maxZoom,e.tileSize,e.maxResolution)};return new $g(n)}function tm(r,e,t,n){e=e!==void 0?e:L_,t=Nt(t!==void 0?t:ah);const i=yt(r),l=Ce(r);n=n>0?n:Math.max(l/t[0],i/t[1]);const a=e+1,u=new Array(a);for(let c=0;c<a;++c)u[c]=n/Math.pow(2,c);return u}function A1(r,e,t,n){const i=Zh(r);return L1(i,e,t,n)}function Zh(r){r=Ze(r);let e=r.getExtent();if(!e){const t=180*uh.degrees/r.getMetersPerUnit();e=Pi(-t,-t,t,t)}return e}class O1 extends Xg{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Nt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||we(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,i,l){return ie()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:em(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),a=Nt(i.getTileSize(e),this.tmpSize);return l==1?a:kp(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=P1(n,e,t)),_1(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class F1 extends ii{constructor(e,t){super(e),this.tile=t}}const D1=/\{z\}/g,k1=/\{x\}/g,N1=/\{y\}/g,z1=/\{-y\}/g;function G1(r,e,t,n,i){return r.replace(D1,e.toString()).replace(k1,t.toString()).replace(N1,n.toString()).replace(z1,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-n).toString()})}function W1(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let l;for(l=n;l<=i;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=n;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}function X1(r,e){return function(t,n,i){if(!t)return;let l;const a=t[0];if(e){const u=e.getFullTileRange(a);u&&(l=u.getHeight()-1)}return G1(r,a,t[1],t[2],l)}}function Y1(r,e){const t=r.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=X1(r[i],e);return j1(n)}function j1(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const i=g1(e),l=Yr(i,r.length);return r[l](e,t,n)}}class Vh extends O1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Vh.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=we(t),i=t.getState();let l;i==K.LOADING?(this.tileLoadingKeys_[n]=!0,l=ju.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=i==K.ERROR?ju.TILELOADERROR:i==K.LOADED?ju.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new F1(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=W1(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Y1(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class U1 extends Vh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:B1,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Yg,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!El(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||El(t,e)))return this.tileGrid;const n=we(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=em(e)),this.tileGridForProjection[n]}createTile_(e,t,n,i,l,a){const u=[e,t,n],c=this.getTileCoordForTileUrlFunction(u,l),m=c?this.tileUrlFunction(c,i,l):void 0,g=new this.tileClass(u,m!==void 0?K.IDLE:K.EMPTY,m!==void 0?m:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return g.key=a,g.addEventListener(re.CHANGE,this.handleTileChange.bind(this)),g}getTile(e,t,n,i,l){const a=this.getProjection();if(!a||!l||El(a,l))return this.getTileInternal(e,t,n,i,a||l);const u=[e,t,n],c=this.getKey(),m=this.getTileGridForProjection(a),g=this.getTileGridForProjection(l),p=this.getTileCoordForTileUrlFunction(u,l),y=new rh(a,m,l,g,u,p,this.getTilePixelRatio(i),this.getGutter(),(x,v,C,w)=>this.getTileInternal(x,v,C,w,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=c,y}getTileInternal(e,t,n,i,l){const a=this.getKey();return this.createTile_(e,t,n,i,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Ze(e);if(n){const i=we(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function B1(r,e){r.getImage().src=e}class K1 extends U1{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:M1({extent:Zh(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Z1='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class V1 extends K1{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Z1];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}class b1{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ra,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Ze(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Ze(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ie()}readFeature(e,t){return ie()}readFeatures(e,t){return ie()}readGeometry(e,t){return ie()}readProjection(e){return ie()}writeFeature(e,t){return ie()}writeFeatures(e,t){return ie()}writeGeometry(e,t){return ie()}}function bh(r,e,t){const n=t?Ze(t.featureProjection):null,i=t?Ze(t.dataProjection):null;let l=r;if(n&&i&&!El(n,i)){e&&(l=r.clone());const a=e?n:i,u=e?i:n;a.getUnits()==="tile-pixels"?l.transform(a,u):l.applyTransform(Ys(a,u))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),u=function(c){for(let m=0,g=c.length;m<g;++m)c[m]=Math.round(c[m]*a)/a;return c};l===r&&(l=r.clone()),l.applyTransform(u)}return l}const H1={Point:Zr,LineString:qr,Polygon:Mi,MultiPoint:sa,MultiLineString:Fl,MultiPolygon:Dl};function q1(r,e,t){return Array.isArray(e[0])?(lg(r,0,e,t)||(r=r.slice(),Hu(r,0,e,t)),r):(Lh(r,0,e,t)||(r=r.slice(),Sl(r,0,e,t)),r)}function nm(r,e){const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(l=>nm({...r,geometry:l})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const i=t.layout.length;return bh(new jt(n,n==="Polygon"?q1(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function Hh(r,e){if(!r)return null;if(Array.isArray(r)){const n=r.map(i=>Hh(i,e));return new Ol(n)}const t=H1[r.type];return bh(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class Q1 extends b1{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(yl(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(yl(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ie()}readFeaturesFromObject(e,t){return ie()}readGeometry(e,t){return this.readGeometryFromObject(yl(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ie()}readProjection(e){return this.readProjectionFromObject(yl(e))}readProjectionFromObject(e){return ie()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ie()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ie()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ie()}}function yl(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}class J1 extends Q1{constructor(e){e=e||{},super(),this.dataProjection=Ze(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ze(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const i=qh(n.geometry);if(this.featureClass===jt)return nm({geometry:i,id:n.id,properties:n.properties},t);const l=new ra;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(Hh(i,t)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,t){const n=e;let i=null;if(n.type==="FeatureCollection"){const l=e;i=[];const a=l.features;for(let u=0,c=a.length;u<c;++u){const m=this.readFeatureFromObject(a[u],t);m&&i.push(m)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return $1(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Ze(t.properties.name);else if(t.type==="EPSG")n=Ze("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(n.id=i),!e.hasProperties())return n;const l=e.getProperties(),a=e.getGeometry();return a&&(n.geometry=sh(a,t),delete l[e.getGeometryName()]),ir(l)||(n.properties=l),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let i=0,l=e.length;i<l;++i)n.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return sh(e,this.adaptOptions(t))}}function qh(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=tx(r);break}case"LineString":{t=nx(r);break}case"Polygon":{t=ox(r);break}case"MultiPoint":{t=rx(r);break}case"MultiLineString":{t=ix(r);break}case"MultiPolygon":{t=sx(r);break}case"GeometryCollection":{t=ex(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function $1(r,e){const t=qh(r);return Hh(t,e)}function ex(r,e){return r.geometries.map(function(n){return qh(n)})}function tx(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:ar(e.length)}}function nx(r){const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:ar(e[0]?.length||2)}}function ix(r){const e=r.coordinates,t=e[0]?.[0]?.length||2,n=[],i=io(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:i,layout:ar(t)}}function rx(r){const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ar(e[0]?.length||2)}}function sx(r){const e=r.coordinates,t=[],n=e[0]?.[0]?.[0].length||2,i=$f(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:ar(n)}}function ox(r){const e=r.coordinates,t=[],n=e[0]?.[0]?.length,i=io(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:i,layout:ar(n)}}function sh(r,e){r=bh(r,!0,e);const t=r.getType();let n;switch(t){case"Point":{n=dx(r);break}case"LineString":{n=ax(r);break}case"Polygon":{n=fx(r,e);break}case"MultiPoint":{n=hx(r);break}case"MultiLineString":{n=ux(r);break}case"MultiPolygon":{n=cx(r,e);break}case"GeometryCollection":{n=lx(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function lx(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return sh(n,e)})}}function ax(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function ux(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function hx(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function cx(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function dx(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function fx(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}var im={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx=function(e){var t={},n=Qn,i=d_,l=Object.assign;function a(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),v=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),M=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}function N(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case g:return"Fragment";case m:return"Portal";case y:return"Profiler";case p:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case v:return(s.displayName||"Context")+".Consumer";case x:return(s._context.displayName||"Context")+".Provider";case C:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return o=s.displayName||null,o!==null?o:N(s.type)||"Memo";case P:o=s._payload,s=s._init;try{return N(s(o))}catch{}}return null}function k(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(o);case 8:return o===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function z(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function te(s){if(z(s)!==s)throw Error(a(188))}function H(s){var o=s.alternate;if(!o){if(o=z(s),o===null)throw Error(a(188));return o!==s?null:s}for(var h=s,d=o;;){var f=h.return;if(f===null)break;var _=f.alternate;if(_===null){if(d=f.return,d!==null){h=d;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===h)return te(f),s;if(_===d)return te(f),o;_=_.sibling}throw Error(a(188))}if(h.return!==d.return)h=f,d=_;else{for(var E=!1,I=f.child;I;){if(I===h){E=!0,h=f,d=_;break}if(I===d){E=!0,d=f,h=_;break}I=I.sibling}if(!E){for(I=_.child;I;){if(I===h){E=!0,h=_,d=f;break}if(I===d){E=!0,d=_,h=f;break}I=I.sibling}if(!E)throw Error(a(189))}}if(h.alternate!==d)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?s:o}function b(s){return s=H(s),s!==null?$(s):null}function $(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=$(s);if(o!==null)return o;s=s.sibling}return null}function j(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){if(s.tag!==4){var o=j(s);if(o!==null)return o}s=s.sibling}return null}var q=Array.isArray,Y=e.getPublicInstance,ce=e.getRootHostContext,de=e.getChildHostContext,Ie=e.prepareForCommit,ee=e.resetAfterCommit,se=e.createInstance,Ee=e.appendInitialChild,je=e.finalizeInitialChildren,X=e.prepareUpdate,Qe=e.shouldSetTextContent,Ue=e.createTextInstance,We=e.scheduleTimeout,Ut=e.cancelTimeout,zt=e.noTimeout,it=e.isPrimaryRenderer,Ne=e.supportsMutation,vn=e.supportsPersistence,rt=e.supportsHydration,$r=e.getInstanceFromNode,Fi=e.preparePortalMount,Nn=e.getCurrentEventPriority,Ct=e.detachDeletedInstance,Bt=e.supportsMicrotasks,si=e.scheduleMicrotask,Kt=e.supportsTestSelectors,Di=e.findFiberRoot,zn=e.getBoundingRect,oi=e.getTextContent,Zt=e.isHiddenSubtree,Be=e.matchAccessibilityRole,es=e.setFocusIfFocusable,ts=e.setupIntersectionObserver,cr=e.appendChild,dr=e.appendChildToContainer,la=e.commitTextUpdate,ho=e.commitMount,co=e.commitUpdate,ns=e.insertBefore,aa=e.insertInContainerBefore,ua=e.removeChild,fo=e.removeChildFromContainer,is=e.resetTextContent,rs=e.hideInstance,go=e.hideTextInstance,ss=e.unhideInstance,ki=e.unhideTextInstance,Ni=e.clearContainer,zi=e.cloneInstance,os=e.createContainerChildSet,ls=e.appendChildToContainerChildSet,wt=e.finalizeContainerChildren,sn=e.replaceContainerChildren,xt=e.cloneHiddenInstance,Gt=e.cloneHiddenTextInstance,St=e.canHydrateInstance,on=e.canHydrateTextInstance,ln=e.canHydrateSuspenseInstance,Le=e.isSuspenseInstancePending,Ve=e.isSuspenseInstanceFallback,an=e.getSuspenseInstanceFallbackErrorDetails,ha=e.registerSuspenseInstanceRetry,mo=e.getNextHydratableSibling,om=e.getFirstHydratableChild,lm=e.getFirstHydratableChildWithinContainer,am=e.getFirstHydratableChildWithinSuspenseInstance,um=e.hydrateInstance,hm=e.hydrateTextInstance,cm=e.hydrateSuspenseInstance,dm=e.getNextHydratableInstanceAfterSuspenseInstance,fm=e.commitHydratedContainer,gm=e.commitHydratedSuspenseInstance,mm=e.clearSuspenseBoundary,_m=e.clearSuspenseBoundaryFromContainer,pm=e.shouldDeleteUnhydratedTailInstances,ym=e.didNotMatchHydratedContainerTextInstance,xm=e.didNotMatchHydratedTextInstance,ca;function as(s){if(ca===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);ca=o&&o[1]||""}return`
`+ca+s}var da=!1;function fa(s,o){if(!s||da)return"";da=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(W){var d=W}Reflect.construct(s,[],o)}else{try{o.call()}catch(W){d=W}s.call(o.prototype)}else{try{throw Error()}catch(W){d=W}s()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),_=d.stack.split(`
`),E=f.length-1,I=_.length-1;1<=E&&0<=I&&f[E]!==_[I];)I--;for(;1<=E&&0<=I;E--,I--)if(f[E]!==_[I]){if(E!==1||I!==1)do if(E--,I--,0>I||f[E]!==_[I]){var O=`
`+f[E].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=E&&0<=I);break}}}finally{da=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?as(s):""}var Em=Object.prototype.hasOwnProperty,ga=[],fr=-1;function li(s){return{current:s}}function Me(s){0>fr||(s.current=ga[fr],ga[fr]=null,fr--)}function Pe(s,o){fr++,ga[fr]=s.current,s.current=o}var ai={},ht=li(ai),Rt=li(!1),Gi=ai;function gr(s,o){var h=s.type.contextTypes;if(!h)return ai;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var f={},_;for(_ in h)f[_]=o[_];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=f),f}function It(s){return s=s.childContextTypes,s!=null}function _o(){Me(Rt),Me(ht)}function Qh(s,o,h){if(ht.current!==ai)throw Error(a(168));Pe(ht,o),Pe(Rt,h)}function Jh(s,o,h){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return h;d=d.getChildContext();for(var f in d)if(!(f in o))throw Error(a(108,k(s)||"Unknown",f));return l({},h,d)}function po(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ai,Gi=ht.current,Pe(ht,s),Pe(Rt,Rt.current),!0}function $h(s,o,h){var d=s.stateNode;if(!d)throw Error(a(169));h?(s=Jh(s,o,Gi),d.__reactInternalMemoizedMergedChildContext=s,Me(Rt),Me(ht),Pe(ht,s)):Me(Rt),Pe(Rt,h)}var un=Math.clz32?Math.clz32:wm,vm=Math.log,Cm=Math.LN2;function wm(s){return s>>>=0,s===0?32:31-(vm(s)/Cm|0)|0}var yo=64,xo=4194304;function us(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Eo(s,o){var h=s.pendingLanes;if(h===0)return 0;var d=0,f=s.suspendedLanes,_=s.pingedLanes,E=h&268435455;if(E!==0){var I=E&~f;I!==0?d=us(I):(_&=E,_!==0&&(d=us(_)))}else E=h&~f,E!==0?d=us(E):_!==0&&(d=us(_));if(d===0)return 0;if(o!==0&&o!==d&&!(o&f)&&(f=d&-d,_=o&-o,f>=_||f===16&&(_&4194240)!==0))return o;if(d&4&&(d|=h&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)h=31-un(o),f=1<<h,d|=s[h],o&=~f;return d}function Sm(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rm(s,o){for(var h=s.suspendedLanes,d=s.pingedLanes,f=s.expirationTimes,_=s.pendingLanes;0<_;){var E=31-un(_),I=1<<E,O=f[E];O===-1?(!(I&h)||I&d)&&(f[E]=Sm(I,o)):O<=o&&(s.expiredLanes|=I),_&=~I}}function ma(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ec(){var s=yo;return yo<<=1,!(yo&4194240)&&(yo=64),s}function _a(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function hs(s,o,h){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-un(o),s[o]=h}function Im(s,o){var h=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<h;){var f=31-un(h),_=1<<f;o[f]=0,d[f]=-1,s[f]=-1,h&=~_}}function pa(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var d=31-un(h),f=1<<d;f&o|s[d]&o&&(s[d]|=o),h&=~f}}var _e=0;function tc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var ya=i.unstable_scheduleCallback,nc=i.unstable_cancelCallback,Tm=i.unstable_shouldYield,Pm=i.unstable_requestPaint,Je=i.unstable_now,xa=i.unstable_ImmediatePriority,Lm=i.unstable_UserBlockingPriority,Ea=i.unstable_NormalPriority,Mm=i.unstable_IdlePriority,vo=null,Cn=null;function Am(s){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(vo,s,void 0,(s.current.flags&128)===128)}catch{}}function Om(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var hn=typeof Object.is=="function"?Object.is:Om,Gn=null,Co=!1,va=!1;function ic(s){Gn===null?Gn=[s]:Gn.push(s)}function Fm(s){Co=!0,ic(s)}function wn(){if(!va&&Gn!==null){va=!0;var s=0,o=_e;try{var h=Gn;for(_e=1;s<h.length;s++){var d=h[s];do d=d(!0);while(d!==null)}Gn=null,Co=!1}catch(f){throw Gn!==null&&(Gn=Gn.slice(s+1)),ya(xa,wn),f}finally{_e=o,va=!1}}return null}var mr=[],_r=0,wo=null,So=0,Vt=[],bt=0,Wi=null,Wn=1,Xn="";function Xi(s,o){mr[_r++]=So,mr[_r++]=wo,wo=s,So=o}function rc(s,o,h){Vt[bt++]=Wn,Vt[bt++]=Xn,Vt[bt++]=Wi,Wi=s;var d=Wn;s=Xn;var f=32-un(d)-1;d&=~(1<<f),h+=1;var _=32-un(o)+f;if(30<_){var E=f-f%5;_=(d&(1<<E)-1).toString(32),d>>=E,f-=E,Wn=1<<32-un(o)+f|h<<f|d,Xn=_+s}else Wn=1<<_|h<<f|d,Xn=s}function Ca(s){s.return!==null&&(Xi(s,1),rc(s,1,0))}function wa(s){for(;s===wo;)wo=mr[--_r],mr[_r]=null,So=mr[--_r],mr[_r]=null;for(;s===Wi;)Wi=Vt[--bt],Vt[bt]=null,Xn=Vt[--bt],Vt[bt]=null,Wn=Vt[--bt],Vt[bt]=null}var Wt=null,Ht=null,Oe=!1,cs=!1,cn=null;function sc(s,o){var h=en(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=s,o=s.deletions,o===null?(s.deletions=[h],s.flags|=16):o.push(h)}function oc(s,o){switch(s.tag){case 5:return o=St(o,s.type,s.pendingProps),o!==null?(s.stateNode=o,Wt=s,Ht=om(o),!0):!1;case 6:return o=on(o,s.pendingProps),o!==null?(s.stateNode=o,Wt=s,Ht=null,!0):!1;case 13:if(o=ln(o),o!==null){var h=Wi!==null?{id:Wn,overflow:Xn}:null;return s.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=en(18,null,null,0),h.stateNode=o,h.return=s,s.child=h,Wt=s,Ht=null,!0}return!1;default:return!1}}function Sa(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ra(s){if(Oe){var o=Ht;if(o){var h=o;if(!oc(s,o)){if(Sa(s))throw Error(a(418));o=mo(h);var d=Wt;o&&oc(s,o)?sc(d,h):(s.flags=s.flags&-4097|2,Oe=!1,Wt=s)}}else{if(Sa(s))throw Error(a(418));s.flags=s.flags&-4097|2,Oe=!1,Wt=s}}}function lc(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Wt=s}function Ro(s){if(!rt||s!==Wt)return!1;if(!Oe)return lc(s),Oe=!0,!1;if(s.tag!==3&&(s.tag!==5||pm(s.type)&&!Qe(s.type,s.memoizedProps))){var o=Ht;if(o){if(Sa(s))throw ac(),Error(a(418));for(;o;)sc(s,o),o=mo(o)}}if(lc(s),s.tag===13){if(!rt)throw Error(a(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));Ht=dm(s)}else Ht=Wt?mo(s.stateNode):null;return!0}function ac(){for(var s=Ht;s;)s=mo(s)}function pr(){rt&&(Ht=Wt=null,cs=Oe=!1)}function Ia(s){cn===null?cn=[s]:cn.push(s)}var Dm=u.ReactCurrentBatchConfig;function Io(s,o){if(hn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),d=Object.keys(o);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var f=h[d];if(!Em.call(o,f)||!hn(s[f],o[f]))return!1}return!0}function km(s){switch(s.tag){case 5:return as(s.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return s=fa(s.type,!1),s;case 11:return s=fa(s.type.render,!1),s;case 1:return s=fa(s.type,!0),s;default:return""}}function ds(s,o,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(a(309));var d=h.stateNode}if(!d)throw Error(a(147,s));var f=d,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(E){var I=f.refs;E===null?delete I[_]:I[_]=E},o._stringRef=_,o)}if(typeof s!="string")throw Error(a(284));if(!h._owner)throw Error(a(290,s))}return s}function To(s,o){throw s=Object.prototype.toString.call(o),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function uc(s){var o=s._init;return o(s._payload)}function hc(s){function o(A,T){if(s){var F=A.deletions;F===null?(A.deletions=[T],A.flags|=16):F.push(T)}}function h(A,T){if(!s)return null;for(;T!==null;)o(A,T),T=T.sibling;return null}function d(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function f(A,T){return A=mi(A,T),A.index=0,A.sibling=null,A}function _(A,T,F){return A.index=F,s?(F=A.alternate,F!==null?(F=F.index,F<T?(A.flags|=2,T):F):(A.flags|=2,T)):(A.flags|=1048576,T)}function E(A){return s&&A.alternate===null&&(A.flags|=2),A}function I(A,T,F,B){return T===null||T.tag!==6?(T=vu(F,A.mode,B),T.return=A,T):(T=f(T,F),T.return=A,T)}function O(A,T,F,B){var J=F.type;return J===g?V(A,T,F.props.children,B,F.key):T!==null&&(T.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===P&&uc(J)===T.type)?(B=f(T,F.props),B.ref=ds(A,T,F),B.return=A,B):(B=rl(F.type,F.key,F.props,null,A.mode,B),B.ref=ds(A,T,F),B.return=A,B)}function W(A,T,F,B){return T===null||T.tag!==4||T.stateNode.containerInfo!==F.containerInfo||T.stateNode.implementation!==F.implementation?(T=Cu(F,A.mode,B),T.return=A,T):(T=f(T,F.children||[]),T.return=A,T)}function V(A,T,F,B,J){return T===null||T.tag!==7?(T=Vi(F,A.mode,B,J),T.return=A,T):(T=f(T,F),T.return=A,T)}function oe(A,T,F){if(typeof T=="string"&&T!==""||typeof T=="number")return T=vu(""+T,A.mode,F),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case c:return F=rl(T.type,T.key,T.props,null,A.mode,F),F.ref=ds(A,null,T),F.return=A,F;case m:return T=Cu(T,A.mode,F),T.return=A,T;case P:var B=T._init;return oe(A,B(T._payload),F)}if(q(T)||G(T))return T=Vi(T,A.mode,F,null),T.return=A,T;To(A,T)}return null}function U(A,T,F,B){var J=T!==null?T.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return J!==null?null:I(A,T,""+F,B);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case c:return F.key===J?O(A,T,F,B):null;case m:return F.key===J?W(A,T,F,B):null;case P:return J=F._init,U(A,T,J(F._payload),B)}if(q(F)||G(F))return J!==null?null:V(A,T,F,B,null);To(A,F)}return null}function Ae(A,T,F,B,J){if(typeof B=="string"&&B!==""||typeof B=="number")return A=A.get(F)||null,I(T,A,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case c:return A=A.get(B.key===null?F:B.key)||null,O(T,A,B,J);case m:return A=A.get(B.key===null?F:B.key)||null,W(T,A,B,J);case P:var ue=B._init;return Ae(A,T,F,ue(B._payload),J)}if(q(B)||G(B))return A=A.get(F)||null,V(T,A,B,J,null);To(T,B)}return null}function Te(A,T,F,B){for(var J=null,ue=null,le=T,pe=T=0,tt=null;le!==null&&pe<F.length;pe++){le.index>pe?(tt=le,le=null):tt=le.sibling;var ye=U(A,le,F[pe],B);if(ye===null){le===null&&(le=tt);break}s&&le&&ye.alternate===null&&o(A,le),T=_(ye,T,pe),ue===null?J=ye:ue.sibling=ye,ue=ye,le=tt}if(pe===F.length)return h(A,le),Oe&&Xi(A,pe),J;if(le===null){for(;pe<F.length;pe++)le=oe(A,F[pe],B),le!==null&&(T=_(le,T,pe),ue===null?J=le:ue.sibling=le,ue=le);return Oe&&Xi(A,pe),J}for(le=d(A,le);pe<F.length;pe++)tt=Ae(le,A,pe,F[pe],B),tt!==null&&(s&&tt.alternate!==null&&le.delete(tt.key===null?pe:tt.key),T=_(tt,T,pe),ue===null?J=tt:ue.sibling=tt,ue=tt);return s&&le.forEach(function(_i){return o(A,_i)}),Oe&&Xi(A,pe),J}function Mt(A,T,F,B){var J=G(F);if(typeof J!="function")throw Error(a(150));if(F=J.call(F),F==null)throw Error(a(151));for(var ue=J=null,le=T,pe=T=0,tt=null,ye=F.next();le!==null&&!ye.done;pe++,ye=F.next()){le.index>pe?(tt=le,le=null):tt=le.sibling;var _i=U(A,le,ye.value,B);if(_i===null){le===null&&(le=tt);break}s&&le&&_i.alternate===null&&o(A,le),T=_(_i,T,pe),ue===null?J=_i:ue.sibling=_i,ue=_i,le=tt}if(ye.done)return h(A,le),Oe&&Xi(A,pe),J;if(le===null){for(;!ye.done;pe++,ye=F.next())ye=oe(A,ye.value,B),ye!==null&&(T=_(ye,T,pe),ue===null?J=ye:ue.sibling=ye,ue=ye);return Oe&&Xi(A,pe),J}for(le=d(A,le);!ye.done;pe++,ye=F.next())ye=Ae(le,A,pe,ye.value,B),ye!==null&&(s&&ye.alternate!==null&&le.delete(ye.key===null?pe:ye.key),T=_(ye,T,pe),ue===null?J=ye:ue.sibling=ye,ue=ye);return s&&le.forEach(function(c_){return o(A,c_)}),Oe&&Xi(A,pe),J}function Bn(A,T,F,B){if(typeof F=="object"&&F!==null&&F.type===g&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case c:e:{for(var J=F.key,ue=T;ue!==null;){if(ue.key===J){if(J=F.type,J===g){if(ue.tag===7){h(A,ue.sibling),T=f(ue,F.props.children),T.return=A,A=T;break e}}else if(ue.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===P&&uc(J)===ue.type){h(A,ue.sibling),T=f(ue,F.props),T.ref=ds(A,ue,F),T.return=A,A=T;break e}h(A,ue);break}else o(A,ue);ue=ue.sibling}F.type===g?(T=Vi(F.props.children,A.mode,B,F.key),T.return=A,A=T):(B=rl(F.type,F.key,F.props,null,A.mode,B),B.ref=ds(A,T,F),B.return=A,A=B)}return E(A);case m:e:{for(ue=F.key;T!==null;){if(T.key===ue)if(T.tag===4&&T.stateNode.containerInfo===F.containerInfo&&T.stateNode.implementation===F.implementation){h(A,T.sibling),T=f(T,F.children||[]),T.return=A,A=T;break e}else{h(A,T);break}else o(A,T);T=T.sibling}T=Cu(F,A.mode,B),T.return=A,A=T}return E(A);case P:return ue=F._init,Bn(A,T,ue(F._payload),B)}if(q(F))return Te(A,T,F,B);if(G(F))return Mt(A,T,F,B);To(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,T!==null&&T.tag===6?(h(A,T.sibling),T=f(T,F),T.return=A,A=T):(h(A,T),T=vu(F,A.mode,B),T.return=A,A=T),E(A)):h(A,T)}return Bn}var yr=hc(!0),cc=hc(!1),Po=li(null),Lo=null,xr=null,Ta=null;function Pa(){Ta=xr=Lo=null}function dc(s,o,h){it?(Pe(Po,o._currentValue),o._currentValue=h):(Pe(Po,o._currentValue2),o._currentValue2=h)}function La(s){var o=Po.current;Me(Po),it?s._currentValue=o:s._currentValue2=o}function Ma(s,o,h){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===h)break;s=s.return}}function Er(s,o){Lo=s,Ta=xr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(Tt=!0),s.firstContext=null)}function qt(s){var o=it?s._currentValue:s._currentValue2;if(Ta!==s)if(s={context:s,memoizedValue:o,next:null},xr===null){if(Lo===null)throw Error(a(308));xr=s,Lo.dependencies={lanes:0,firstContext:s}}else xr=xr.next=s;return o}var Yi=null;function Aa(s){Yi===null?Yi=[s]:Yi.push(s)}function fc(s,o,h,d){var f=o.interleaved;return f===null?(h.next=h,Aa(o)):(h.next=f.next,f.next=h),o.interleaved=h,Sn(s,d)}function Sn(s,o){s.lanes|=o;var h=s.alternate;for(h!==null&&(h.lanes|=o),h=s,s=s.return;s!==null;)s.childLanes|=o,h=s.alternate,h!==null&&(h.childLanes|=o),h=s,s=s.return;return h.tag===3?h.stateNode:null}var ui=!1;function Oa(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gc(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Yn(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function hi(s,o,h){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,fe&2){var f=d.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),d.pending=o,Sn(s,h)}return f=d.interleaved,f===null?(o.next=o,Aa(d)):(o.next=f.next,f.next=o),d.interleaved=o,Sn(s,h)}function Mo(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,pa(s,h)}}function mc(s,o){var h=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var f=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?f=_=E:_=_.next=E,h=h.next}while(h!==null);_===null?f=_=o:_=_.next=o}else f=_=o;h={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:d.shared,effects:d.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}function Ao(s,o,h,d){var f=s.updateQueue;ui=!1;var _=f.firstBaseUpdate,E=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var O=I,W=O.next;O.next=null,E===null?_=W:E.next=W,E=O;var V=s.alternate;V!==null&&(V=V.updateQueue,I=V.lastBaseUpdate,I!==E&&(I===null?V.firstBaseUpdate=W:I.next=W,V.lastBaseUpdate=O))}if(_!==null){var oe=f.baseState;E=0,V=W=O=null,I=_;do{var U=I.lane,Ae=I.eventTime;if((d&U)===U){V!==null&&(V=V.next={eventTime:Ae,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var Te=s,Mt=I;switch(U=o,Ae=h,Mt.tag){case 1:if(Te=Mt.payload,typeof Te=="function"){oe=Te.call(Ae,oe,U);break e}oe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Mt.payload,U=typeof Te=="function"?Te.call(Ae,oe,U):Te,U==null)break e;oe=l({},oe,U);break e;case 2:ui=!0}}I.callback!==null&&I.lane!==0&&(s.flags|=64,U=f.effects,U===null?f.effects=[I]:U.push(I))}else Ae={eventTime:Ae,lane:U,tag:I.tag,payload:I.payload,callback:I.callback,next:null},V===null?(W=V=Ae,O=oe):V=V.next=Ae,E|=U;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;U=I,I=U.next,U.next=null,f.lastBaseUpdate=U,f.shared.pending=null}}while(!0);if(V===null&&(O=oe),f.baseState=O,f.firstBaseUpdate=W,f.lastBaseUpdate=V,o=f.shared.interleaved,o!==null){f=o;do E|=f.lane,f=f.next;while(f!==o)}else _===null&&(f.shared.lanes=0);Ui|=E,s.lanes=E,s.memoizedState=oe}}function _c(s,o,h){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],f=d.callback;if(f!==null){if(d.callback=null,d=h,typeof f!="function")throw Error(a(191,f));f.call(d)}}}var fs={},Qt=li(fs),gs=li(fs),vr=li(fs);function Rn(s){if(s===fs)throw Error(a(174));return s}function Fa(s,o){Pe(vr,o),Pe(gs,s),Pe(Qt,fs),s=ce(o),Me(Qt),Pe(Qt,s)}function Cr(){Me(Qt),Me(gs),Me(vr)}function pc(s){var o=Rn(vr.current),h=Rn(Qt.current);o=de(h,s.type,o),h!==o&&(Pe(gs,s),Pe(Qt,o))}function Da(s){gs.current===s&&(Me(Qt),Me(gs))}var De=li(0);function Oo(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Le(h)||Ve(h)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ka=[];function Na(){for(var s=0;s<ka.length;s++){var o=ka[s];it?o._workInProgressVersionPrimary=null:o._workInProgressVersionSecondary=null}ka.length=0}var Fo=u.ReactCurrentDispatcher,za=u.ReactCurrentBatchConfig,ji=0,ke=null,be=null,$e=null,Do=!1,ms=!1,_s=0,Nm=0;function ct(){throw Error(a(321))}function Ga(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!hn(s[h],o[h]))return!1;return!0}function Wa(s,o,h,d,f,_){if(ji=_,ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fo.current=s===null||s.memoizedState===null?Xm:Ym,s=h(d,f),ms){_=0;do{if(ms=!1,_s=0,25<=_)throw Error(a(301));_+=1,$e=be=null,o.updateQueue=null,Fo.current=jm,s=h(d,f)}while(ms)}if(Fo.current=zo,o=be!==null&&be.next!==null,ji=0,$e=be=ke=null,Do=!1,o)throw Error(a(300));return s}function Xa(){var s=_s!==0;return _s=0,s}function In(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ke.memoizedState=$e=s:$e=$e.next=s,$e}function Jt(){if(be===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=be.next;var o=$e===null?ke.memoizedState:$e.next;if(o!==null)$e=o,be=s;else{if(s===null)throw Error(a(310));be=s,s={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},$e===null?ke.memoizedState=$e=s:$e=$e.next=s}return $e}function ps(s,o){return typeof o=="function"?o(s):o}function Ya(s){var o=Jt(),h=o.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=s;var d=be,f=d.baseQueue,_=h.pending;if(_!==null){if(f!==null){var E=f.next;f.next=_.next,_.next=E}d.baseQueue=f=_,h.pending=null}if(f!==null){_=f.next,d=d.baseState;var I=E=null,O=null,W=_;do{var V=W.lane;if((ji&V)===V)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:s(d,W.action);else{var oe={lane:V,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(I=O=oe,E=d):O=O.next=oe,ke.lanes|=V,Ui|=V}W=W.next}while(W!==null&&W!==_);O===null?E=d:O.next=I,hn(d,o.memoizedState)||(Tt=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=O,h.lastRenderedState=d}if(s=h.interleaved,s!==null){f=s;do _=f.lane,ke.lanes|=_,Ui|=_,f=f.next;while(f!==s)}else f===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function ja(s){var o=Jt(),h=o.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=s;var d=h.dispatch,f=h.pending,_=o.memoizedState;if(f!==null){h.pending=null;var E=f=f.next;do _=s(_,E.action),E=E.next;while(E!==f);hn(_,o.memoizedState)||(Tt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),h.lastRenderedState=_}return[_,d]}function yc(){}function xc(s,o){var h=ke,d=Jt(),f=o(),_=!hn(d.memoizedState,f);if(_&&(d.memoizedState=f,Tt=!0),d=d.queue,Ua(Cc.bind(null,h,d,s),[s]),d.getSnapshot!==o||_||$e!==null&&$e.memoizedState.tag&1){if(h.flags|=2048,ys(9,vc.bind(null,h,d,f,o),void 0,null),et===null)throw Error(a(349));ji&30||Ec(h,o,f)}return f}function Ec(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=ke.updateQueue,o===null?(o={lastEffect:null,stores:null},ke.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function vc(s,o,h,d){o.value=h,o.getSnapshot=d,wc(o)&&Sc(s)}function Cc(s,o,h){return h(function(){wc(o)&&Sc(s)})}function wc(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!hn(s,h)}catch{return!0}}function Sc(s){var o=Sn(s,1);o!==null&&$t(o,s,1,-1)}function Rc(s){var o=In();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:s},o.queue=s,s=s.dispatch=Wm.bind(null,ke,s),[o.memoizedState,s]}function ys(s,o,h,d){return s={tag:s,create:o,destroy:h,deps:d,next:null},o=ke.updateQueue,o===null?(o={lastEffect:null,stores:null},ke.updateQueue=o,o.lastEffect=s.next=s):(h=o.lastEffect,h===null?o.lastEffect=s.next=s:(d=h.next,h.next=s,s.next=d,o.lastEffect=s)),s}function Ic(){return Jt().memoizedState}function ko(s,o,h,d){var f=In();ke.flags|=s,f.memoizedState=ys(1|o,h,void 0,d===void 0?null:d)}function No(s,o,h,d){var f=Jt();d=d===void 0?null:d;var _=void 0;if(be!==null){var E=be.memoizedState;if(_=E.destroy,d!==null&&Ga(d,E.deps)){f.memoizedState=ys(o,h,_,d);return}}ke.flags|=s,f.memoizedState=ys(1|o,h,_,d)}function Tc(s,o){return ko(8390656,8,s,o)}function Ua(s,o){return No(2048,8,s,o)}function Pc(s,o){return No(4,2,s,o)}function Lc(s,o){return No(4,4,s,o)}function Mc(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ac(s,o,h){return h=h!=null?h.concat([s]):null,No(4,4,Mc.bind(null,o,s),h)}function Ba(){}function Oc(s,o){var h=Jt();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Ga(o,d[1])?d[0]:(h.memoizedState=[s,o],s)}function Fc(s,o){var h=Jt();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Ga(o,d[1])?d[0]:(s=s(),h.memoizedState=[s,o],s)}function Dc(s,o,h){return ji&21?(hn(h,o)||(h=ec(),ke.lanes|=h,Ui|=h,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,Tt=!0),s.memoizedState=h)}function zm(s,o){var h=_e;_e=h!==0&&4>h?h:4,s(!0);var d=za.transition;za.transition={};try{s(!1),o()}finally{_e=h,za.transition=d}}function kc(){return Jt().memoizedState}function Gm(s,o,h){var d=fi(s);if(h={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null},Nc(s))zc(o,h);else if(h=fc(s,o,h,d),h!==null){var f=gt();$t(h,s,d,f),Gc(h,o,d)}}function Wm(s,o,h){var d=fi(s),f={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null};if(Nc(s))zc(o,f);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var E=o.lastRenderedState,I=_(E,h);if(f.hasEagerState=!0,f.eagerState=I,hn(I,E)){var O=o.interleaved;O===null?(f.next=f,Aa(o)):(f.next=O.next,O.next=f),o.interleaved=f;return}}catch{}finally{}h=fc(s,o,f,d),h!==null&&(f=gt(),$t(h,s,d,f),Gc(h,o,d))}}function Nc(s){var o=s.alternate;return s===ke||o!==null&&o===ke}function zc(s,o){ms=Do=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Gc(s,o,h){if(h&4194240){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,pa(s,h)}}var zo={readContext:qt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Xm={readContext:qt,useCallback:function(s,o){return In().memoizedState=[s,o===void 0?null:o],s},useContext:qt,useEffect:Tc,useImperativeHandle:function(s,o,h){return h=h!=null?h.concat([s]):null,ko(4194308,4,Mc.bind(null,o,s),h)},useLayoutEffect:function(s,o){return ko(4194308,4,s,o)},useInsertionEffect:function(s,o){return ko(4,2,s,o)},useMemo:function(s,o){var h=In();return o=o===void 0?null:o,s=s(),h.memoizedState=[s,o],s},useReducer:function(s,o,h){var d=In();return o=h!==void 0?h(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=Gm.bind(null,ke,s),[d.memoizedState,s]},useRef:function(s){var o=In();return s={current:s},o.memoizedState=s},useState:Rc,useDebugValue:Ba,useDeferredValue:function(s){return In().memoizedState=s},useTransition:function(){var s=Rc(!1),o=s[0];return s=zm.bind(null,s[1]),In().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,h){var d=ke,f=In();if(Oe){if(h===void 0)throw Error(a(407));h=h()}else{if(h=o(),et===null)throw Error(a(349));ji&30||Ec(d,o,h)}f.memoizedState=h;var _={value:h,getSnapshot:o};return f.queue=_,Tc(Cc.bind(null,d,_,s),[s]),d.flags|=2048,ys(9,vc.bind(null,d,_,h,o),void 0,null),h},useId:function(){var s=In(),o=et.identifierPrefix;if(Oe){var h=Xn,d=Wn;h=(d&~(1<<32-un(d)-1)).toString(32)+h,o=":"+o+"R"+h,h=_s++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=Nm++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Ym={readContext:qt,useCallback:Oc,useContext:qt,useEffect:Ua,useImperativeHandle:Ac,useInsertionEffect:Pc,useLayoutEffect:Lc,useMemo:Fc,useReducer:Ya,useRef:Ic,useState:function(){return Ya(ps)},useDebugValue:Ba,useDeferredValue:function(s){var o=Jt();return Dc(o,be.memoizedState,s)},useTransition:function(){var s=Ya(ps)[0],o=Jt().memoizedState;return[s,o]},useMutableSource:yc,useSyncExternalStore:xc,useId:kc,unstable_isNewReconciler:!1},jm={readContext:qt,useCallback:Oc,useContext:qt,useEffect:Ua,useImperativeHandle:Ac,useInsertionEffect:Pc,useLayoutEffect:Lc,useMemo:Fc,useReducer:ja,useRef:Ic,useState:function(){return ja(ps)},useDebugValue:Ba,useDeferredValue:function(s){var o=Jt();return be===null?o.memoizedState=s:Dc(o,be.memoizedState,s)},useTransition:function(){var s=ja(ps)[0],o=Jt().memoizedState;return[s,o]},useMutableSource:yc,useSyncExternalStore:xc,useId:kc,unstable_isNewReconciler:!1};function dn(s,o){if(s&&s.defaultProps){o=l({},o),s=s.defaultProps;for(var h in s)o[h]===void 0&&(o[h]=s[h]);return o}return o}function Ka(s,o,h,d){o=s.memoizedState,h=h(d,o),h=h==null?o:l({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Go={isMounted:function(s){return(s=s._reactInternals)?z(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var d=gt(),f=fi(s),_=Yn(d,f);_.payload=o,h!=null&&(_.callback=h),o=hi(s,_,f),o!==null&&($t(o,s,f,d),Mo(o,s,f))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var d=gt(),f=fi(s),_=Yn(d,f);_.tag=1,_.payload=o,h!=null&&(_.callback=h),o=hi(s,_,f),o!==null&&($t(o,s,f,d),Mo(o,s,f))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=gt(),d=fi(s),f=Yn(h,d);f.tag=2,o!=null&&(f.callback=o),o=hi(s,f,d),o!==null&&($t(o,s,d,h),Mo(o,s,d))}};function Wc(s,o,h,d,f,_,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,E):o.prototype&&o.prototype.isPureReactComponent?!Io(h,d)||!Io(f,_):!0}function Xc(s,o,h){var d=!1,f=ai,_=o.contextType;return typeof _=="object"&&_!==null?_=qt(_):(f=It(o)?Gi:ht.current,d=o.contextTypes,_=(d=d!=null)?gr(s,f):ai),o=new o(h,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Go,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=f,s.__reactInternalMemoizedMaskedChildContext=_),o}function Yc(s,o,h,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,d),o.state!==s&&Go.enqueueReplaceState(o,o.state,null)}function Za(s,o,h,d){var f=s.stateNode;f.props=h,f.state=s.memoizedState,f.refs={},Oa(s);var _=o.contextType;typeof _=="object"&&_!==null?f.context=qt(_):(_=It(o)?Gi:ht.current,f.context=gr(s,_)),f.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Ka(s,o,_,h),f.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(o=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),o!==f.state&&Go.enqueueReplaceState(f,f.state,null),Ao(s,h,f,d),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308)}function wr(s,o){try{var h="",d=o;do h+=km(d),d=d.return;while(d);var f=h}catch(_){f=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:f,digest:null}}function Va(s,o,h){return{value:s,source:null,stack:h??null,digest:o??null}}function ba(s,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Um=typeof WeakMap=="function"?WeakMap:Map;function jc(s,o,h){h=Yn(-1,h),h.tag=3,h.payload={element:null};var d=o.value;return h.callback=function(){Jo||(Jo=!0,gu=d),ba(s,o)},h}function Uc(s,o,h){h=Yn(-1,h),h.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;h.payload=function(){return d(f)},h.callback=function(){ba(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){ba(s,o),typeof d!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),h}function Bc(s,o,h){var d=s.pingCache;if(d===null){d=s.pingCache=new Um;var f=new Set;d.set(o,f)}else f=d.get(o),f===void 0&&(f=new Set,d.set(o,f));f.has(h)||(f.add(h),s=i_.bind(null,s,o,h),o.then(s,s))}function Kc(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Zc(s,o,h,d,f){return s.mode&1?(s.flags|=65536,s.lanes=f,s):(s===o?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Yn(-1,1),o.tag=2,hi(h,o,1))),h.lanes|=1),s)}var Bm=u.ReactCurrentOwner,Tt=!1;function Et(s,o,h,d){o.child=s===null?cc(o,null,h,d):yr(o,s.child,h,d)}function Vc(s,o,h,d,f){h=h.render;var _=o.ref;return Er(o,f),d=Wa(s,o,h,d,_,f),h=Xa(),s!==null&&!Tt?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~f,jn(s,o,f)):(Oe&&h&&Ca(o),o.flags|=1,Et(s,o,d,f),o.child)}function bc(s,o,h,d,f){if(s===null){var _=h.type;return typeof _=="function"&&!Eu(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=_,Hc(s,o,_,d,f)):(s=rl(h.type,null,d,o,o.mode,f),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!(s.lanes&f)){var E=_.memoizedProps;if(h=h.compare,h=h!==null?h:Io,h(E,d)&&s.ref===o.ref)return jn(s,o,f)}return o.flags|=1,s=mi(_,d),s.ref=o.ref,s.return=o,o.child=s}function Hc(s,o,h,d,f){if(s!==null){var _=s.memoizedProps;if(Io(_,d)&&s.ref===o.ref)if(Tt=!1,o.pendingProps=d=_,(s.lanes&f)!==0)s.flags&131072&&(Tt=!0);else return o.lanes=s.lanes,jn(s,o,f)}return Ha(s,o,h,d,f)}function qc(s,o,h){var d=o.pendingProps,f=d.children,_=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Rr,Xt),Xt|=h;else{if(!(h&1073741824))return s=_!==null?_.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Pe(Rr,Xt),Xt|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:h,Pe(Rr,Xt),Xt|=d}else _!==null?(d=_.baseLanes|h,o.memoizedState=null):d=h,Pe(Rr,Xt),Xt|=d;return Et(s,o,f,h),o.child}function Qc(s,o){var h=o.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function Ha(s,o,h,d,f){var _=It(h)?Gi:ht.current;return _=gr(o,_),Er(o,f),h=Wa(s,o,h,d,_,f),d=Xa(),s!==null&&!Tt?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~f,jn(s,o,f)):(Oe&&d&&Ca(o),o.flags|=1,Et(s,o,h,f),o.child)}function Jc(s,o,h,d,f){if(It(h)){var _=!0;po(o)}else _=!1;if(Er(o,f),o.stateNode===null)Xo(s,o),Xc(o,h,d),Za(o,h,d,f),d=!0;else if(s===null){var E=o.stateNode,I=o.memoizedProps;E.props=I;var O=E.context,W=h.contextType;typeof W=="object"&&W!==null?W=qt(W):(W=It(h)?Gi:ht.current,W=gr(o,W));var V=h.getDerivedStateFromProps,oe=typeof V=="function"||typeof E.getSnapshotBeforeUpdate=="function";oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==d||O!==W)&&Yc(o,E,d,W),ui=!1;var U=o.memoizedState;E.state=U,Ao(o,d,E,f),O=o.memoizedState,I!==d||U!==O||Rt.current||ui?(typeof V=="function"&&(Ka(o,h,V,d),O=o.memoizedState),(I=ui||Wc(o,h,I,d,U,O,W))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=O),E.props=d,E.state=O,E.context=W,d=I):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,gc(s,o),I=o.memoizedProps,W=o.type===o.elementType?I:dn(o.type,I),E.props=W,oe=o.pendingProps,U=E.context,O=h.contextType,typeof O=="object"&&O!==null?O=qt(O):(O=It(h)?Gi:ht.current,O=gr(o,O));var Ae=h.getDerivedStateFromProps;(V=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==oe||U!==O)&&Yc(o,E,d,O),ui=!1,U=o.memoizedState,E.state=U,Ao(o,d,E,f);var Te=o.memoizedState;I!==oe||U!==Te||Rt.current||ui?(typeof Ae=="function"&&(Ka(o,h,Ae,d),Te=o.memoizedState),(W=ui||Wc(o,h,W,d,U,Te,O)||!1)?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,Te,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,Te,O)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||I===s.memoizedProps&&U===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&U===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Te),E.props=d,E.state=Te,E.context=O,d=W):(typeof E.componentDidUpdate!="function"||I===s.memoizedProps&&U===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&U===s.memoizedState||(o.flags|=1024),d=!1)}return qa(s,o,h,d,_,f)}function qa(s,o,h,d,f,_){Qc(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return f&&$h(o,h,!1),jn(s,o,_);d=o.stateNode,Bm.current=o;var I=E&&typeof h.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=yr(o,s.child,null,_),o.child=yr(o,null,I,_)):Et(s,o,I,_),o.memoizedState=d.state,f&&$h(o,h,!0),o.child}function $c(s){var o=s.stateNode;o.pendingContext?Qh(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Qh(s,o.context,!1),Fa(s,o.containerInfo)}function ed(s,o,h,d,f){return pr(),Ia(f),o.flags|=256,Et(s,o,h,d),o.child}var Qa={dehydrated:null,treeContext:null,retryLane:0};function Ja(s){return{baseLanes:s,cachePool:null,transitions:null}}function td(s,o,h){var d=o.pendingProps,f=De.current,_=!1,E=(o.flags&128)!==0,I;if((I=E)||(I=s!==null&&s.memoizedState===null?!1:(f&2)!==0),I?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(f|=1),Pe(De,f&1),s===null)return Ra(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?Ve(s)?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=d.children,s=d.fallback,_?(d=o.mode,_=o.child,E={mode:"hidden",children:E},!(d&1)&&_!==null?(_.childLanes=0,_.pendingProps=E):_=sl(E,d,0,null),s=Vi(s,d,h,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=Ja(h),o.memoizedState=Qa,s):$a(o,E));if(f=s.memoizedState,f!==null&&(I=f.dehydrated,I!==null))return Km(s,o,E,d,I,f,h);if(_){_=d.fallback,E=o.mode,f=s.child,I=f.sibling;var O={mode:"hidden",children:d.children};return!(E&1)&&o.child!==f?(d=o.child,d.childLanes=0,d.pendingProps=O,o.deletions=null):(d=mi(f,O),d.subtreeFlags=f.subtreeFlags&14680064),I!==null?_=mi(I,_):(_=Vi(_,E,h,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,E=s.child.memoizedState,E=E===null?Ja(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},_.memoizedState=E,_.childLanes=s.childLanes&~h,o.memoizedState=Qa,d}return _=s.child,s=_.sibling,d=mi(_,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=h),d.return=o,d.sibling=null,s!==null&&(h=o.deletions,h===null?(o.deletions=[s],o.flags|=16):h.push(s)),o.child=d,o.memoizedState=null,d}function $a(s,o){return o=sl({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Wo(s,o,h,d){return d!==null&&Ia(d),yr(o,s.child,null,h),s=$a(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Km(s,o,h,d,f,_,E){if(h)return o.flags&256?(o.flags&=-257,d=Va(Error(a(422))),Wo(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=d.fallback,f=o.mode,d=sl({mode:"visible",children:d.children},f,0,null),_=Vi(_,f,E,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,o.mode&1&&yr(o,s.child,null,E),o.child.memoizedState=Ja(E),o.memoizedState=Qa,_);if(!(o.mode&1))return Wo(s,o,E,null);if(Ve(f))return d=an(f).digest,_=Error(a(419)),d=Va(_,d,void 0),Wo(s,o,E,d);if(h=(E&s.childLanes)!==0,Tt||h){if(d=et,d!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(d.suspendedLanes|E)?0:f,f!==0&&f!==_.retryLane&&(_.retryLane=f,Sn(s,f),$t(d,s,f,-1))}return xu(),d=Va(Error(a(421))),Wo(s,o,E,d)}return Le(f)?(o.flags|=128,o.child=s.child,o=r_.bind(null,s),ha(f,o),null):(s=_.treeContext,rt&&(Ht=am(f),Wt=o,Oe=!0,cn=null,cs=!1,s!==null&&(Vt[bt++]=Wn,Vt[bt++]=Xn,Vt[bt++]=Wi,Wn=s.id,Xn=s.overflow,Wi=o)),o=$a(o,d.children),o.flags|=4096,o)}function nd(s,o,h){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Ma(s.return,o,h)}function eu(s,o,h,d,f){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:f}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=h,_.tailMode=f)}function id(s,o,h){var d=o.pendingProps,f=d.revealOrder,_=d.tail;if(Et(s,o,d.children,h),d=De.current,d&2)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&nd(s,h,o);else if(s.tag===19)nd(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Pe(De,d),!(o.mode&1))o.memoizedState=null;else switch(f){case"forwards":for(h=o.child,f=null;h!==null;)s=h.alternate,s!==null&&Oo(s)===null&&(f=h),h=h.sibling;h=f,h===null?(f=o.child,o.child=null):(f=h.sibling,h.sibling=null),eu(o,!1,f,h,_);break;case"backwards":for(h=null,f=o.child,o.child=null;f!==null;){if(s=f.alternate,s!==null&&Oo(s)===null){o.child=f;break}s=f.sibling,f.sibling=h,h=f,f=s}eu(o,!0,h,null,_);break;case"together":eu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Xo(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function jn(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),Ui|=o.lanes,!(h&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(a(153));if(o.child!==null){for(s=o.child,h=mi(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=mi(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function Zm(s,o,h){switch(o.tag){case 3:$c(o),pr();break;case 5:pc(o);break;case 1:It(o.type)&&po(o);break;case 4:Fa(o,o.stateNode.containerInfo);break;case 10:dc(o,o.type._context,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Pe(De,De.current&1),o.flags|=128,null):h&o.child.childLanes?td(s,o,h):(Pe(De,De.current&1),s=jn(s,o,h),s!==null?s.sibling:null);Pe(De,De.current&1);break;case 19:if(d=(h&o.childLanes)!==0,s.flags&128){if(d)return id(s,o,h);o.flags|=128}var f=o.memoizedState;if(f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Pe(De,De.current),d)break;return null;case 22:case 23:return o.lanes=0,qc(s,o,h)}return jn(s,o,h)}function Tn(s){s.flags|=4}function rd(s,o){if(s!==null&&s.child===o.child)return!0;if(o.flags&16)return!1;for(s=o.child;s!==null;){if(s.flags&12854||s.subtreeFlags&12854)return!1;s=s.sibling}return!0}var xs,Es,Yo,jo;if(Ne)xs=function(s,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)Ee(s,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Es=function(){},Yo=function(s,o,h,d,f){if(s=s.memoizedProps,s!==d){var _=o.stateNode,E=Rn(Qt.current);h=X(_,h,s,d,f,E),(o.updateQueue=h)&&Tn(o)}},jo=function(s,o,h,d){h!==d&&Tn(o)};else if(vn){xs=function(s,o,h,d){for(var f=o.child;f!==null;){if(f.tag===5){var _=f.stateNode;h&&d&&(_=xt(_,f.type,f.memoizedProps,f)),Ee(s,_)}else if(f.tag===6)_=f.stateNode,h&&d&&(_=Gt(_,f.memoizedProps,f)),Ee(s,_);else if(f.tag!==4){if(f.tag===22&&f.memoizedState!==null)_=f.child,_!==null&&(_.return=f),xs(s,f,!0,!0);else if(f.child!==null){f.child.return=f,f=f.child;continue}}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}};var sd=function(s,o,h,d){for(var f=o.child;f!==null;){if(f.tag===5){var _=f.stateNode;h&&d&&(_=xt(_,f.type,f.memoizedProps,f)),ls(s,_)}else if(f.tag===6)_=f.stateNode,h&&d&&(_=Gt(_,f.memoizedProps,f)),ls(s,_);else if(f.tag!==4){if(f.tag===22&&f.memoizedState!==null)_=f.child,_!==null&&(_.return=f),sd(s,f,!0,!0);else if(f.child!==null){f.child.return=f,f=f.child;continue}}if(f===o)break;for(;f.sibling===null;){if(f.return===null||f.return===o)return;f=f.return}f.sibling.return=f.return,f=f.sibling}};Es=function(s,o){var h=o.stateNode;if(!rd(s,o)){s=h.containerInfo;var d=os(s);sd(d,o,!1,!1),h.pendingChildren=d,Tn(o),wt(s,d)}},Yo=function(s,o,h,d,f){var _=s.stateNode,E=s.memoizedProps;if((s=rd(s,o))&&E===d)o.stateNode=_;else{var I=o.stateNode,O=Rn(Qt.current),W=null;E!==d&&(W=X(I,h,E,d,f,O)),s&&W===null?o.stateNode=_:(_=zi(_,W,h,E,d,o,s,I),je(_,h,d,f,O)&&Tn(o),o.stateNode=_,s?Tn(o):xs(_,o,!1,!1))}},jo=function(s,o,h,d){h!==d?(s=Rn(vr.current),h=Rn(Qt.current),o.stateNode=Ue(d,s,h,o),Tn(o)):o.stateNode=s.stateNode}}else Es=function(){},Yo=function(){},jo=function(){};function vs(s,o){if(!Oe)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function dt(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,d=0;if(o)for(var f=s.child;f!==null;)h|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)h|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=d,s.childLanes=h,o}function Vm(s,o,h){var d=o.pendingProps;switch(wa(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(o),null;case 1:return It(o.type)&&_o(),dt(o),null;case 3:return h=o.stateNode,Cr(),Me(Rt),Me(ht),Na(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Ro(o)?Tn(o):s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,cn!==null&&(pu(cn),cn=null))),Es(s,o),dt(o),null;case 5:Da(o),h=Rn(vr.current);var f=o.type;if(s!==null&&o.stateNode!=null)Yo(s,o,f,d,h),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(a(166));return dt(o),null}if(s=Rn(Qt.current),Ro(o)){if(!rt)throw Error(a(175));s=um(o.stateNode,o.type,o.memoizedProps,h,s,o,!cs),o.updateQueue=s,s!==null&&Tn(o)}else{var _=se(f,d,h,s,o);xs(_,o,!1,!1),o.stateNode=_,je(_,f,d,h,s)&&Tn(o)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return dt(o),null;case 6:if(s&&o.stateNode!=null)jo(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(a(166));if(s=Rn(vr.current),h=Rn(Qt.current),Ro(o)){if(!rt)throw Error(a(176));if(s=o.stateNode,h=o.memoizedProps,(d=hm(s,h,o,!cs))&&(f=Wt,f!==null))switch(f.tag){case 3:ym(f.stateNode.containerInfo,s,h,(f.mode&1)!==0);break;case 5:xm(f.type,f.memoizedProps,f.stateNode,s,h,(f.mode&1)!==0)}d&&Tn(o)}else o.stateNode=Ue(d,s,h,o)}return dt(o),null;case 13:if(Me(De),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&o.mode&1&&!(o.flags&128))ac(),pr(),o.flags|=98560,f=!1;else if(f=Ro(o),d!==null&&d.dehydrated!==null){if(s===null){if(!f)throw Error(a(318));if(!rt)throw Error(a(344));if(f=o.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));cm(f,o)}else pr(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;dt(o),f=!1}else cn!==null&&(pu(cn),cn=null),f=!0;if(!f)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(h=d!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(s===null||De.current&1?He===0&&(He=3):xu())),o.updateQueue!==null&&(o.flags|=4),dt(o),null);case 4:return Cr(),Es(s,o),s===null&&Fi(o.stateNode.containerInfo),dt(o),null;case 10:return La(o.type._context),dt(o),null;case 17:return It(o.type)&&_o(),dt(o),null;case 19:if(Me(De),f=o.memoizedState,f===null)return dt(o),null;if(d=(o.flags&128)!==0,_=f.rendering,_===null)if(d)vs(f,!1);else{if(He!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(_=Oo(s),_!==null){for(o.flags|=128,vs(f,!1),s=_.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),o.subtreeFlags=0,s=h,h=o.child;h!==null;)d=h,f=s,d.flags&=14680066,_=d.alternate,_===null?(d.childLanes=0,d.lanes=f,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,f=_.dependencies,d.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),h=h.sibling;return Pe(De,De.current&1|2),o.child}s=s.sibling}f.tail!==null&&Je()>fu&&(o.flags|=128,d=!0,vs(f,!1),o.lanes=4194304)}else{if(!d)if(s=Oo(_),s!==null){if(o.flags|=128,d=!0,s=s.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),vs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!Oe)return dt(o),null}else 2*Je()-f.renderingStartTime>fu&&h!==1073741824&&(o.flags|=128,d=!0,vs(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(s=f.last,s!==null?s.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=Je(),o.sibling=null,s=De.current,Pe(De,d?s&1|2:s&1),o):(dt(o),null);case 22:case 23:return yu(),h=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?Xt&1073741824&&(dt(o),Ne&&o.subtreeFlags&6&&(o.flags|=8192)):dt(o),null;case 24:return null;case 25:return null}throw Error(a(156,o.tag))}function bm(s,o){switch(wa(o),o.tag){case 1:return It(o.type)&&_o(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Cr(),Me(Rt),Me(ht),Na(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Da(o),null;case 13:if(Me(De),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(a(340));pr()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Me(De),null;case 4:return Cr(),null;case 10:return La(o.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var Uo=!1,ft=!1,Hm=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Sr(s,o){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(d){Fe(s,o,d)}else h.current=null}function tu(s,o,h){try{h()}catch(d){Fe(s,o,d)}}var od=!1;function qm(s,o){for(Ie(s.containerInfo),Z=o;Z!==null;)if(s=Z,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Z=o;else for(;Z!==null;){s=Z;try{var h=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var d=h.memoizedProps,f=h.memoizedState,_=s.stateNode,E=_.getSnapshotBeforeUpdate(s.elementType===s.type?d:dn(s.type,d),f);_.__reactInternalSnapshotBeforeUpdate=E}break;case 3:Ne&&Ni(s.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(I){Fe(s,s.return,I)}if(o=s.sibling,o!==null){o.return=s.return,Z=o;break}Z=s.return}return h=od,od=!1,h}function Cs(s,o,h){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&s)===s){var _=f.destroy;f.destroy=void 0,_!==void 0&&tu(o,h,_)}f=f.next}while(f!==d)}}function Bo(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&s)===s){var d=h.create;h.destroy=d()}h=h.next}while(h!==o)}}function nu(s){var o=s.ref;if(o!==null){var h=s.stateNode;switch(s.tag){case 5:s=Y(h);break;default:s=h}typeof o=="function"?o(s):o.current=s}}function ld(s){var o=s.alternate;o!==null&&(s.alternate=null,ld(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ct(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function ad(s){return s.tag===5||s.tag===3||s.tag===4}function ud(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ad(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function iu(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?aa(h,s,o):dr(h,s);else if(d!==4&&(s=s.child,s!==null))for(iu(s,o,h),s=s.sibling;s!==null;)iu(s,o,h),s=s.sibling}function ru(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?ns(h,s,o):cr(h,s);else if(d!==4&&(s=s.child,s!==null))for(ru(s,o,h),s=s.sibling;s!==null;)ru(s,o,h),s=s.sibling}var st=null,fn=!1;function Pn(s,o,h){for(h=h.child;h!==null;)su(s,o,h),h=h.sibling}function su(s,o,h){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(vo,h)}catch{}switch(h.tag){case 5:ft||Sr(h,o);case 6:if(Ne){var d=st,f=fn;st=null,Pn(s,o,h),st=d,fn=f,st!==null&&(fn?fo(st,h.stateNode):ua(st,h.stateNode))}else Pn(s,o,h);break;case 18:Ne&&st!==null&&(fn?_m(st,h.stateNode):mm(st,h.stateNode));break;case 4:Ne?(d=st,f=fn,st=h.stateNode.containerInfo,fn=!0,Pn(s,o,h),st=d,fn=f):(vn&&(d=h.stateNode.containerInfo,f=os(d),sn(d,f)),Pn(s,o,h));break;case 0:case 11:case 14:case 15:if(!ft&&(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var _=f,E=_.destroy;_=_.tag,E!==void 0&&(_&2||_&4)&&tu(h,o,E),f=f.next}while(f!==d)}Pn(s,o,h);break;case 1:if(!ft&&(Sr(h,o),d=h.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(I){Fe(h,o,I)}Pn(s,o,h);break;case 21:Pn(s,o,h);break;case 22:h.mode&1?(ft=(d=ft)||h.memoizedState!==null,Pn(s,o,h),ft=d):Pn(s,o,h);break;default:Pn(s,o,h)}}function hd(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new Hm),o.forEach(function(d){var f=s_.bind(null,s,d);h.has(d)||(h.add(d),d.then(f,f))})}}function gn(s,o){var h=o.deletions;if(h!==null)for(var d=0;d<h.length;d++){var f=h[d];try{var _=s,E=o;if(Ne){var I=E;e:for(;I!==null;){switch(I.tag){case 5:st=I.stateNode,fn=!1;break e;case 3:st=I.stateNode.containerInfo,fn=!0;break e;case 4:st=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(st===null)throw Error(a(160));su(_,E,f),st=null,fn=!1}else su(_,E,f);var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(W){Fe(f,o,W)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)cd(o,s),o=o.sibling}function cd(s,o){var h=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(gn(o,s),Ln(s),d&4){try{Cs(3,s,s.return),Bo(3,s)}catch(U){Fe(s,s.return,U)}try{Cs(5,s,s.return)}catch(U){Fe(s,s.return,U)}}break;case 1:gn(o,s),Ln(s),d&512&&h!==null&&Sr(h,h.return);break;case 5:if(gn(o,s),Ln(s),d&512&&h!==null&&Sr(h,h.return),Ne){if(s.flags&32){var f=s.stateNode;try{is(f)}catch(U){Fe(s,s.return,U)}}if(d&4&&(f=s.stateNode,f!=null)){var _=s.memoizedProps;if(h=h!==null?h.memoizedProps:_,d=s.type,o=s.updateQueue,s.updateQueue=null,o!==null)try{co(f,o,d,h,_,s)}catch(U){Fe(s,s.return,U)}}}break;case 6:if(gn(o,s),Ln(s),d&4&&Ne){if(s.stateNode===null)throw Error(a(162));f=s.stateNode,_=s.memoizedProps,h=h!==null?h.memoizedProps:_;try{la(f,h,_)}catch(U){Fe(s,s.return,U)}}break;case 3:if(gn(o,s),Ln(s),d&4){if(Ne&&rt&&h!==null&&h.memoizedState.isDehydrated)try{fm(o.containerInfo)}catch(U){Fe(s,s.return,U)}if(vn){f=o.containerInfo,_=o.pendingChildren;try{sn(f,_)}catch(U){Fe(s,s.return,U)}}}break;case 4:if(gn(o,s),Ln(s),d&4&&vn){_=s.stateNode,f=_.containerInfo,_=_.pendingChildren;try{sn(f,_)}catch(U){Fe(s,s.return,U)}}break;case 13:gn(o,s),Ln(s),f=s.child,f.flags&8192&&(_=f.memoizedState!==null,f.stateNode.isHidden=_,!_||f.alternate!==null&&f.alternate.memoizedState!==null||(du=Je())),d&4&&hd(s);break;case 22:var E=h!==null&&h.memoizedState!==null;if(s.mode&1?(ft=(h=ft)||E,gn(o,s),ft=h):gn(o,s),Ln(s),d&8192){if(h=s.memoizedState!==null,(s.stateNode.isHidden=h)&&!E&&s.mode&1)for(Z=s,d=s.child;d!==null;){for(o=Z=d;Z!==null;){E=Z;var I=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Cs(4,E,E.return);break;case 1:Sr(E,E.return);var O=E.stateNode;if(typeof O.componentWillUnmount=="function"){var W=E,V=E.return;try{var oe=W;O.props=oe.memoizedProps,O.state=oe.memoizedState,O.componentWillUnmount()}catch(U){Fe(W,V,U)}}break;case 5:Sr(E,E.return);break;case 22:if(E.memoizedState!==null){gd(o);continue}}I!==null?(I.return=E,Z=I):gd(o)}d=d.sibling}if(Ne){e:if(d=null,Ne)for(o=s;;){if(o.tag===5){if(d===null){d=o;try{f=o.stateNode,h?rs(f):ss(o.stateNode,o.memoizedProps)}catch(U){Fe(s,s.return,U)}}}else if(o.tag===6){if(d===null)try{_=o.stateNode,h?go(_):ki(_,o.memoizedProps)}catch(U){Fe(s,s.return,U)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}}}break;case 19:gn(o,s),Ln(s),d&4&&hd(s);break;case 21:break;default:gn(o,s),Ln(s)}}function Ln(s){var o=s.flags;if(o&2){try{if(Ne){e:{for(var h=s.return;h!==null;){if(ad(h)){var d=h;break e}h=h.return}throw Error(a(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(is(f),d.flags&=-33);var _=ud(s);ru(s,_,f);break;case 3:case 4:var E=d.stateNode.containerInfo,I=ud(s);iu(s,I,E);break;default:throw Error(a(161))}}}catch(O){Fe(s,s.return,O)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Qm(s,o,h){Z=s,dd(s)}function dd(s,o,h){for(var d=(s.mode&1)!==0;Z!==null;){var f=Z,_=f.child;if(f.tag===22&&d){var E=f.memoizedState!==null||Uo;if(!E){var I=f.alternate,O=I!==null&&I.memoizedState!==null||ft;I=Uo;var W=ft;if(Uo=E,(ft=O)&&!W)for(Z=f;Z!==null;)E=Z,O=E.child,E.tag===22&&E.memoizedState!==null?md(f):O!==null?(O.return=E,Z=O):md(f);for(;_!==null;)Z=_,dd(_),_=_.sibling;Z=f,Uo=I,ft=W}fd(s)}else f.subtreeFlags&8772&&_!==null?(_.return=f,Z=_):fd(s)}}function fd(s){for(;Z!==null;){var o=Z;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:ft||Bo(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!ft)if(h===null)d.componentDidMount();else{var f=o.elementType===o.type?h.memoizedProps:dn(o.type,h.memoizedProps);d.componentDidUpdate(f,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&_c(o,_,d);break;case 3:var E=o.updateQueue;if(E!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=Y(o.child.stateNode);break;case 1:h=o.child.stateNode}_c(o,E,h)}break;case 5:var I=o.stateNode;h===null&&o.flags&4&&ho(I,o.type,o.memoizedProps,o);break;case 6:break;case 4:break;case 12:break;case 13:if(rt&&o.memoizedState===null){var O=o.alternate;if(O!==null){var W=O.memoizedState;if(W!==null){var V=W.dehydrated;V!==null&&gm(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}ft||o.flags&512&&nu(o)}catch(oe){Fe(o,o.return,oe)}}if(o===s){Z=null;break}if(h=o.sibling,h!==null){h.return=o.return,Z=h;break}Z=o.return}}function gd(s){for(;Z!==null;){var o=Z;if(o===s){Z=null;break}var h=o.sibling;if(h!==null){h.return=o.return,Z=h;break}Z=o.return}}function md(s){for(;Z!==null;){var o=Z;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Bo(4,o)}catch(O){Fe(o,h,O)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var f=o.return;try{d.componentDidMount()}catch(O){Fe(o,f,O)}}var _=o.return;try{nu(o)}catch(O){Fe(o,_,O)}break;case 5:var E=o.return;try{nu(o)}catch(O){Fe(o,E,O)}}}catch(O){Fe(o,o.return,O)}if(o===s){Z=null;break}var I=o.sibling;if(I!==null){I.return=o.return,Z=I;break}Z=o.return}}var Ko=0,Zo=1,Vo=2,bo=3,Ho=4;if(typeof Symbol=="function"&&Symbol.for){var ws=Symbol.for;Ko=ws("selector.component"),Zo=ws("selector.has_pseudo_class"),Vo=ws("selector.role"),bo=ws("selector.test_id"),Ho=ws("selector.text")}function ou(s){var o=$r(s);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(a(364));return o}if(s=Di(s),s===null)throw Error(a(362));return s.stateNode.current}function lu(s,o){switch(o.$$typeof){case Ko:if(s.type===o.value)return!0;break;case Zo:e:{o=o.value,s=[s,0];for(var h=0;h<s.length;){var d=s[h++],f=s[h++],_=o[f];if(d.tag!==5||!Zt(d)){for(;_!=null&&lu(d,_);)f++,_=o[f];if(f===o.length){o=!0;break e}else for(d=d.child;d!==null;)s.push(d,f),d=d.sibling}}o=!1}return o;case Vo:if(s.tag===5&&Be(s.stateNode,o.value))return!0;break;case Ho:if((s.tag===5||s.tag===6)&&(s=oi(s),s!==null&&0<=s.indexOf(o.value)))return!0;break;case bo:if(s.tag===5&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function au(s){switch(s.$$typeof){case Ko:return"<"+(N(s.value)||"Unknown")+">";case Zo:return":has("+(au(s)||"")+")";case Vo:return'[role="'+s.value+'"]';case Ho:return'"'+s.value+'"';case bo:return'[data-testname="'+s.value+'"]';default:throw Error(a(365))}}function _d(s,o){var h=[];s=[s,0];for(var d=0;d<s.length;){var f=s[d++],_=s[d++],E=o[_];if(f.tag!==5||!Zt(f)){for(;E!=null&&lu(f,E);)_++,E=o[_];if(_===o.length)h.push(f);else for(f=f.child;f!==null;)s.push(f,_),f=f.sibling}}return h}function uu(s,o){if(!Kt)throw Error(a(363));s=ou(s),s=_d(s,o),o=[],s=Array.from(s);for(var h=0;h<s.length;){var d=s[h++];if(d.tag===5)Zt(d)||o.push(d.stateNode);else for(d=d.child;d!==null;)s.push(d),d=d.sibling}return o}var Jm=Math.ceil,qo=u.ReactCurrentDispatcher,hu=u.ReactCurrentOwner,Xe=u.ReactCurrentBatchConfig,fe=0,et=null,Ke=null,ot=0,Xt=0,Rr=li(0),He=0,Ss=null,Ui=0,Qo=0,cu=0,Rs=null,Pt=null,du=0,fu=1/0,Un=null;function Ir(){fu=Je()+500}var Jo=!1,gu=null,ci=null,$o=!1,di=null,el=0,Is=0,mu=null,tl=-1,nl=0;function gt(){return fe&6?Je():tl!==-1?tl:tl=Je()}function fi(s){return s.mode&1?fe&2&&ot!==0?ot&-ot:Dm.transition!==null?(nl===0&&(nl=ec()),nl):(s=_e,s!==0?s:Nn()):1}function $t(s,o,h,d){if(50<Is)throw Is=0,mu=null,Error(a(185));hs(s,h,d),(!(fe&2)||s!==et)&&(s===et&&(!(fe&2)&&(Qo|=h),He===4&&gi(s,ot)),Lt(s,d),h===1&&fe===0&&!(o.mode&1)&&(Ir(),Co&&wn()))}function Lt(s,o){var h=s.callbackNode;Rm(s,o);var d=Eo(s,s===et?ot:0);if(d===0)h!==null&&nc(h),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(h!=null&&nc(h),o===1)s.tag===0?Fm(yd.bind(null,s)):ic(yd.bind(null,s)),Bt?si(function(){!(fe&6)&&wn()}):ya(xa,wn),h=null;else{switch(tc(d)){case 1:h=xa;break;case 4:h=Lm;break;case 16:h=Ea;break;case 536870912:h=Mm;break;default:h=Ea}h=Td(h,pd.bind(null,s))}s.callbackPriority=o,s.callbackNode=h}}function pd(s,o){if(tl=-1,nl=0,fe&6)throw Error(a(327));var h=s.callbackNode;if(Zi()&&s.callbackNode!==h)return null;var d=Eo(s,s===et?ot:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=il(s,d);else{o=d;var f=fe;fe|=2;var _=vd();(et!==s||ot!==o)&&(Un=null,Ir(),Bi(s,o));do try{t_();break}catch(I){Ed(s,I)}while(!0);Pa(),qo.current=_,fe=f,Ke!==null?o=0:(et=null,ot=0,o=He)}if(o!==0){if(o===2&&(f=ma(s),f!==0&&(d=f,o=_u(s,f))),o===1)throw h=Ss,Bi(s,0),gi(s,d),Lt(s,Je()),h;if(o===6)gi(s,d);else{if(f=s.current.alternate,!(d&30)&&!$m(f)&&(o=il(s,d),o===2&&(_=ma(s),_!==0&&(d=_,o=_u(s,_))),o===1))throw h=Ss,Bi(s,0),gi(s,d),Lt(s,Je()),h;switch(s.finishedWork=f,s.finishedLanes=d,o){case 0:case 1:throw Error(a(345));case 2:Ki(s,Pt,Un);break;case 3:if(gi(s,d),(d&130023424)===d&&(o=du+500-Je(),10<o)){if(Eo(s,0)!==0)break;if(f=s.suspendedLanes,(f&d)!==d){gt(),s.pingedLanes|=s.suspendedLanes&f;break}s.timeoutHandle=We(Ki.bind(null,s,Pt,Un),o);break}Ki(s,Pt,Un);break;case 4:if(gi(s,d),(d&4194240)===d)break;for(o=s.eventTimes,f=-1;0<d;){var E=31-un(d);_=1<<E,E=o[E],E>f&&(f=E),d&=~_}if(d=f,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Jm(d/1960))-d,10<d){s.timeoutHandle=We(Ki.bind(null,s,Pt,Un),d);break}Ki(s,Pt,Un);break;case 5:Ki(s,Pt,Un);break;default:throw Error(a(329))}}}return Lt(s,Je()),s.callbackNode===h?pd.bind(null,s):null}function _u(s,o){var h=Rs;return s.current.memoizedState.isDehydrated&&(Bi(s,o).flags|=256),s=il(s,o),s!==2&&(o=Pt,Pt=h,o!==null&&pu(o)),s}function pu(s){Pt===null?Pt=s:Pt.push.apply(Pt,s)}function $m(s){for(var o=s;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var d=0;d<h.length;d++){var f=h[d],_=f.getSnapshot;f=f.value;try{if(!hn(_(),f))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function gi(s,o){for(o&=~cu,o&=~Qo,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var h=31-un(o),d=1<<h;s[h]=-1,o&=~d}}function yd(s){if(fe&6)throw Error(a(327));Zi();var o=Eo(s,0);if(!(o&1))return Lt(s,Je()),null;var h=il(s,o);if(s.tag!==0&&h===2){var d=ma(s);d!==0&&(o=d,h=_u(s,d))}if(h===1)throw h=Ss,Bi(s,0),gi(s,o),Lt(s,Je()),h;if(h===6)throw Error(a(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Ki(s,Pt,Un),Lt(s,Je()),null}function xd(s){di!==null&&di.tag===0&&!(fe&6)&&Zi();var o=fe;fe|=1;var h=Xe.transition,d=_e;try{if(Xe.transition=null,_e=1,s)return s()}finally{_e=d,Xe.transition=h,fe=o,!(fe&6)&&wn()}}function yu(){Xt=Rr.current,Me(Rr)}function Bi(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==zt&&(s.timeoutHandle=zt,Ut(h)),Ke!==null)for(h=Ke.return;h!==null;){var d=h;switch(wa(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&_o();break;case 3:Cr(),Me(Rt),Me(ht),Na();break;case 5:Da(d);break;case 4:Cr();break;case 13:Me(De);break;case 19:Me(De);break;case 10:La(d.type._context);break;case 22:case 23:yu()}h=h.return}if(et=s,Ke=s=mi(s.current,null),ot=Xt=o,He=0,Ss=null,cu=Qo=Ui=0,Pt=Rs=null,Yi!==null){for(o=0;o<Yi.length;o++)if(h=Yi[o],d=h.interleaved,d!==null){h.interleaved=null;var f=d.next,_=h.pending;if(_!==null){var E=_.next;_.next=f,d.next=E}h.pending=d}Yi=null}return s}function Ed(s,o){do{var h=Ke;try{if(Pa(),Fo.current=zo,Do){for(var d=ke.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Do=!1}if(ji=0,$e=be=ke=null,ms=!1,_s=0,hu.current=null,h===null||h.return===null){He=1,Ss=o,Ke=null;break}e:{var _=s,E=h.return,I=h,O=o;if(o=ot,I.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,V=I,oe=V.tag;if(!(V.mode&1)&&(oe===0||oe===11||oe===15)){var U=V.alternate;U?(V.updateQueue=U.updateQueue,V.memoizedState=U.memoizedState,V.lanes=U.lanes):(V.updateQueue=null,V.memoizedState=null)}var Ae=Kc(E);if(Ae!==null){Ae.flags&=-257,Zc(Ae,E,I,_,o),Ae.mode&1&&Bc(_,W,o),o=Ae,O=W;var Te=o.updateQueue;if(Te===null){var Mt=new Set;Mt.add(O),o.updateQueue=Mt}else Te.add(O);break e}else{if(!(o&1)){Bc(_,W,o),xu();break e}O=Error(a(426))}}else if(Oe&&I.mode&1){var Bn=Kc(E);if(Bn!==null){!(Bn.flags&65536)&&(Bn.flags|=256),Zc(Bn,E,I,_,o),Ia(wr(O,I));break e}}_=O=wr(O,I),He!==4&&(He=2),Rs===null?Rs=[_]:Rs.push(_),_=E;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var A=jc(_,O,o);mc(_,A);break e;case 1:I=O;var T=_.type,F=_.stateNode;if(!(_.flags&128)&&(typeof T.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ci===null||!ci.has(F)))){_.flags|=65536,o&=-o,_.lanes|=o;var B=Uc(_,I,o);mc(_,B);break e}}_=_.return}while(_!==null)}wd(h)}catch(J){o=J,Ke===h&&h!==null&&(Ke=h=h.return);continue}break}while(!0)}function vd(){var s=qo.current;return qo.current=zo,s===null?zo:s}function xu(){(He===0||He===3||He===2)&&(He=4),et===null||!(Ui&268435455)&&!(Qo&268435455)||gi(et,ot)}function il(s,o){var h=fe;fe|=2;var d=vd();(et!==s||ot!==o)&&(Un=null,Bi(s,o));do try{e_();break}catch(f){Ed(s,f)}while(!0);if(Pa(),fe=h,qo.current=d,Ke!==null)throw Error(a(261));return et=null,ot=0,He}function e_(){for(;Ke!==null;)Cd(Ke)}function t_(){for(;Ke!==null&&!Tm();)Cd(Ke)}function Cd(s){var o=Id(s.alternate,s,Xt);s.memoizedProps=s.pendingProps,o===null?wd(s):Ke=o,hu.current=null}function wd(s){var o=s;do{var h=o.alternate;if(s=o.return,o.flags&32768){if(h=bm(h,o),h!==null){h.flags&=32767,Ke=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{He=6,Ke=null;return}}else if(h=Vm(h,o,Xt),h!==null){Ke=h;return}if(o=o.sibling,o!==null){Ke=o;return}Ke=o=s}while(o!==null);He===0&&(He=5)}function Ki(s,o,h){var d=_e,f=Xe.transition;try{Xe.transition=null,_e=1,n_(s,o,h,d)}finally{Xe.transition=f,_e=d}return null}function n_(s,o,h,d){do Zi();while(di!==null);if(fe&6)throw Error(a(327));h=s.finishedWork;var f=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(a(177));s.callbackNode=null,s.callbackPriority=0;var _=h.lanes|h.childLanes;if(Im(s,_),s===et&&(Ke=et=null,ot=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||$o||($o=!0,Td(Ea,function(){return Zi(),null})),_=(h.flags&15990)!==0,h.subtreeFlags&15990||_){_=Xe.transition,Xe.transition=null;var E=_e;_e=1;var I=fe;fe|=4,hu.current=null,qm(s,h),cd(h,s),ee(s.containerInfo),s.current=h,Qm(h),Pm(),fe=I,_e=E,Xe.transition=_}else s.current=h;if($o&&($o=!1,di=s,el=f),_=s.pendingLanes,_===0&&(ci=null),Am(h.stateNode),Lt(s,Je()),o!==null)for(d=s.onRecoverableError,h=0;h<o.length;h++)f=o[h],d(f.value,{componentStack:f.stack,digest:f.digest});if(Jo)throw Jo=!1,s=gu,gu=null,s;return el&1&&s.tag!==0&&Zi(),_=s.pendingLanes,_&1?s===mu?Is++:(Is=0,mu=s):Is=0,wn(),null}function Zi(){if(di!==null){var s=tc(el),o=Xe.transition,h=_e;try{if(Xe.transition=null,_e=16>s?16:s,di===null)var d=!1;else{if(s=di,di=null,el=0,fe&6)throw Error(a(331));var f=fe;for(fe|=4,Z=s.current;Z!==null;){var _=Z,E=_.child;if(Z.flags&16){var I=_.deletions;if(I!==null){for(var O=0;O<I.length;O++){var W=I[O];for(Z=W;Z!==null;){var V=Z;switch(V.tag){case 0:case 11:case 15:Cs(8,V,_)}var oe=V.child;if(oe!==null)oe.return=V,Z=oe;else for(;Z!==null;){V=Z;var U=V.sibling,Ae=V.return;if(ld(V),V===W){Z=null;break}if(U!==null){U.return=Ae,Z=U;break}Z=Ae}}}var Te=_.alternate;if(Te!==null){var Mt=Te.child;if(Mt!==null){Te.child=null;do{var Bn=Mt.sibling;Mt.sibling=null,Mt=Bn}while(Mt!==null)}}Z=_}}if(_.subtreeFlags&2064&&E!==null)E.return=_,Z=E;else e:for(;Z!==null;){if(_=Z,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Cs(9,_,_.return)}var A=_.sibling;if(A!==null){A.return=_.return,Z=A;break e}Z=_.return}}var T=s.current;for(Z=T;Z!==null;){E=Z;var F=E.child;if(E.subtreeFlags&2064&&F!==null)F.return=E,Z=F;else e:for(E=T;Z!==null;){if(I=Z,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Bo(9,I)}}catch(J){Fe(I,I.return,J)}if(I===E){Z=null;break e}var B=I.sibling;if(B!==null){B.return=I.return,Z=B;break e}Z=I.return}}if(fe=f,wn(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(vo,s)}catch{}d=!0}return d}finally{_e=h,Xe.transition=o}}return!1}function Sd(s,o,h){o=wr(h,o),o=jc(s,o,1),s=hi(s,o,1),o=gt(),s!==null&&(hs(s,1,o),Lt(s,o))}function Fe(s,o,h){if(s.tag===3)Sd(s,s,h);else for(;o!==null;){if(o.tag===3){Sd(o,s,h);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ci===null||!ci.has(d))){s=wr(h,s),s=Uc(o,s,1),o=hi(o,s,1),s=gt(),o!==null&&(hs(o,1,s),Lt(o,s));break}}o=o.return}}function i_(s,o,h){var d=s.pingCache;d!==null&&d.delete(o),o=gt(),s.pingedLanes|=s.suspendedLanes&h,et===s&&(ot&h)===h&&(He===4||He===3&&(ot&130023424)===ot&&500>Je()-du?Bi(s,0):cu|=h),Lt(s,o)}function Rd(s,o){o===0&&(s.mode&1?(o=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):o=1);var h=gt();s=Sn(s,o),s!==null&&(hs(s,o,h),Lt(s,h))}function r_(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),Rd(s,h)}function s_(s,o){var h=0;switch(s.tag){case 13:var d=s.stateNode,f=s.memoizedState;f!==null&&(h=f.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(a(314))}d!==null&&d.delete(o),Rd(s,h)}var Id;Id=function(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps||Rt.current)Tt=!0;else{if(!(s.lanes&h)&&!(o.flags&128))return Tt=!1,Zm(s,o,h);Tt=!!(s.flags&131072)}else Tt=!1,Oe&&o.flags&1048576&&rc(o,So,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Xo(s,o),s=o.pendingProps;var f=gr(o,ht.current);Er(o,h),f=Wa(null,o,d,s,f,h);var _=Xa();return o.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,It(d)?(_=!0,po(o)):_=!1,o.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Oa(o),f.updater=Go,o.stateNode=f,f._reactInternals=o,Za(o,d,s,h),o=qa(null,o,d,!0,_,h)):(o.tag=0,Oe&&_&&Ca(o),Et(null,o,f,h),o=o.child),o;case 16:d=o.elementType;e:{switch(Xo(s,o),s=o.pendingProps,f=d._init,d=f(d._payload),o.type=d,f=o.tag=l_(d),s=dn(d,s),f){case 0:o=Ha(null,o,d,s,h);break e;case 1:o=Jc(null,o,d,s,h);break e;case 11:o=Vc(null,o,d,s,h);break e;case 14:o=bc(null,o,d,dn(d.type,s),h);break e}throw Error(a(306,d,""))}return o;case 0:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:dn(d,f),Ha(s,o,d,f,h);case 1:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:dn(d,f),Jc(s,o,d,f,h);case 3:e:{if($c(o),s===null)throw Error(a(387));d=o.pendingProps,_=o.memoizedState,f=_.element,gc(s,o),Ao(o,d,null,h);var E=o.memoizedState;if(d=E.element,rt&&_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){f=wr(Error(a(423)),o),o=ed(s,o,d,h,f);break e}else if(d!==f){f=wr(Error(a(424)),o),o=ed(s,o,d,h,f);break e}else for(rt&&(Ht=lm(o.stateNode.containerInfo),Wt=o,Oe=!0,cn=null,cs=!1),h=cc(o,null,d,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(pr(),d===f){o=jn(s,o,h);break e}Et(s,o,d,h)}o=o.child}return o;case 5:return pc(o),s===null&&Ra(o),d=o.type,f=o.pendingProps,_=s!==null?s.memoizedProps:null,E=f.children,Qe(d,f)?E=null:_!==null&&Qe(d,_)&&(o.flags|=32),Qc(s,o),Et(s,o,E,h),o.child;case 6:return s===null&&Ra(o),null;case 13:return td(s,o,h);case 4:return Fa(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=yr(o,null,d,h):Et(s,o,d,h),o.child;case 11:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:dn(d,f),Vc(s,o,d,f,h);case 7:return Et(s,o,o.pendingProps,h),o.child;case 8:return Et(s,o,o.pendingProps.children,h),o.child;case 12:return Et(s,o,o.pendingProps.children,h),o.child;case 10:e:{if(d=o.type._context,f=o.pendingProps,_=o.memoizedProps,E=f.value,dc(o,d,E),_!==null)if(hn(_.value,E)){if(_.children===f.children&&!Rt.current){o=jn(s,o,h);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var I=_.dependencies;if(I!==null){E=_.child;for(var O=I.firstContext;O!==null;){if(O.context===d){if(_.tag===1){O=Yn(-1,h&-h),O.tag=2;var W=_.updateQueue;if(W!==null){W=W.shared;var V=W.pending;V===null?O.next=O:(O.next=V.next,V.next=O),W.pending=O}}_.lanes|=h,O=_.alternate,O!==null&&(O.lanes|=h),Ma(_.return,h,o),I.lanes|=h;break}O=O.next}}else if(_.tag===10)E=_.type===o.type?null:_.child;else if(_.tag===18){if(E=_.return,E===null)throw Error(a(341));E.lanes|=h,I=E.alternate,I!==null&&(I.lanes|=h),Ma(E,h,o),E=_.sibling}else E=_.child;if(E!==null)E.return=_;else for(E=_;E!==null;){if(E===o){E=null;break}if(_=E.sibling,_!==null){_.return=E.return,E=_;break}E=E.return}_=E}Et(s,o,f.children,h),o=o.child}return o;case 9:return f=o.type,d=o.pendingProps.children,Er(o,h),f=qt(f),d=d(f),o.flags|=1,Et(s,o,d,h),o.child;case 14:return d=o.type,f=dn(d,o.pendingProps),f=dn(d.type,f),bc(s,o,d,f,h);case 15:return Hc(s,o,o.type,o.pendingProps,h);case 17:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:dn(d,f),Xo(s,o),o.tag=1,It(d)?(s=!0,po(o)):s=!1,Er(o,h),Xc(o,d,f),Za(o,d,f,h),qa(null,o,d,!0,s,h);case 19:return id(s,o,h);case 22:return qc(s,o,h)}throw Error(a(156,o.tag))};function Td(s,o){return ya(s,o)}function o_(s,o,h,d){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(s,o,h,d){return new o_(s,o,h,d)}function Eu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function l_(s){if(typeof s=="function")return Eu(s)?1:0;if(s!=null){if(s=s.$$typeof,s===C)return 11;if(s===R)return 14}return 2}function mi(s,o){var h=s.alternate;return h===null?(h=en(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function rl(s,o,h,d,f,_){var E=2;if(d=s,typeof s=="function")Eu(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case g:return Vi(h.children,f,_,o);case p:E=8,f|=8;break;case y:return s=en(12,h,o,f|2),s.elementType=y,s.lanes=_,s;case w:return s=en(13,h,o,f),s.elementType=w,s.lanes=_,s;case S:return s=en(19,h,o,f),s.elementType=S,s.lanes=_,s;case L:return sl(h,f,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case x:E=10;break e;case v:E=9;break e;case C:E=11;break e;case R:E=14;break e;case P:E=16,d=null;break e}throw Error(a(130,s==null?s:typeof s,""))}return o=en(E,h,o,f),o.elementType=s,o.type=d,o.lanes=_,o}function Vi(s,o,h,d){return s=en(7,s,d,o),s.lanes=h,s}function sl(s,o,h,d){return s=en(22,s,d,o),s.elementType=L,s.lanes=h,s.stateNode={isHidden:!1},s}function vu(s,o,h){return s=en(6,s,null,o),s.lanes=h,s}function Cu(s,o,h){return o=en(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function a_(s,o,h,d,f){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=zt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=d,this.onRecoverableError=f,rt&&(this.mutableSourceEagerHydrationData=null)}function Pd(s,o,h,d,f,_,E,I,O){return s=new a_(s,o,h,I,O),o===1?(o=1,_===!0&&(o|=8)):o=0,_=en(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:d,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(_),s}function Ld(s){if(!s)return ai;s=s._reactInternals;e:{if(z(s)!==s||s.tag!==1)throw Error(a(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(It(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(a(171))}if(s.tag===1){var h=s.type;if(It(h))return Jh(s,h,o)}return o}function Md(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=b(o),s===null?null:s.stateNode}function Ad(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function ol(s,o){Ad(s,o),(s=s.alternate)&&Ad(s,o)}function u_(s){return s=b(s),s===null?null:s.stateNode}function h_(){return null}return t.attemptContinuousHydration=function(s){if(s.tag===13){var o=Sn(s,134217728);if(o!==null){var h=gt();$t(o,s,134217728,h)}ol(s,134217728)}},t.attemptDiscreteHydration=function(s){if(s.tag===13){var o=Sn(s,1);if(o!==null){var h=gt();$t(o,s,1,h)}ol(s,1)}},t.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var o=fi(s),h=Sn(s,o);if(h!==null){var d=gt();$t(h,s,o,d)}ol(s,o)}},t.attemptSynchronousHydration=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var h=us(o.pendingLanes);h!==0&&(pa(o,h|1),Lt(o,Je()),!(fe&6)&&(Ir(),wn()))}break;case 13:xd(function(){var d=Sn(s,1);if(d!==null){var f=gt();$t(d,s,1,f)}}),ol(s,1)}},t.batchedUpdates=function(s,o){var h=fe;fe|=1;try{return s(o)}finally{fe=h,fe===0&&(Ir(),Co&&wn())}},t.createComponentSelector=function(s){return{$$typeof:Ko,value:s}},t.createContainer=function(s,o,h,d,f,_,E){return Pd(s,o,!1,null,h,d,f,_,E)},t.createHasPseudoClassSelector=function(s){return{$$typeof:Zo,value:s}},t.createHydrationContainer=function(s,o,h,d,f,_,E,I,O){return s=Pd(h,d,!0,s,f,_,E,I,O),s.context=Ld(null),h=s.current,d=gt(),f=fi(h),_=Yn(d,f),_.callback=o??null,hi(h,_,f),s.current.lanes=f,hs(s,f,d),Lt(s,d),s},t.createPortal=function(s,o,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:d==null?null:""+d,children:s,containerInfo:o,implementation:h}},t.createRoleSelector=function(s){return{$$typeof:Vo,value:s}},t.createTestNameSelector=function(s){return{$$typeof:bo,value:s}},t.createTextSelector=function(s){return{$$typeof:Ho,value:s}},t.deferredUpdates=function(s){var o=_e,h=Xe.transition;try{return Xe.transition=null,_e=16,s()}finally{_e=o,Xe.transition=h}},t.discreteUpdates=function(s,o,h,d,f){var _=_e,E=Xe.transition;try{return Xe.transition=null,_e=1,s(o,h,d,f)}finally{_e=_,Xe.transition=E,fe===0&&Ir()}},t.findAllNodes=uu,t.findBoundingRects=function(s,o){if(!Kt)throw Error(a(363));o=uu(s,o),s=[];for(var h=0;h<o.length;h++)s.push(zn(o[h]));for(o=s.length-1;0<o;o--){h=s[o];for(var d=h.x,f=d+h.width,_=h.y,E=_+h.height,I=o-1;0<=I;I--)if(o!==I){var O=s[I],W=O.x,V=W+O.width,oe=O.y,U=oe+O.height;if(d>=W&&_>=oe&&f<=V&&E<=U){s.splice(o,1);break}else if(d!==W||h.width!==O.width||U<_||oe>E){if(!(_!==oe||h.height!==O.height||V<d||W>f)){W>d&&(O.width+=W-d,O.x=d),V<f&&(O.width=f-W),s.splice(o,1);break}}else{oe>_&&(O.height+=oe-_,O.y=_),U<E&&(O.height=E-oe),s.splice(o,1);break}}}return s},t.findHostInstance=Md,t.findHostInstanceWithNoPortals=function(s){return s=H(s),s=s!==null?j(s):null,s===null?null:s.stateNode},t.findHostInstanceWithWarning=function(s){return Md(s)},t.flushControlled=function(s){var o=fe;fe|=1;var h=Xe.transition,d=_e;try{Xe.transition=null,_e=1,s()}finally{_e=d,Xe.transition=h,fe=o,fe===0&&(Ir(),wn())}},t.flushPassiveEffects=Zi,t.flushSync=xd,t.focusWithin=function(s,o){if(!Kt)throw Error(a(363));for(s=ou(s),o=_d(s,o),o=Array.from(o),s=0;s<o.length;){var h=o[s++];if(!Zt(h)){if(h.tag===5&&es(h.stateNode))return!0;for(h=h.child;h!==null;)o.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return _e},t.getFindAllNodesFailureDescription=function(s,o){if(!Kt)throw Error(a(363));var h=0,d=[];s=[ou(s),0];for(var f=0;f<s.length;){var _=s[f++],E=s[f++],I=o[E];if((_.tag!==5||!Zt(_))&&(lu(_,I)&&(d.push(au(I)),E++,E>h&&(h=E)),E<o.length))for(_=_.child;_!==null;)s.push(_,E),_=_.sibling}if(h<o.length){for(s=[];h<o.length;h++)s.push(au(o[h]));return`findAllNodes was able to match part of the selector:
  `+(d.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},t.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return Y(s.child.stateNode);default:return s.child.stateNode}},t.injectIntoDevTools=function(s){if(s={bundleType:s.bundleType,version:s.version,rendererPackageName:s.rendererPackageName,rendererConfig:s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:u_,findFiberByHostInstance:s.findFiberByHostInstance||h_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)s=!0;else{try{vo=o.inject(s),Cn=o}catch{}s=!!o.checkDCE}}return s},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(s,o,h,d){if(!Kt)throw Error(a(363));s=uu(s,o);var f=ts(s,h,d).disconnect;return{disconnect:function(){f()}}},t.registerMutableSourceForHydration=function(s,o){var h=o._getVersion;h=h(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,h]:s.mutableSourceEagerHydrationData.push(o,h)},t.runWithPriority=function(s,o){var h=_e;try{return _e=s,o()}finally{_e=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(s,o,h,d){var f=o.current,_=gt(),E=fi(f);return h=Ld(h),o.context===null?o.context=h:o.pendingContext=h,o=Yn(_,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=hi(f,o,E),s!==null&&($t(s,f,E,_),Mo(s,f,E)),E},t};im.exports=gx;var mx=im.exports;const _x=f_(mx);var rm={exports:{}},hr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */hr.ConcurrentRoot=1;hr.ContinuousEventPriority=4;hr.DefaultEventPriority=16;hr.DiscreteEventPriority=1;hr.IdleEventPriority=536870912;hr.LegacyRoot=0;rm.exports=hr;var sm=rm.exports;function px(r,e){const t=new MutationObserver(n=>{for(const i of n)i.type==="attributes"&&(i.attributeName==="style"||i.attributeName==="class")&&e()});return t.observe(r,{attributes:!0,attributeFilter:["style","class"]}),t}const Of=new WeakMap;function yx(r,e){try{if(r===lo&&typeof e.layerConstructor=="function"){const t=new J1,n=new e.layerConstructor({source:new Oy({url:e.url,format:t})});return{type:r,element:n,props:e}}if(r===Xh){const t=new bg({element:e.overlayPortalContainer});return{type:r,element:t,props:e}}}catch(t){return console.error("Error in createInstance",t),null}return null}function xx(r,e){if(r instanceof oa){if(e.type===lo){const t=e.element,n=r.getTargetElement(),i=()=>{const a=getComputedStyle(n);t.setStyle({"fill-color":a.getPropertyValue("--data-source-polygon-fill-color"),"stroke-color":a.getPropertyValue("--data-source-polygon-stroke-color"),"stroke-width":Number.parseFloat(a.getPropertyValue("--data-source-polygon-stroke-width"))})};r.addLayer(t),px(n,i).observe(n,{attributes:!0,attributeFilter:["style","class"]}),i(),t.getSource()?.once("change",()=>{if(t.getSource()?.getState()==="ready"){const a=t.getSource()?.getExtent();e.props?.fitViewToData&&a&&!a.every(u=>!Number.isFinite(u))&&r.getView().fit(a,{padding:[20,20,20,20],maxZoom:19,duration:1e3})}})}else if(e.type===Xh){const t=e;r.addOverlay(t.popupOverlay),t||console.error("popupInstance is null, this feature is WIP"),r.on("singleclick",n=>{const i=r.forEachFeatureAtPixel(n.pixel,l=>l);if(i){const l=n.coordinate;t.popupOverlay.setPosition(l),Od.render(t.popupFunc(i.getProperties()),t.popupOverlay.getElement())}else t.popupOverlay?.setPosition(void 0),t.popupOverlay?.getElement()&&Od.unmountComponentAtNode(t.popupOverlay.getElement())})}}}function Ex(r,e){r?.element instanceof oa&&e&&r.element.removeLayer(e.element),e?.element instanceof bg&&e.popupOverlay.setMap(null)}function vx(r,e,t,n){t===lo&&e.url&&(r?.element).getSource()&&(r?.element).getSource()?.setUrl(e.url)}function Cx(r,e,t,n){return e===lo&&t.url!==n.url?{url:n.url}:e===Xh&&t.overlay!==n.overlay?{overlay:n.overlay}:null}const Ff=_x({supportsMutation:!0,createInstance:yx,createTextInstance:()=>null,appendChildToContainer:xx,appendChild:(r,e)=>{},removeChild:Ex,insertBefore:(r,e,t)=>{},commitUpdate:vx,removeChildFromContainer:(r,e)=>{r instanceof oa&&r.removeLayer(e?.element)},insertInContainerBefore:(r,e,t)=>{},prepareUpdate:Cx,finalizeInitialChildren:()=>!1,getPublicInstance:r=>r,getChildHostContext:()=>({}),getRootHostContext:()=>({}),getCurrentEventPriority:()=>sm.DefaultEventPriority,prepareForCommit:()=>null,resetAfterCommit:()=>{},clearContainer:()=>null,appendInitialChild:(r,e)=>{},shouldSetTextContent:()=>!1,detachDeletedInstance:()=>{},supportsPersistence:!1,preparePortalMount:()=>{},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,isPrimaryRenderer:!1,warnsIfNotActing:!0,getInstanceFromNode:()=>null,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},prepareScopeUpdate:()=>{},getInstanceFromScope:()=>null,supportsHydration:!1});function wx(r,e){let t=Of.get(e);t||(t=Ff.createContainer(e,sm.ConcurrentRoot,null,!1,null,"",()=>{},null),Of.set(e,t)),Ff.updateContainer(r,t,null,()=>{})}function Sx(r,e){const t=Qn.useRef(null),n=e??t,i=Qn.useRef(null),l=Qn.useId();return Qn.useEffect(()=>{t.current||(t.current=new oa({target:l,view:new Mn({center:[0,0],zoom:1}),layers:[new T1({source:new V1})],controls:[]})),typeof n=="function"?n(t.current):n.current===null&&t.current&&(n.current=t.current)},[]),Qn.useEffect(()=>{t.current&&r.children&&wx(r.children,t.current)},[r.children]),g_.createElement("div",{id:l,ref:i,className:r.className?`react-geojson-map ${r.className}`:"react-geojson-map",style:{width:"100%",height:"100%"}})}const Rx=Qn.forwardRef(Sx),Lx=()=>wu.jsx("div",{style:{width:"300px",height:"300px"},children:wu.jsx(Rx,{className:"w-full h-full",children:wu.jsx(Iy,{url:"https://openlayers.org/data/geojson/countries.geojson"})})});export{Lx as default};
